<div layout-padding layout="column" class="ingest-page">

    <div class="label" 
    [matTooltip]="tooltips.sourcePath"
    matTooltipPosition="left"
    matTooltipShowDelay="500"
    matTooltipHideDelay="500" 
    >{{config.inputFilePath.label}}</div>
    <app-folder-browser
      [startPath]="this.step.fileLocations.inputFilePath"
      (folderChosen)="changeFolder($event)"
      showFiles="true"
      [absoluteOnly]="true"
    ></app-folder-browser>

    <div class="label"
    [matTooltip]="tooltips.sourceType"
    matTooltipPosition="left"
    matTooltipShowDelay="500"
    matTooltipHideDelay="500" 
    >{{config.fileTypes.label}}</div>
    <mat-form-field layout-fill appearance="outline">
      <mat-select
        id="source-file-type-select"
        [(ngModel)]="this.step.fileLocations.inputFileType"
        name="filetype"
        (selectionChange)="onChange()"
      >
        <mat-option
          *ngFor="let option of config.fileTypes.options"
          [value]="option.value"
          [id]="'source-file-type-option-' + option.value"
        >{{option.label}}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <div *ngIf="this.step.fileLocations.inputFileType === 'csv'">
      <div class="label">{{config.csvSeparator.label}}</div>
      <mat-form-field layout-fill appearance="outline" class="csv-separator-field">
        <mat-select
          id="csv-separator-select"
          [(ngModel)]="this.step.fileLocations.separator"
          name="separator"
          (selectionChange)="onChange()"
        >
          <mat-option
            *ngFor="let option of config.csvSeparator.options"
            [value]="option.value"
            [id]="'csv-separator-option-' + option.value"
          >{{option.label}}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div class="label"
    [matTooltip]="tooltips.targetType"
    matTooltipPosition="left"
    matTooltipShowDelay="500"
    matTooltipHideDelay="500" 
    >{{config.outputDocTypes.label}}</div>
    <mat-form-field layout-fill appearance="outline">
      <mat-select
        id="target-file-type-select"
        [(ngModel)]="this.step.options.outputFormat"
        name="doctype"
        (selectionChange)="onChange()"
      >
        <mat-option
          *ngFor="let option of config.outputDocTypes.options"
          [value]="option.value"
          [id]="'target-file-type-option-' + option.value"
        >{{option.label}}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <div class="label"
    [matTooltip]="tooltips.targetPerms"
    matTooltipPosition="left"
    matTooltipShowDelay="500"
    matTooltipHideDelay="500" 
    >{{config.outputPermissions.label}}</div>
    <mat-form-field layout-fill appearance="outline">
      <input
        id="target-permissions"
        matInput
        [(ngModel)]="this.step.options.permissions"
        name="permissions"
        (blur)="onChange()"
        (keypress)="onKeyChange($event)"
      />
    </mat-form-field>

    <div class="label"
    [matTooltip]="tooltips.targetURIReplace"
    matTooltipPosition="left"
    matTooltipShowDelay="500"
    matTooltipHideDelay="500" 
    >{{config.outputURIReplacement.label}}</div>
    <mat-form-field layout-fill appearance="outline">
      <mat-hint>Optional</mat-hint>
      <input
        id="target-uri-replace"
        matInput
        [(ngModel)]="this.step.fileLocations.outputURIReplacement"
        name="permissions"
        (blur)="onChange()"
        (keypress)="onKeyChange($event)"
      />
    </mat-form-field>
</div>
