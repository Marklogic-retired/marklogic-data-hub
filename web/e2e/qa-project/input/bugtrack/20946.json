{"id":20946, "kind":"Bug", "createdAt":"2013-02-26T15:49:36.029865-08:00", "status":"Closed", "title":"clicking links in /v1/graph/explore yields error", "category":"xdmp", "severity":"Minor", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"Clicking a link on /v1/graph/explore yields an error \r\n<rapi:error><rapi:status-code>500</rapi:status-code><rapi:status>INTERNAL ERROR</rapi:status><rapi:message-code>Invalid graph URI</rapi:message-code><rapi:message>Invalid graph URI (err:FOER0000):.  See the MarkLogic server error log for further detail.</rapi:message></rapi:error>", "samplequery":"", "sampledata":"", "version":"7.0-nightly", "tofixin":"7.0-ea2", "fixedin":"7.0-ea2", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, {"username":"lling", "name":"Ling Ling", "email":"ling.ling@marklogic.com"}, {"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[], "cloneOf":"", "support":{"headline":"", "supportDescription":"", "publishStatus":"Not Ready", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["xdmp", "mdubinko"], "changeHistory":[{"time":"2013-02-26T15:49:36.029865-08:00", "updatedBy":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "change":{"assignTo":{"from":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "to":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-26T15:53:13.938335-08:00", "updatedBy":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"133751", "paths":["xdmp/branches/b7_0-ea1/src/Modules/MarkLogic/rest-api/endpoints/graph-explore.xqy"], "affectedBugs":[]}, "comment":"bug:20946\n"}, {"time":"2013-02-26T15:53:42.07886-08:00", "updatedBy":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"133752", "paths":["xdmp/trunk/src/Modules/MarkLogic/rest-api/endpoints/graph-explore.xqy"], "affectedBugs":[]}, "comment":"bug:20946\n"}, {"time":"2013-02-26T16:17:13.371685-08:00", "updatedBy":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "to":{"username":"lling", "name":"Ling Ling", "email":"ling.ling@marklogic.com"}}}, "files":[], "show":true, "comment":"Fixed on trunk and EA branch. \r\n\r\nIf you have a REST instance set up on port 8321 as suggested in the readme, then hit this URL:\r\n\r\nhttp://localhost:8321/v1/graph/explore\r\n\r\nand click a link. It should work."}, {"time":"2013-02-26T16:17:13.371685-08:00", "updatedBy":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "change":{"assignTo":{"from":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "to":{"username":"lling", "name":"Ling Ling", "email":"ling.ling@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-03-01T09:20:15.806069-08:00", "updatedBy":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"134340", "paths":["xdmp/branches/b7_0-ea1/src/Modules/MarkLogic/rest-api/endpoints/graph-explore.xqy"], "affectedBugs":[]}, "comment":"bug:20946 fixing earlier partial commit\n"}, {"time":"2013-03-06T17:31:38.044006-08:00", "updatedBy":{"username":"lling", "name":"Ling Ling", "email":"ling.ling@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"I reproduced this on 2/26 build and verified the fix on today's build.\r\n\r\nI was trying to automate the test using xdmp:http-get like below\r\n\r\nxdmp:http-get(\"http://lling:8321/v1/graph/?q=1bfbfb8%3aff2d5911a6%3a-7d85\",\r\n         <options xmlns=\"xdmp:http\">\r\n            <authentication method=\"digest\">\r\n            <username>admin</username>\r\n            <password>admin</password>\r\n            </authentication>\r\n         </options>)\r\n\r\nThen I found the problem is about the link. The correct link is \r\n\"http://lling:8321/v1/graph/explore?q=1bfbfb8%3aff2d5911a6%3a-7d85\"\r\nnot \r\n\"http://lling:8321/v1/graph/?q=1bfbfb8%3aff2d5911a6%3a-7d85\".\r\n\r\nSo this test need to be automated by appservices team and I'm assigning this to Mega."}, {"time":"2013-03-06T17:31:38.044006-08:00", "updatedBy":{"username":"lling", "name":"Ling Ling", "email":"ling.ling@marklogic.com"}, "change":{"assignTo":{"from":{"username":"lling", "name":"Ling Ling", "email":"ling.ling@marklogic.com"}, "to":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-04-24T11:27:09.839185-07:00", "updatedBy":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "change":{"assignTo":{"from":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "to":{"username":"lling", "name":"Ling Ling", "email":"ling.ling@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-04-24T15:05:25.219181-07:00", "updatedBy":{"username":"lling", "name":"Ling Ling", "email":"ling.ling@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Mega, maybe I didn't make it clear. The problem is that on that webpage, if I click the link, it links me to \"http://lling:8321/v1/graph/?q=1bfbfb8%3aff2d5911a6%3a-7d85\", which is not a correct address. The only thing I could test is using xdmp:http-get with the correct link address, which produces correct results all the time. Or test  using xdmp:http-get with the wrong link address, which produces wrong results all the time. The thing to test is the clicking of the link should link to a correct address, which I didn't find a way to test using XQuery. "}, {"time":"2013-04-24T15:05:25.219181-07:00", "updatedBy":{"username":"lling", "name":"Ling Ling", "email":"ling.ling@marklogic.com"}, "change":{"assignTo":{"from":{"username":"lling", "name":"Ling Ling", "email":"ling.ling@marklogic.com"}, "to":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-04-24T15:29:00.139702-07:00", "updatedBy":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"On trunk, the URLs here have changed (to /v1/graphs/things) and the implementation has been re-written. Given that, it might make sense to just close this bug and pick up testing on the new endpoint."}, {"time":"2013-04-24T15:35:01.858013-07:00", "updatedBy":{"username":"lling", "name":"Ling Ling", "email":"ling.ling@marklogic.com"}, "change":{"status":{"from":"", "to":"Closed"}, "assignTo":{"from":{"username":"lling", "name":"Ling Ling", "email":"ling.ling@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-04-24T15:35:01.858013-07:00", "updatedBy":{"username":"lling", "name":"Ling Ling", "email":"ling.ling@marklogic.com"}, "change":{"assignTo":{"from":{"username":"lling", "name":"Ling Ling", "email":"ling.ling@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}], "updatedAt":"2013-04-24T15:35:01.858013-07:00", "fixedAt":"2013-02-26T16:17:13.371685-08:00", "fixedBy":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "closedAt":"2013-04-24T15:35:01.858013-07:00", "closedBy":{"username":"lling", "name":"Ling Ling", "email":"ling.ling@marklogic.com"}, "renderDescriptionAs":"normal"}