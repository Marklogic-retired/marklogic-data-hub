{"id":20693, "kind":"Bug", "createdAt":"2013-02-04T11:13:17.341702-08:00", "status":"Closed", "title":"Wrap results title and metadata items in tags to enable custom CSS styling", "category":"App Builder", "severity":"Major", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"mwooldri", "name":"Mike Wooldridge", "email":"mike.wooldridge@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"In the results widget of an App Builder app, the title and metadata sections are built by concatenating items that are defined under the Results tab in App Builder.\r\n\r\nCurrently, these items are displayed in the final app as a single string with no markup delineating the items. This makes adding custom CSS styles to specific items difficult if not impossible.\r\n\r\nThis issue was brought up by Matthew Whitehart, who wanted to put the metadata items in the results for an application on separate lines. \r\n\r\nTo fix this situation, we can wrap the title and metadata items in <span> tags as the items are concatenated by the JavaScript.", "samplequery":"", "sampledata":"", "version":"6.0-nightly", "tofixin":"6.0-4", "fixedin":"6.0-4", "platform":"all", "memory":"", "processors":"", "note":"Attaching a diff file that shows how to warp title and metadata items in results.js.", "subscribers":[{"username":"mwooldri", "name":"Mike Wooldridge", "email":"mike.wooldridge@marklogic.com"}, {"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}], "attachments":[{"name":"diff showing items wrapped with span tags", "uri":"root/support/bugtracking/attachments/20693/20130115_results_spans.txt"}], "relationships":[{"type":"", "to":""}], "clones":[22166], "cloneOf":"", "support":{"headline":"App Builder results lack HTML markup", "supportDescription":"Span tags and class names have been added to titles and metadata in the results of App Builder applications, allowing this content to be formatted via CSS.", "publishStatus":"Publish", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["App Builder", "mwooldri"], "changeHistory":[{"time":"2013-02-04T11:13:17.341702-08:00", "updatedBy":{"username":"mwooldri", "name":"Mike Wooldridge", "email":"mike.wooldridge@marklogic.com"}, "change":{"assignTo":{"from":{"username":"mwooldri", "name":"Mike Wooldridge", "email":"mike.wooldridge@marklogic.com"}, "to":{"username":"mwooldri", "name":"Mike Wooldridge", "email":"mike.wooldridge@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-04T11:22:15.727753-08:00", "updatedBy":{"username":"mwooldri", "name":"Mike Wooldridge", "email":"mike.wooldridge@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"We can enhance customization further by including class information in the wrapping <span> tags. \r\n\r\nItems based on elements or attributes could be given the element or attribute name as a class. Literal items could be given a generic class name such as \"literal\". For example:\r\n\r\n<span class=\"name\">Jimmy Stewart</span><span class=\"literal\"> - </span><span class=\"award\">lead-actor</span>\r\n\r\nNeed to confirm that possible names will not violate CSS naming conventions."}, {"time":"2013-02-04T12:55:32.564507-08:00", "updatedBy":{"username":"jfuller", "name":"Jim Fuller", "email":"jim.fuller@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"this maybe something we want to backport to 6 branch (e.g. clone of this defect maybe required)"}, {"time":"2013-03-01T13:34:19.31183-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Mike,\r\n\r\nIs this a candidate for 6.0-3 (code freeze 03/15)?"}, {"time":"2013-03-04T10:49:35.811424-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"If you fix this, please work with Gordon to provide a code example in the customization section of the doc"}, {"time":"2013-03-15T13:24:35.670773-07:00", "updatedBy":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"bounced to 6.0-4 in triage meeting . Possibly move to 7?"}, {"time":"2013-03-15T13:24:35.670773-07:00", "updatedBy":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "change":{"tofixin":{"from":"6.0-3", "to":"6.0-4"}}, "files":[], "show":true}, {"time":"2013-06-24T14:14:11.350067-07:00", "updatedBy":{"username":"mwooldri", "name":"Mike Wooldridge", "email":"mike.wooldridge@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Note to Megha: I'd like to fix this in 6.0-4 as it is simple to fix (as I detail above) and is also fundamental to improving the extensibility of App Builder."}, {"time":"2013-07-09T16:54:59.03411-07:00", "updatedBy":{"username":"mwooldri", "name":"Mike Wooldridge", "email":"mike.wooldridge@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"The title and metadata markup (in App Builder results) has been implemented as follows:\r\n\r\n1. Separate <span> tags wrap each title and metadata item, including literal items\r\n2. For items that are associated with constraints, a class is added to the span tag. The class name is the same name that is used to identify the item in the underlying JavaScript, which is:\r\n    - the element name for element constraints, prefixed with \"ml-\" (class=\"ml-elementname\")\r\n    - the element name + \"_' + attribute name for attribute constraints, prefixed with \"ml-\". (class=\"ml-elementname_attributename\")\r\n3. Just for safety, before insertion, the class names are sanitized by replacing characters that are not alphanumeric, hyphens, or underscores with underscores (\"Foo, Bar, and Baz\" => \"ml-Foo__Bar__and_Baz\")."}, {"time":"2013-07-09T16:57:38.004554-07:00", "updatedBy":{"username":"mwooldri", "name":"Mike Wooldridge", "email":"mike.wooldridge@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"146182", "paths":["xdmp/branches/b6_0/src/Assets/appbuilder/components/appbuilder-2.0/lib/viz/results/results.js"], "affectedBugs":[]}, "comment":"bug:20693 In App Builder deployed apps, title and metadata items are now wrapped in span tags with class names added for items that are based on constraints."}, {"time":"2013-07-09T16:59:37.585385-07:00", "updatedBy":{"username":"mwooldri", "name":"Mike Wooldridge", "email":"mike.wooldridge@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"To test:\r\n\r\n1. In App Builder, create an example app.\r\n2. Open app and view HTML markup for results.\r\n3. Title and metadata items should have <span> markup, e.g.:\r\n\r\n<span class=\"ml-nominee_award\">lead-actor</span>"}, {"time":"2013-07-09T17:00:42.027903-07:00", "updatedBy":{"username":"mwooldri", "name":"Mike Wooldridge", "email":"mike.wooldridge@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"mwooldri", "name":"Mike Wooldridge", "email":"mike.wooldridge@marklogic.com"}, "to":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}}}, "files":[], "show":true, "comment":"146182 Title and metadata items are now wrapped in span tags with class names added for items that are based on constraints."}, {"time":"2013-07-09T17:00:42.027903-07:00", "updatedBy":{"username":"mwooldri", "name":"Mike Wooldridge", "email":"mike.wooldridge@marklogic.com"}, "change":{"assignTo":{"from":{"username":"mwooldri", "name":"Mike Wooldridge", "email":"mike.wooldridge@marklogic.com"}, "to":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-07-12T13:49:15.33161-07:00", "updatedBy":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "change":{"assignTo":{"from":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "to":{"username":"gghai", "name":"Gaurav Ghai", "email":"Gaurav.ghai@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-07-12T13:52:56.862698-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Mike,\r\n\r\nI think this is worth adding some information in the support info (and then updating the documentation). Would be good too loop in Gordon"}, {"time":"2013-07-17T12:34:41.4218-07:00", "updatedBy":{"username":"gghai", "name":"Gaurav Ghai", "email":"Gaurav.ghai@marklogic.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"gghai", "name":"Gaurav Ghai", "email":"Gaurav.ghai@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"Verified on 07/15 build. Added the new responses as per the new additions . \r\n\r\n\r\n1. Separate <span> tags wrap each title and metadata item, including literal items\r\n\r\nTitle : <span class=\"ml-name\">Gregory Peck</span>\r\nMetadata: <span class=\"snippet long\" style=\"display:inline\">Gregory Peck (5 April 1916 â€“ 12 June 2003) was an American film actor . He was one of 20th Century Fox 's most popular film stars, from the 1940s... </span>\r\nLiteral links = lead-actor - 1947\r\n<span class=\"ml-nominee_award\">lead-actor</span>\r\n<span> - </span>\r\n<span class=\"ml-nominee_year\">1947</span>\r\n\r\n2. For items that are associated with constraints, a class is added to the span tag. The class name is the same name that is used to identify the item in the underlying JavaScript, which is:\r\n    - the element name for element constraints, prefixed with \"ml-\" (class=\"ml-elementname\")\r\n    - the element name + \"_' + attribute name for attribute constraints, prefixed with \"ml-\". (class=\"ml-elementname_attributename\")\r\n\r\n<span class=\"ml-name\">Gregory Peck</span>\r\n<span> \" </span>\r\n<span class=\"ml-film-title\">Gentleman's Agreement</span>\r\n<span> \" </span>\r\n\r\n\r\n\r\n\r\n"}, {"time":"2013-07-22T17:34:19.529877-07:00", "updatedBy":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Hi Mike, \r\n\r\nSince this was originally reported by a customer, can you add the Support info Headline and Description so that the bug fix is published in the \"fixed bugs\"report.\r\n\r\nThanks, "}, {"time":"2013-07-22T17:37:54.93619-07:00", "updatedBy":{"username":"mwooldri", "name":"Mike Wooldridge", "email":"mike.wooldridge@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Rick, how do I do this? What is the format? Can you point me at an example?"}, {"time":"2013-07-23T10:36:52.905561-07:00", "updatedBy":{"username":"mwooldri", "name":"Mike Wooldridge", "email":"mike.wooldridge@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Support info...\r\n\r\nHeadline: App Builder results lack HTML markup\r\nDescription: Span tags and class names have been added to titles and metadata in the results of App Builder applications, allowing this content to be formatted via CSS."}, {"time":"2013-08-12T18:10:21.634191-07:00", "updatedBy":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "change":{"status":{"from":"", "to":"Closed"}, "assignTo":{"from":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}], "updatedAt":"2013-08-12T18:10:21.634191-07:00", "fixedAt":"2013-07-09T17:00:42.027903-07:00", "fixedBy":{"username":"mwooldri", "name":"Mike Wooldridge", "email":"mike.wooldridge@marklogic.com"}, "shippedAt":"2013-07-17T12:34:41.4218-07:00", "shippedBy":{"username":"gghai", "name":"Gaurav Ghai", "email":"Gaurav.ghai@marklogic.com"}, "closedAt":"2013-08-12T18:10:21.634191-07:00", "closedBy":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "renderDescriptionAs":"normal"}