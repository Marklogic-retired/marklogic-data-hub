{"id":209, "kind":"Bug", "createdAt":"2003-11-08T18:50:22-08:00", "status":"Closed", "title":"sec:user-default-collections return XDMP-NONMIXEDCOMPLEXCONT error.", "category":"", "severity":"Major", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"rwang", "name":"Rachel Link", "email":"rwang@cerisent.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"1. sec:user-set-default-collections(\"rwang\",\"http://rwang\") 2. login as user rwang and do sec:user-set-default-collections(\"rwang\",\"http://rwang\") 3. sec:user-default-collections(\"rwang\") gets following error : XDMP-NONMIXEDCOMPLEXCONT: fn:data(doc(\"http://cerisent.com/xdmp/users/14203354637744058272\")/sec:user/sec:collections/sec:collection) -- Node has complex type with non-mixed complex content in /security.xqy, on line 1964, in sec:user-default-collections(\"rwang\") $sec:user-name = \"rwang\" $sec:assert = () $sec:col = \"http://cerisent.com/xdmp/security\" $sec:user = (doc(\"http://cerisent.com/xdmp/users/14203354637744058272\")/sec:user)", "samplequery":"", "sampledata":"", "version":"main branch", "tofixin":"", "fixedin":"", "platform":"windows", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"rwang", "name":"Rachel Link", "email":"rwang@cerisent.com"}], "attachments":[], "clones":[], "cloneOf":"", "support":{"headline":"", "supportDescription":"", "publishStatus":"", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["", "rwang"], "changeHistory":[{"time":"2003-11-08T18:51:14-08:00", "updatedBy":{"username":"rwang", "name":"Rachel Link", "email":"rwang@cerisent.com"}, "change":{}, "files":[], "show":false}, {"time":"2003-11-08T18:51:14-08:00", "updatedBy":{"username":"rwang", "name":"Rachel Link", "email":"rwang@cerisent.com"}, "change":{"status":{"from":"", "to":"Fix"}, "assignTo":{"from":{"username":"rwang", "name":"Rachel Link", "email":"rwang@cerisent.com"}, "to":{"username":"avnur", "name":"Ron Avnur", "email":"avnur@cerisent.com"}}}, "files":[], "show":true, "comment":"Assign to Ron"}, {"time":"2003-11-09T21:09:09-08:00", "updatedBy":{"username":"rwang", "name":"Rachel Link", "email":"rwang@cerisent.com"}, "change":{}, "files":[], "show":true, "comment":"correct, step 2 should login as rwang and do Log in as security user, do xdmp:document-insert(\"qa.xml\",<qa>qa</qa>)"}, {"time":"2003-11-09T22:04:10-08:00", "updatedBy":{"username":"avnur", "name":"Ron Avnur", "email":"avnur@cerisent.com"}, "change":{}, "files":[], "show":false}, {"time":"2003-11-09T22:04:10-08:00", "updatedBy":{"username":"avnur", "name":"Ron Avnur", "email":"avnur@cerisent.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"avnur", "name":"Ron Avnur", "email":"avnur@cerisent.com"}, "to":{"username":"rwang", "name":"Rachel Link", "email":"rwang@cerisent.com"}}}, "files":[], "show":true, "comment":"fixed"}, {"time":"2003-11-11T14:46:19-08:00", "updatedBy":{"username":"rwang", "name":"Rachel Link", "email":"rwang@cerisent.com"}, "change":{}, "files":[], "show":false}, {"time":"2003-11-11T14:46:19-08:00", "updatedBy":{"username":"rwang", "name":"Rachel Link", "email":"rwang@cerisent.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"rwang", "name":"Rachel Link", "email":"rwang@cerisent.com"}, "to":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}}}, "files":[], "show":true, "comment":"Veified on build 2.0-test12."}, {"time":"2003-11-12T00:08:57-08:00", "updatedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "change":{}, "files":[], "show":false}, {"time":"2003-11-12T00:08:57-08:00", "updatedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "change":{"status":{"from":"", "to":"Closed"}, "assignTo":{"from":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "to":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}}}, "files":[], "show":true, "comment":"Shipped in 2.0"}], "updatedAt":"2003-11-12T00:08:57-08:00", "fixedAt":"2003-11-09T22:04:10-08:00", "fixedBy":{"username":"avnur", "name":"Ron Avnur", "email":"avnur@cerisent.com"}, "shippedAt":"2003-11-11T14:46:19-08:00", "shippedBy":{"username":"rwang", "name":"Rachel Link", "email":"rwang@cerisent.com"}, "closedAt":"2003-11-12T00:08:57-08:00", "closedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "renderDescriptionAs":"normal"}