{"id":20047, "kind":"Bug", "createdAt":"2012-10-22T14:05:19.269268-07:00", "status":"Will not fix", "title":"Opportunity to minimize false positives with reverse queries on geo indexes.", "category":"search", "severity":"Minor", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"The ElementGeospatialQueryVal::getQuery() function has repetition of the following piece of code.\r\n\r\n     if (hQry==0) {\r\n        if (env.forReverseIndex) {\r\n          // when a range index doesn't exist, the reverse index just matches\r\n          // on the element if it's there\r\n          hQry = new TermQuery(ekey, 0);\r\n          missingRangeIndex = true;\r\n        }\r\n      } else if (env.forReverseIndex) {\r\n\r\nThis fragment deals with the situation that no geo index is available. We add a term query on the element to minimize false positives.\r\n\r\nBut in a similar situation in ElementChildGeospatialQueryVal::getQuery(), when the hQry is 0, we do not add such a key. That means we probably generate more false positives. We can minimize that by adding ChildKey.\r\n\r\nSimilarly we can optimize in ElementAttributePairGeospatialQueryVal::getQuery().\r\n\r\nThis is not a high priority bug but it should be ported to b6_0, b5_0 and b4_2.\r\n\r\n", "samplequery":"", "sampledata":"", "version":"6.0-1", "tofixin":"N/A", "fixedin":"N/A", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[], "cloneOf":19867, "support":{"headline":"", "supportDescription":"", "publishStatus":"Not Ready", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["search", "gchinchwadkar"], "changeHistory":[{"time":"2012-10-22T14:05:19.269268-07:00", "updatedBy":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "to":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}}}, "files":[], "show":true}, {"time":"2012-11-09T12:11:18.050508-08:00", "updatedBy":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "change":{"tofixin":{"from":"", "to":"6.0-3"}}, "files":[], "show":true}, {"time":"2012-11-27T11:43:18.500599-08:00", "updatedBy":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "change":{"tofixin":{"from":"6.0-3", "to":"6.0-4"}}, "files":[], "show":true}, {"time":"2012-11-30T11:54:51.190769-08:00", "updatedBy":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "change":{"status":{"from":"", "to":"Will not fix"}, "assignTo":{"from":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"This is a small optimization. Because of the unnecessary risk we have decided to fix this only in the dev release and not in any in-market releases.\r\n\r\nThere is a clone of this bug on b7_0 that will be fixed."}, {"time":"2012-11-30T11:54:51.190769-08:00", "updatedBy":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-06-28T11:56:50.778432-07:00", "updatedBy":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, "change":{"tofixin":{"from":"6.0-4", "to":"N/A"}}, "files":[], "show":true}], "updatedAt":"2013-06-28T11:56:50.778432-07:00", "renderDescriptionAs":"normal"}