{"id":20225, "kind":"Task", "createdAt":"2012-12-06T15:00:05.397212-08:00", "status":"Closed", "title":"XRANK: boost according to a subquery", "category":"search", "severity":"Major", "priority":{"level":"5", "title":""}, "days":null, "period":{"startDate":null, "endDate":null}, "submittedBy":{"username":"fxue", "name":"Fei Xue", "email":"Fei.Xue@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"RFE 2454 - feature for ML7\r\n\r\nBoost all results of <query 1> with 1000 and <query 2> with 5000; in case a result match both queries, it will get a boost of 6000:\r\nOR(\r\nXRANK(<query 1>, boost=1000),\r\n               XRANK(<query 2>, boost=5000)\r\n)\r\n\r\n\r\nExamples of conditionally boosting:\r\n\r\nBoost all results of <query 1> with 1000 in case they also match <query 2>; results that only match <query 1> are also returned but don’t get the 1000 boost; results that only match <query 2> are not returned:\r\nXRANK(<query 1>, <query 2>, boost=1000)\r\n\r\n\r\nBoost all results of <query 1> with 1000 in case they also match <query 2> and boost them with 5000 in case they also match <query 3>; results that only match <query 1> are also returned but don’t get any boost; results that don’t match <query 1> are not returned; results that match all 2 queries receive a boost of 6000:\r\nXRANK(XRANK(<query 1>, <query 2>, boost=1000), <query 3>, boost=5000)\r\n\r\n\r\nWe have currently standard queries that look like:\r\n\r\nAND(\r\n                XRANK(\r\n                                XRANK(\r\n                                                OR(\r\n                                                                <query 1>,\r\n                                                                XRANK(\r\n                                                                                <query 2>,\r\n                                                                                Boost=70000\r\n                                                                )\r\n),\r\n<query 3>,\r\nboost=5000\r\n                                )\r\n                                <query 4>,\r\nboost=10000\r\n                ),\r\n                <query 5>\r\n)\r\n\r\n\r\n\r\nI hope that conditional XRANK like structures can be made in ML by making a cts-query object like:\r\n\r\n       <cts:and-query>\r\n            <query-1>\r\n                ...\r\n            </query-1>\r\n            <cts:or-query>\r\n                <cts:word-query>\r\n                      <cts:text xml:lang=\"en\">*</cts:text>\r\n                </cts:word-query>\r\n                <query-2 weight=\"16\">\r\n                 ...\r\n                </query-1>\r\n            </cts:or-query>\r\n        </cts:and-query>\r\n", "samplequery":"", "sampledata":"", "version":"7.0-nightly", "tofixin":"7.0-ea3", "fixedin":"7.0-ea3", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"fxue", "name":"Fei Xue", "email":"Fei.Xue@marklogic.com"}, {"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, {"username":"msrinivasan", "name":"Mahalakshmi Srinivasan", "email":"mahalakshmi.srinivasan@marklogic.com"}], "attachments":[], "includeInTaskList":false, "proceduralTasks":{"Requirements Task":[], "Functional Specification Task":[], "Test Specification Task":[], "Test Automation Task":[], "Documentation Task":[]}, "subTasks":[], "tags":["search", "fxue"], "changeHistory":[{"time":"2012-12-06T15:00:05.397212-08:00", "updatedBy":{"username":"fxue", "name":"Fei Xue", "email":"Fei.Xue@marklogic.com"}, "change":{"assignTo":{"from":{"username":"fxue", "name":"Fei Xue", "email":"Fei.Xue@marklogic.com"}, "to":{"username":"fxue", "name":"Fei Xue", "email":"Fei.Xue@marklogic.com"}}}, "files":[], "show":true}, {"time":"2012-12-10T15:39:27.076966-08:00", "updatedBy":{"username":"fxue", "name":"Fei Xue", "email":"Fei.Xue@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Change of task ownership. "}, {"time":"2012-12-10T15:39:27.076966-08:00", "updatedBy":{"username":"fxue", "name":"Fei Xue", "email":"Fei.Xue@marklogic.com"}, "change":{"assignTo":{"from":{"username":"fxue", "name":"Fei Xue", "email":"Fei.Xue@marklogic.com"}, "to":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-11T05:50:38.330501-08:00", "updatedBy":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "change":{"tofixin":{"from":"7.0-ea1", "to":"7.0-ea2"}}, "files":[], "show":true}, {"time":"2013-03-01T17:22:54.610879-08:00", "updatedBy":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "change":{"tofixin":{"from":"7.0-ea2", "to":"7.0-ea3"}}, "files":[], "show":true}, {"time":"2013-05-16T07:42:01.439527-07:00", "updatedBy":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "to":{"username":"msrinivasan", "name":"Mahalakshmi Srinivasan", "email":"mahalakshmi.srinivasan@marklogic.com"}}}, "files":[], "show":true, "comment":"xdmp:document-insert(\"t1.xml\",<d>The King of Persia</d>);\r\nxdmp:document-insert(\"t2.xml\",<d>The Princes of Persia</d>)\r\n;\r\nfor $d in\r\ncts:search(fn:doc(),\r\n cts:boost-query(cts:word-query(\"Persia\", (), 1.0),   \t\t\r\n                 cts:word-query(\"Princes\", (), 10.0)))\r\nreturn\r\n  (xdmp:node-uri($d), cts:score($d));\r\ncts:search(fn:doc(),\r\n cts:boost-query(cts:word-query(\"Persia\", (), 1.0),   \t\t\r\n                 cts:word-query(\"King\", (), 10.0)))\r\nreturn\r\n  (xdmp:node-uri($d), cts:score($d));\r\ncts:search(fn:doc(),\r\n cts:boost-query(cts:word-query(\"Persia\", (), 1.0),   \t\t\r\n                 cts:word-query(\"of\", (), 10.0)))\r\nreturn\r\n  (xdmp:node-uri($d), cts:score($d));"}, {"time":"2013-05-16T07:42:01.439527-07:00", "updatedBy":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "to":{"username":"msrinivasan", "name":"Mahalakshmi Srinivasan", "email":"mahalakshmi.srinivasan@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-08-28T11:47:08.796986-07:00", "updatedBy":{"username":"msrinivasan", "name":"Mahalakshmi Srinivasan", "email":"mahalakshmi.srinivasan@marklogic.com"}, "change":{"status":{"from":null, "to":"Ship"}, "assignTo":{"from":{"username":"msrinivasan", "name":"Mahalakshmi Srinivasan", "email":"mahalakshmi.srinivasan@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"Added this test case to xrank-unit-test-1.xml as of build 7.0-20130828."}], "updatedAt":"2013-08-28T11:47:08.796986-07:00", "fixedAt":"2013-05-16T07:42:01.439527-07:00", "fixedBy":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "shippedAt":"2013-08-28T11:47:08.796986-07:00", "shippedBy":{"username":"msrinivasan", "name":"Mahalakshmi Srinivasan", "email":"mahalakshmi.srinivasan@marklogic.com"}}