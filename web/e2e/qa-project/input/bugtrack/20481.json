{"id":20481, "kind":"Bug", "createdAt":"2013-01-16T09:57:35.471873-08:00", "status":"Closed", "title":"REGR: Configuration Manager is not showing expected page with manage-user role", "category":"Read-Only Config", "severity":"Major", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"Configuration Manager is not showing expected page with manage-user role\r\n\r\nSteps to reproduce - \r\n\r\n1. Create a user with manage-user\r\n2. Go to 'Configuration Manager' from Entry Page using this user\r\n3. Please note that it is displaying ' Your request resulted in an error. Please try again.'\r\n\r\nPlease refer the attached sceen-shot", "samplequery":"", "sampledata":"", "version":"7.0-nightly", "tofixin":"7.0-ea1", "fixedin":"7.0-ea1", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, {"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, {"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, {"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}], "attachments":[{"name":"20481.gif", "uri":"root/support/bugtracking/attachments/20481/20481.gif"}], "relationships":[{"type":"", "to":""}], "clones":[], "cloneOf":"", "support":{"headline":"", "supportDescription":"", "publishStatus":"Not Ready", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["Read-Only Config", "knagar"], "changeHistory":[{"time":"2013-01-16T09:57:35.471873-08:00", "updatedBy":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "change":{"assignTo":{"from":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "to":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-16T10:17:14.335015-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"This could be related to a defect I fixed (to not hardcode security DB). I was sure I tested against a manage user. I will take this defect and fix it"}, {"time":"2013-01-16T10:22:21.292958-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"status":{"from":"", "to":"Fix"}, "assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-16T21:40:32.734066-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"128038", "paths":["xdmp/trunk/src/Modules/MarkLogic/manage/lib/security-util.xqy"], "affectedBugs":[]}, "comment":"bug:20481 REGR: Configuration Manager is not showing expected page with manage-user role"}, {"time":"2013-01-16T21:41:09.266284-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"128039", "paths":["xdmp/trunk/src/Config/security.xml"], "affectedBugs":[]}, "comment":"bug:20481 REGR: Configuration Manager is not showing expected page with manage-user role"}, {"time":"2013-01-16T21:41:34.94694-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-16T21:41:34.94694-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-22T01:50:59.956862-08:00", "updatedBy":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Hi Ganesh, \r\n\r\nI am not sure if this is related to this bug but I am getting same page by clicking Host name in configuration manager, for manager-user and admin user both.\r\n\r\nStep to reproduce - \r\n\r\n1. Go to configuration manager with admin/manage-user role\r\n2. Click on Hosts from left navigation \r\n3.  Click on Host name\r\n\r\nPlease note that it is displaying ' Your request resulted in an error. Please try again.' \r\n\r\nThanks\r\nKuldeep"}, {"time":"2013-01-22T01:50:59.956862-08:00", "updatedBy":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "change":{"assignTo":{"from":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "to":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-22T02:20:52.825055-08:00", "updatedBy":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Also clicking on Edit button on Host page showed page with below message - \r\n\r\nInvalid type: edit is not one of default|status|metrics|schema"}, {"time":"2013-03-04T10:34:29.527453-08:00", "updatedBy":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "change":{"status":{"from":"", "to":"Verify"}, "assignTo":{"from":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "to":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-03-04T13:24:31.549392-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Does not seem to be related to the fix I made.\r\n\r\nNorm,\r\n\r\nThis is the error I am seeing in the log. Hope this helps you to figure out what the issue is and contact the right folks\r\n\r\n\r\n\r\n2013-03-04 13:20:52.534 Notice: App-Services: SEC-PRIV: xdmp:http-get(\"http://markmail.org/gadgets/threads.xqy?l=com.marklogic.develope...\") -- Need privilege: http://marklogic.com/xdmp/privileges/xdmp-http-get\r\n2013-03-04 13:20:52.534 Notice: App-Services: in /redirector/developer.xqy, at 9:18 [1.0-ml]\r\n2013-03-04 13:20:52.534 Notice: App-Services:   $update = \"search_content\"\r\n2013-03-04 13:20:52.534 Notice: App-Services:   $search = \"\"\r\n2013-03-04 13:20:52.534 Notice: App-Services:   $num-entries = 6\r\n2013-03-04 13:20:52.555 Notice: App-Services: SEC-PRIV: xdmp:add-response-header(\"Cache-Control\", \"max-age=3600, must-revalidate\") -- Need privilege: http://marklogic.com/xdmp/privileges/xdmp-add-response-header\r\n2013-03-04 13:20:52.555 Notice: App-Services: in /redirector/community.xqy, at 10:49 [1.0-ml]\r\n2013-03-04 13:20:52.555 Notice: App-Services:   $uri = \"/redirector/community.xqy?version=7.0-ea1_20130304&amp;update=co...\"\r\n2013-03-04 13:20:52.555 Notice: App-Services:   $request-version = \"7.0-ea1_20130304\"\r\n2013-03-04 13:20:52.555 Notice: App-Services:   $update = \"community_content\"\r\n2013-03-04 13:20:52.555 Notice: App-Services: SEC-PRIV: xdmp:add-response-header(\"Cache-Control\", \"max-age=3600, must-revalidate\") -- Need privilege: http://marklogic.com/xdmp/privileges/xdmp-add-response-header\r\n2013-03-04 13:20:52.555 Notice: App-Services: in /redirector/integrate.xqy, at 10:49 [1.0-ml]\r\n2013-03-04 13:20:52.555 Notice: App-Services:   $uri = \"/redirector/integrate.xqy?version=7.0-ea1_20130304&amp;update=in...\"\r\n2013-03-04 13:20:52.555 Notice: App-Services:   $request-version = \"7.0-ea1_20130304\"\r\n2013-03-04 13:20:52.555 Notice: App-Services:   $update = \"integrate_content\"\r\n2013-03-04 13:20:52.556 Notice: App-Services: SEC-PRIV: xdmp:add-response-header(\"Cache-Control\", \"max-age=3600, must-revalidate\") -- Need privilege: http://marklogic.com/xdmp/privileges/xdmp-add-response-header\r\n2013-03-04 13:20:52.556 Notice: App-Services: in /redirector/explore.xqy, at 10:49 [1.0-ml]\r\n2013-03-04 13:20:52.556 Notice: App-Services:   $uri = \"/redirector/explore.xqy?version=7.0-ea1_20130304&amp;update=expl...\"\r\n2013-03-04 13:20:52.556 Notice: App-Services:   $request-version = \"7.0-ea1_20130304\"\r\n2013-03-04 13:20:52.556 Notice: App-Services:   $update = \"explore_content\"\r\n2013-03-04 13:21:19.121 Notice: App-Services: SEC-PRIV: xdmp:http-get(\"http://markmail.org/gadgets/threads.xqy?l=com.marklogic.develope...\") -- Need privilege: http://marklogic.com/xdmp/privileges/xdmp-http-get\r\n2013-03-04 13:21:19.121 Notice: App-Services: in /redirector/developer.xqy, at 9:18 [1.0-ml]\r\n2013-03-04 13:21:19.121 Notice: App-Services:   $update = \"search_content\"\r\n2013-03-04 13:21:19.121 Notice: App-Services:   $search = \"\"\r\n2013-03-04 13:21:19.121 Notice: App-Services:   $num-entries = 6\r\n2013-03-04 13:21:19.121 Notice: App-Services: SEC-PRIV: xdmp:add-response-header(\"Cache-Control\", \"max-age=3600, must-revalidate\") -- Need privilege: http://marklogic.com/xdmp/privileges/xdmp-add-response-header\r\n2013-03-04 13:21:19.121 Notice: App-Services: in /redirector/integrate.xqy, at 10:49 [1.0-ml]\r\n2013-03-04 13:21:19.121 Notice: App-Services:   $uri = \"/redirector/integrate.xqy?version=7.0-ea1_20130304&amp;update=in...\"\r\n2013-03-04 13:21:19.121 Notice: App-Services:   $request-version = \"7.0-ea1_20130304\"\r\n2013-03-04 13:21:19.121 Notice: App-Services:   $update = \"integrate_content\"\r\n2013-03-04 13:21:19.121 Notice: App-Services: SEC-PRIV: xdmp:add-response-header(\"Cache-Control\", \"max-age=3600, must-revalidate\") -- Need privilege: http://marklogic.com/xdmp/privileges/xdmp-add-response-header\r\n2013-03-04 13:21:19.121 Notice: App-Services: in /redirector/explore.xqy, at 10:49 [1.0-ml]\r\n2013-03-04 13:21:19.121 Notice: App-Services:   $uri = \"/redirector/explore.xqy?version=7.0-ea1_20130304&amp;update=expl...\"\r\n2013-03-04 13:21:19.121 Notice: App-Services:   $request-version = \"7.0-ea1_20130304\"\r\n2013-03-04 13:21:19.121 Notice: App-Services:   $update = \"explore_content\"\r\n2013-03-04 13:21:19.127 Notice: App-Services: SEC-PRIV: xdmp:add-response-header(\"Cache-Control\", \"max-age=3600, must-revalidate\") -- Need privilege: http://marklogic.com/xdmp/privileges/xdmp-add-response-header\r\n2013-03-04 13:21:19.127 Notice: App-Services: in /redirector/community.xqy, at 10:49 [1.0-ml]\r\n2013-03-04 13:21:19.127 Notice: App-Services:   $uri = \"/redirector/community.xqy?version=7.0-ea1_20130304&amp;update=co...\"\r\n2013-03-04 13:21:19.127 Notice: App-Services:   $request-version = \"7.0-ea1_20130304\"\r\n2013-03-04 13:21:19.127 Notice: App-Services:   $update = \"community_content\"\r\n"}, {"time":"2013-03-04T13:24:31.549392-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-03-05T08:57:10.949249-08:00", "updatedBy":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Erik,\r\n\r\nThis seems to be related to some aspect of how the view values are constructed from the manage/config.xqy data.\r\n\r\nI dug around a bit, but I wasn't able to unwind the calls down to a point where I understood why 'edit' was not being included.\r\n\r\nCan you take a quick look? If you're too busy, feel free to hand it back to me and I'll try to dig deeper."}, {"time":"2013-03-05T08:57:10.949249-08:00", "updatedBy":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}, "change":{"assignTo":{"from":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}, "to":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-03-05T11:54:29.561239-08:00", "updatedBy":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"The endpoint is passing false(), which selects the list views instead of the item views. "}, {"time":"2013-03-05T12:34:49.973393-08:00", "updatedBy":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "change":{"status":{"from":"", "to":"Fix"}, "assignTo":{"from":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "to":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}}}, "files":[], "show":true, "comment":"sending patch for review"}, {"time":"2013-03-05T12:50:40.778625-08:00", "updatedBy":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"135040", "paths":["xdmp/branches/b7_0-ea1/src/Apps/common-api/endpoints/hosts/host-item.xqy"], "affectedBugs":[]}, "comment":"Bug:20481 host endpoint configuration as item"}, {"time":"2013-03-05T12:53:03.27569-08:00", "updatedBy":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "to":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}}}, "files":[], "show":true, "comment":"The REST API should support Host edit requests\r\n\r\nI didn't see any other resources that have this error, but please reopen the bug and assign to me if you find them."}, {"time":"2013-03-05T12:53:03.27569-08:00", "updatedBy":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "change":{"assignTo":{"from":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "to":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-03-06T09:34:50.026442-08:00", "updatedBy":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"Verified and already having regression test (ROC_Hosts.xml) for it.\r\n\r\nThanks\r\nKuldeep"}], "updatedAt":"2013-03-06T09:34:50.026442-08:00", "fixedAt":"2013-03-05T12:53:03.27569-08:00", "fixedBy":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "shippedAt":"2013-03-06T09:34:50.026442-08:00", "shippedBy":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "renderDescriptionAs":"normal"}