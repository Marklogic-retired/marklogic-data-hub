{"id":20912, "kind":"Bug", "createdAt":"2013-02-24T10:40:31.555559-08:00", "status":"Closed", "title":"RuleManagerImpl.writeRule() fails with endpoint exception", "category":"MarkLogic Java API", "severity":"Major", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"cookbook example /clientapi-java/src/main/java/com/marklogic/client/example/cookbook/RawClientAlert.java produces the following trace:\r\n\r\nException in thread \"main\" com.marklogic.client.FailedRequestException: Local message: /alert/rules write failed: Method Not Allowed. Server Message: REST-UNSUPPORTEDMETHOD: (err:FOER0000) Endpoint does not support method: PUT\r\n\tat com.marklogic.client.impl.JerseyServices.putPostValueImpl(JerseyServices.java:2110)\r\n\tat com.marklogic.client.impl.JerseyServices.putValue(JerseyServices.java:1984)\r\n\tat com.marklogic.client.impl.RuleManagerImpl.writeRule(RuleManagerImpl.java:111)\r\n\tat com.marklogic.client.example.cookbook.RawClientAlert.configure(RawClientAlert.java:104)\r\n\tat com.marklogic.client.example.cookbook.RawClientAlert.run(RawClientAlert.java:57)\r\n\tat com.marklogic.client.example.cookbook.RawClientAlert.main(RawClientAlert.java:44)\r\n\r\nThe JavaDoc for writeRule() says the name is required, but the signature doesn't match.  Maybe that is the issue?  We can't extract the name from a raw payload (especially for JSON). \r\n\r\nIf that is the issue, please also fix the RawClientAlert example at line 104.\r\n", "samplequery":"", "sampledata":"", "version":"7.0-nightly", "tofixin":"7.0-ea1", "fixedin":"7.0-ea1", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, {"username":"cgreer", "name":"Charles Greer", "email":"charles.greer@marklogic.com"}, {"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, {"username":"ayuwono", "name":"Aries Yuwono", "email":"ayuwono@marklogic.com"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[], "cloneOf":"", "support":{"headline":"", "supportDescription":"", "publishStatus":"Not Ready", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["MarkLogic Java API", "ehennum"], "changeHistory":[{"time":"2013-02-24T10:40:31.555559-08:00", "updatedBy":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "change":{"assignTo":{"from":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "to":{"username":"cgreer", "name":"Charles Greer", "email":"charles.greer@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-25T07:45:05.180573-08:00", "updatedBy":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Afterthought:  I suspect that the name came out because the POJO already has it.\r\n\r\nIf that's the case, maybe an overload is the right approach:  without the name for the POJO, with the name argument for the raw payload.\r\n"}, {"time":"2013-02-25T09:57:55.631134-08:00", "updatedBy":{"username":"cgreer", "name":"Charles Greer", "email":"charles.greer@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Yes this is the issue.  The (my) original conception was just to support the POJO, but I agree that we shouldn't require that; I think your suggestion is the right way to go.\r\n"}, {"time":"2013-02-25T09:58:16.175868-08:00", "updatedBy":{"username":"cgreer", "name":"Charles Greer", "email":"charles.greer@marklogic.com"}, "change":{"status":{"from":"", "to":"Fix"}, "assignTo":{"from":{"username":"cgreer", "name":"Charles Greer", "email":"charles.greer@marklogic.com"}, "to":{"username":"cgreer", "name":"Charles Greer", "email":"charles.greer@marklogic.com"}}}, "files":[], "show":true, "comment":"This should be fixed and incorporated into EA-1."}, {"time":"2013-02-25T16:50:24.727143-08:00", "updatedBy":{"username":"cgreer", "name":"Charles Greer", "email":"charles.greer@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Patch in review that fixes this issue."}, {"time":"2013-02-27T13:33:28.953497-08:00", "updatedBy":{"username":"cgreer", "name":"Charles Greer", "email":"charles.greer@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"133934", "paths":["client-api/java/trunk/src/main/java/com/marklogic/client/alerting/RuleManager.java", "client-api/java/trunk/src/test/resources/rule1.xml", "client-api/java/trunk/src/main/java/com/marklogic/client/example/batch/SearchCollectorExample.java", "client-api/java/trunk/src/test/java/com/marklogic/client/test/AlertingTest.java", "client-api/java/trunk/src/main/java/com/marklogic/client/example/cookbook/RawClientAlert.java", "client-api/java/trunk/src/main/java/com/marklogic/client/impl/RuleManagerImpl.java"], "affectedBugs":[]}, "comment":"bug:20912 writeRule needs name argmument for raw handles"}, {"time":"2013-02-27T14:42:49.642222-08:00", "updatedBy":{"username":"cgreer", "name":"Charles Greer", "email":"charles.greer@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"cgreer", "name":"Charles Greer", "email":"charles.greer@marklogic.com"}, "to":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}}}, "files":[], "show":true, "comment":"This was a hole in the spec.  THe spec has been updated with two methods where there was one.\r\n\r\nNew:  writeRule(RuleDefinition) + writeRule(String, RuleWriteHandle)\r\n"}, {"time":"2013-02-27T14:42:49.642222-08:00", "updatedBy":{"username":"cgreer", "name":"Charles Greer", "email":"charles.greer@marklogic.com"}, "change":{"assignTo":{"from":{"username":"cgreer", "name":"Charles Greer", "email":"charles.greer@marklogic.com"}, "to":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-28T10:10:28.621964-08:00", "updatedBy":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "change":{"assignTo":{"from":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "to":{"username":"ayuwono", "name":"Aries Yuwono", "email":"ayuwono@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-28T14:14:19.125905-08:00", "updatedBy":{"username":"ayuwono", "name":"Aries Yuwono", "email":"ayuwono@marklogic.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"ayuwono", "name":"Aries Yuwono", "email":"ayuwono@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"Verified passed"}, {"time":"2013-02-28T14:14:19.125905-08:00", "updatedBy":{"username":"ayuwono", "name":"Aries Yuwono", "email":"ayuwono@marklogic.com"}, "change":{"assignTo":{"from":{"username":"ayuwono", "name":"Aries Yuwono", "email":"ayuwono@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}], "updatedAt":"2013-02-28T14:14:19.125905-08:00", "fixedAt":"2013-02-27T14:42:49.642222-08:00", "fixedBy":{"username":"cgreer", "name":"Charles Greer", "email":"charles.greer@marklogic.com"}, "shippedAt":"2013-02-28T14:14:19.125905-08:00", "shippedBy":{"username":"ayuwono", "name":"Aries Yuwono", "email":"ayuwono@marklogic.com"}, "renderDescriptionAs":"normal"}