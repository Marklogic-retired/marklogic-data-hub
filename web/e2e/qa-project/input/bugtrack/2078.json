{"id":2078, "kind":"Bug", "createdAt":"2005-08-11T17:56:53.809712-07:00", "status":"Closed", "title":"false match with cts:element-value-query", "category":"search", "severity":"Critical", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"denise", "name":"Denise Miura", "email":"denise.skarupski@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"using the sample data and sample query included in this bug report, cts:element-value-query() will return a false match when:\n1) there is a correct match ahead of it and\n2) the first word of the falsely-matched-element's content is the same as the term being searched for.\n\n", "samplequery":"\n<results>\n{\nlet $q:=cts:element-value-query(fn:expanded-QName(\"\",\"description\"),'red',(\"unstemmed\", \"unwildcarded\"))\n\nfor $c in cts:search(doc('myitems.xml')//item_tuple, $q)\nreturn \n<p>\n{\n$c\n}\n</p>\n}\n</results>\n\n", "sampledata":"<items><item_tuple><itemno>1001</itemno><description>Red</description><offered_by>U01</offered_by><start_date>1999-01-05</start_date><end_date>1999-01-20</end_date><reserve_price>40</reserve_price></item_tuple><item_tuple><itemno>1002</itemno><description>Motorcycle</description><offered_by>U02</offered_by><start_date>1999-02-11</start_date><end_date>1999-03-15</end_date><reserve_price>500</reserve_price></item_tuple><item_tuple><itemno>1001</itemno><description>Red Bicycle</description><offered_by>U01</offered_by><start_date>1999-01-05</start_date><end_date>1999-01-20</end_date><reserve_price>40</reserve_price></item_tuple><item_tuple><itemno>1002</itemno><description>Motorcycle</description><offered_by>U02</offered_by><start_date>1999-02-11</start_date><end_date>1999-03-15</end_date><reserve_price>500</reserve_price></item_tuple><item_tuple><itemno>1003</itemno><description>Old Bicycle</description><offered_by>U02</offered_by><start_date>1999-01-10</start_date><end_date>1999-02-20</end_date><reserve_price>25</reserve_price></item_tuple><item_tuple><itemno>1004</itemno><description>Tricycle</description><offered_by>U01</offered_by><start_date>1999-02-25</start_date><end_date>1999-03-08</end_date><reserve_price>15</reserve_price></item_tuple><item_tuple><itemno>1005</itemno><description>Tennis Racket</description><offered_by>U03</offered_by><start_date>1999-03-19</start_date><end_date>1999-04-30</end_date><reserve_price>20</reserve_price></item_tuple><item_tuple><itemno>1006</itemno><description>Helicopter</description><offered_by>U03</offered_by><start_date>1999-05-05</start_date><end_date>1999-05-25</end_date><reserve_price>50000</reserve_price></item_tuple><item_tuple><itemno>1007</itemno><description>Racing Bicycle</description><offered_by>U04</offered_by><start_date>1999-01-20</start_date><end_date>1999-02-20</end_date><reserve_price>200</reserve_price></item_tuple><item_tuple><itemno>1008</itemno><description>Broken Bicycle</description><offered_by>U01</offered_by><start_date>1999-02-05</start_date><end_date>1999-03-06</end_date><reserve_price>25</reserve_price></item_tuple></items>\n", "version":"3.0-2", "tofixin":"3.0-3", "fixedin":"3.0-3", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"denise", "name":"Denise Miura", "email":"denise.skarupski@marklogic.com"}], "attachments":[], "clones":[], "cloneOf":"", "support":{"headline":"cts:element-value-query can make false matches", "supportDescription":"When the text of an element is longer than the search pattern, it's possible to have a false match against the first part of the text. ", "publishStatus":"Publish", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["search", "denise"], "changeHistory":[{"time":"2005-08-14T01:01:40.60152-07:00", "updatedBy":{"username":"ian", "name":"Ian Small", "email":"ian@cerisent.com"}, "change":{"status":{"from":"", "to":"Fix"}, "assignTo":{"from":{"username":"ian", "name":"Ian Small", "email":"ian@cerisent.com"}, "to":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}}}, "files":[], "show":true, "comment":"should this be you or hui?"}, {"time":"2005-08-14T20:17:58.796405-07:00", "updatedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "change":{"assignTo":{"from":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "to":{"username":"hui", "name":"Hui Li", "email":"hui.li@marklogic.com"}}}, "files":[], "show":true}, {"time":"2005-08-17T16:40:15.255628-07:00", "updatedBy":{"username":"hui", "name":"Hui Li", "email":"hui.li@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"hui", "name":"Hui Li", "email":"hui.li@marklogic.com"}, "to":{"username":"rwang", "name":"Rachel Link", "email":"rwang@cerisent.com"}}}, "files":[], "show":true, "comment":"Fixed this bug to cover the case that text is longer than search pattern."}, {"time":"2005-08-22T11:13:57.658819-07:00", "updatedBy":{"username":"rwang", "name":"Rachel Link", "email":"rwang@cerisent.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"rwang", "name":"Rachel Link", "email":"rwang@cerisent.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"verified on build 0822. "}], "updatedAt":"2005-08-22T11:13:57.658819-07:00", "fixedAt":"2005-08-17T16:40:15.255628-07:00", "fixedBy":{"username":"hui", "name":"Hui Li", "email":"hui.li@marklogic.com"}, "shippedAt":"2005-08-22T11:13:57.658819-07:00", "shippedBy":{"username":"rwang", "name":"Rachel Link", "email":"rwang@cerisent.com"}, "renderDescriptionAs":"normal", "renderSampleQueryAs":"normal", "renderSampleDataAs":"normal"}