{"id":20480, "kind":"Bug", "createdAt":"2013-01-16T07:26:50.349509-08:00", "status":"Closed", "title":"XSLT still resolves xsl:import URIs incorrectly sometimes", "category":"XSLT", "severity":"Major", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"Here's a way of making the appservices bug happen:\r\n\r\n1. Run the appservices rest-api unit tests from the browser. Ignore the results.\r\n   I'm guessing you probably need the setup work to have been done.\r\n\r\n2. Edit src/Modules/MarkLogic/rest-api/models/config-indexes-model.xqy\r\n   Delete the 'private' keyword from the config-indexes:displayxml(...)\r\n   function.\r\n\r\n3. Put this in Query Console; point the content source at the App-Services\r\n   database and whack \"Run\":\r\n\r\nimport module namespace config-indexes = \"http://marklogic.com/rest-api/models/config-indexes\"\r\nat \"/MarkLogic/rest-api/models/config-indexes-model.xqy\";\r\n\r\nlet $optsmap := map:map()\r\nlet $_ := map:put($optsmap, \"/v1/config/query/x\",\r\n                    <options xml:lang=\"en\" xmlns=\"http://marklogic.com/appservices/search\">\r\n                    <return-facets>true</return-facets>\r\n                    </options>)\r\nlet $_ := map:put($optsmap, \"/v1/config/query/y\",\r\n                    <options xml:lang=\"en\" xmlns=\"http://marklogic.com/appservices/search\">\r\n                      <return-facets>true</return-facets>\r\n                    </options>)\r\nreturn\r\n  config-indexes:displayxml($optsmap)\r\n", "samplequery":"", "sampledata":"", "version":"7.0-nightly", "tofixin":"7.0-ea1", "fixedin":"7.0-ea1", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}, {"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, {"username":"vkorolev", "name":"Vitaly Korolev", "email":"vitaly.korolev@marklogic.com"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[20505], "cloneOf":"", "support":{"headline":"", "supportDescription":"regression", "publishStatus":"Never Publish", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["XSLT", "nwalsh"], "changeHistory":[{"time":"2013-01-16T07:26:50.349509-08:00", "updatedBy":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}, "change":{"assignTo":{"from":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}, "to":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}}}, "files":[], "show":true}, {"time":"2013-01-16T08:44:07.096112-08:00", "updatedBy":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"127971", "paths":["xdmp/trunk/src/Eval.cpp"], "affectedBugs":[]}, "comment":"Bug:20480 pass uri not modulePath as uri to getProgram"}, {"time":"2013-01-17T14:35:28.275281-08:00", "updatedBy":{"username":"vkorolev", "name":"Vitaly Korolev", "email":"vitaly.korolev@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"My REST API tests in 7.0 regression are good now. XDMP-MODNOTFOUND error is not longer triggered."}, {"time":"2013-01-24T13:14:27.107173-08:00", "updatedBy":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "to":{"username":"vkorolev", "name":"Vitaly Korolev", "email":"vitaly.korolev@marklogic.com"}}}, "files":[], "show":true, "comment":"Fixed 7.0-20130117"}, {"time":"2013-01-24T13:14:27.107173-08:00", "updatedBy":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "change":{"assignTo":{"from":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "to":{"username":"vkorolev", "name":"Vitaly Korolev", "email":"vitaly.korolev@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-21T16:06:10.358262-08:00", "updatedBy":{"username":"vkorolev", "name":"Vitaly Korolev", "email":"vitaly.korolev@marklogic.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"vkorolev", "name":"Vitaly Korolev", "email":"vitaly.korolev@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"The symptoms of this bug are gone with the fix; MODNOTFOUND error is not showing up in regression."}], "updatedAt":"2013-02-21T16:06:10.358262-08:00", "fixedAt":"2013-01-24T13:14:27.107173-08:00", "fixedBy":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "shippedAt":"2013-02-21T16:06:10.358262-08:00", "shippedBy":{"username":"vkorolev", "name":"Vitaly Korolev", "email":"vitaly.korolev@marklogic.com"}, "renderDescriptionAs":"normal"}