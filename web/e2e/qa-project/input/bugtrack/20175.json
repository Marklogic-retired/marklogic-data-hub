{"id":20175, "kind":"Bug", "createdAt":"2012-12-02T21:28:07.683607-08:00", "status":"Will not fix", "title":"cts:score evaluating to a different value than expected", "category":"search", "severity":"Critical", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"ksaxena", "name":"Kapil Saxena", "email":"kapil.saxena@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"ML Version: 4.2-20121202\r\n\r\nTest Name: cts-document-fragment-query.xml\r\nXQuery:\r\nxquery version \"0.9-ml\"\r\n\tdeclare namespace prop=\"http://marklogic.com/xdmp/property\" \r\n\txdmp:node-insert-child(fn:doc(\"hello2.xml\")/a,\r\n\t<author>maha</author>);\r\n\r\n   for $i in cts:search(fn:collection(),cts:document-fragment-query(cts:element-value-query(xs:QName(\"author\"),\"maha\"))) return <res>{$i} {cts:score($i)}></res>\r\n   \r\nActual:\r\n<res><a>How are you?<priority>6</priority><author>maha</author></a>278528></res>\r\n\r\nExpected:\r\n<res><a>How are you?<priority>6</priority><author>maha</author></a>36864></res>\r\n\r\n************************************************************************************************************************************************************\r\n\r\nTest Name: cts-properties-query.xml\r\nXquery:\r\nxquery version \"0.9-ml\"\r\n\tdeclare namespace prop=\"http://marklogic.com/xdmp/property\" \r\n\txdmp:node-insert-child(xdmp:document-properties(\"hello2.xml\")/prop:properties,\r\n\t<prop:author>maha</prop:author>);\r\n\r\n   for $i in cts:search(fn:collection(),cts:properties-query(cts:element-value-query(xs:QName(\"prop:author\"),\"maha\"))) return <res>{$i} {cts:score($i)}></res>\r\n\r\nActual Result:\r\n<res><a>How are you?</a>294912></res>\r\n\r\nExpected Result:\r\n<res><a>How are you?</a>38912></res>\r\n\r\n************************************************************************************************************************************************************", "samplequery":"", "sampledata":"", "version":"4.2-nightly", "tofixin":"N/A", "fixedin":"N/A", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"ksaxena", "name":"Kapil Saxena", "email":"kapil.saxena@marklogic.com"}, {"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}, {"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[], "cloneOf":"", "support":{"headline":"", "supportDescription":"", "publishStatus":"Not Ready", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["search", "ksaxena"], "changeHistory":[{"time":"2012-12-02T21:28:07.683607-08:00", "updatedBy":{"username":"ksaxena", "name":"Kapil Saxena", "email":"kapil.saxena@marklogic.com"}, "change":{"assignTo":{"from":{"username":"ksaxena", "name":"Kapil Saxena", "email":"kapil.saxena@marklogic.com"}, "to":{"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}}}, "files":[], "show":true}, {"time":"2012-12-03T09:28:06.29936-08:00", "updatedBy":{"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}, "change":{"assignTo":{"from":{"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}, "to":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}}}, "files":[], "show":true}, {"time":"2012-12-03T20:54:36.019834-08:00", "updatedBy":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Can we track a history of this failure? When did it fail for the first time?"}, {"time":"2012-12-04T00:21:28.449506-08:00", "updatedBy":{"username":"ksaxena", "name":"Kapil Saxena", "email":"kapil.saxena@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"It's failing since 10/04"}, {"time":"2013-02-20T13:12:26.700086-08:00", "updatedBy":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "change":{"status":{"from":"", "to":"Will not fix"}, "assignTo":{"from":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-20T13:12:26.700086-08:00", "updatedBy":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-20T13:12:26.700086-08:00", "updatedBy":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "change":{"tofixin":{"from":"4.2-10", "to":"N/A"}}, "files":[], "show":true}], "updatedAt":"2013-02-20T13:12:26.700086-08:00", "renderDescriptionAs":"normal"}