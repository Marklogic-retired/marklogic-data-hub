{"id":20820, "kind":"Bug", "createdAt":"2013-02-18T09:38:54.574874-08:00", "status":"Will not fix", "title":"Toggling Fips setting restarts the server but not in a clean way", "category":"adminGUI", "severity":"Major", "priority":{"level":"3", "title":""}, "submittedBy":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"Toggling Fips setting restarts the server but not in a clean way\r\n\r\n Steps to reproduce - \r\n\r\n1. Go to Clusters in Admin UI\r\n2. Change 'ssl fips enabled' value from 'true' to 'false'\r\n\r\nPlease note that it gives 503 error page and user have to refresh the browser to back on Admin UI page.\r\n\r\n", "samplequery":"", "sampledata":"", "version":"7.0-nightly", "tofixin":"N/A", "fixedin":"N/A", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, {"username":"atsoi", "name":"Arthur Tsoi", "email":"arthur.tsoi@marklogic.com"}, {"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, {"username":"sverma", "name":"Shiva Verma", "email":"shiva.verma@marklogic.com"}, {"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, {"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}, {"username":"dgorbet", "name":"David Gorbet", "email":"David.Gorbet@marklogic.com"}, {"username":"wfeick", "name":"Wayne Feick", "email":"wfeick@marklogic.com"}], "attachments":[{"name":"20820.mp4", "uri":"root/support/bugtracking/attachments/20820/20820.mp4"}], "relationships":[{"type":"", "to":""}], "clones":[20821, 25011], "cloneOf":"", "support":{"headline":"", "supportDescription":"", "publishStatus":"Not Ready", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["adminGUI", "knagar"], "changeHistory":[{"time":"2013-02-18T09:38:54.574874-08:00", "updatedBy":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "change":{"assignTo":{"from":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "to":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-18T09:42:44.756399-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Arthur, Wayne,\r\n\r\nDid anything change around this area (SSL settings) that might have caused this regression.I will continue to look at this in the meanwhile"}, {"time":"2013-02-18T09:54:57.091562-08:00", "updatedBy":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Please note that some times its kind of  intermittent issue, you may need to toggle 2-3 times to reproduce this issue.\r\n\r\nThanks\r\nKuldeep"}, {"time":"2013-02-18T09:55:51.071724-08:00", "updatedBy":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Please note that it looks like a intermittent issue, you may need to toggle 2-3 times to reproduce this issue.\r\n\r\nThanks\r\nKuldeep"}, {"time":"2013-02-21T21:01:14.295047-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"I tried it about 10  times and have not been able to reproduce this issue. \r\n\r\nMegha,\r\n\r\nCan you see if you can reproduce this? Thanks"}, {"time":"2013-02-22T01:00:44.054512-08:00", "updatedBy":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"It seems to be a windows build issue. Please find the attached video and let me know if I am doing something wrong.\r\n\r\nThanks\r\nKuldeep"}, {"time":"2013-02-22T10:28:06.147579-08:00", "updatedBy":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Removing REGR prefix as this does not seem to be a regression. This issue is intermittent and seems to be dependent on the performance of the machine. \r\n\r\nThe GUI regression machines we have for 7.0 are far less performant than 6.0 machines. Thats the reason we are not seeing this issue on 6.0. \r\n\r\nMoving it to 7.0-EA2.  "}, {"time":"2013-02-22T10:28:06.147579-08:00", "updatedBy":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "change":{"tofixin":{"from":"7.0-ea1", "to":"7.0-ea2"}}, "files":[], "show":true}, {"time":"2013-03-23T18:10:46.547389-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Waiting for guidance from Chris"}, {"time":"2013-03-23T18:41:54.359838-07:00", "updatedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "change":{}, "files":[], "show":true, "comment":"It seems to me the problem is that since it is a cold config change with a restart,\r\nit should be redirecting through wait-server-restart.xqy llike the it does\r\neverywhere else after cold config changes.\r\n"}, {"time":"2013-03-23T23:19:28.572478-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Chris, it is not clear to me. \r\n\r\nI will get with Haitao or Jane on Monday to figure this out. It seems like we call save-configuration($config) in lots the places (dbrep, tieredstorage, upgrade,  rest bootstrap util etc.) when we  need to save the configuration information and need a restart. \r\n\r\nThis is what we call when fips enabled flag is changed (edit-local-cluster-go.xqy). \r\n\r\nI also see restart logic/functions in session.xqy. I will understand more from Haitao about the fix."}, {"time":"2013-04-19T13:44:43.628013-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"tofixin":{"from":"7.0-ea2", "to":"7.0-ea3"}}, "files":[], "show":true}, {"time":"2013-06-14T18:56:06.963254-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"This is a timing issue and not reproducible all the time and given the number if critical defects, no sure if this ka must for 7.0-ea3. I have not been able to reproduce this in 20 tries on my machine.\r\n\r\nMegha, \r\n\r\nCan this be moved to 7.0-1."}, {"time":"2013-06-17T21:15:00.340556-07:00", "updatedBy":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"I am moving this to 7.0-1"}, {"time":"2013-06-17T21:15:00.340556-07:00", "updatedBy":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "change":{"tofixin":{"from":"7.0-ea3", "to":"7.0-1"}}, "files":[], "show":true}, {"time":"2013-08-06T22:19:24.659912-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"148526", "paths":["xdmp/trunk/src/Admin/lib/session.xqy", "xdmp/trunk/src/Admin/lib/admin-forms.xqy", "xdmp/trunk/src/Admin/lib/cluster-admin-form.xqy"], "affectedBugs":[]}, "comment":"Bug:20820 -  Toggling Fips setting restarts the server but not in a clean way"}, {"time":"2013-08-06T22:20:19.280713-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"148527", "paths":["xdmp/trunk/src/Admin/edit-local-cluster-go.xqy"], "affectedBugs":[]}, "comment":"Bug:20820 -  Toggling Fips setting restarts the server but not in a clean way"}, {"time":"2013-08-06T22:21:36.951914-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-08-08T14:22:19.857-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-08-22T01:15:44.373519-07:00", "updatedBy":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Hi Megha, \r\n\r\nThis is now working fine on my local machine but still seeing this issue on windows regression machines as they are VMs and having performance issue. \r\n\r\nPlease let me know if I need to update the test and put a refresh window there.\r\n\r\nThanks\r\nKuldeep"}, {"time":"2013-08-26T01:59:40.627346-07:00", "updatedBy":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Please ignore my previous comment as I could still reproduce this issue, here are the steps\r\n\r\n1. Install a fresh build on windows.\r\n2. Go to Clusters in Admin UI\r\n3. Toggle 'ssl fips enabled' value and click on Ok\r\n4. Do the 3rd step 2-3 times.\r\n\r\nPlease note that it gives 503 error page and user have to refresh the browser to be back on Admin UI page.\r\n\r\nThanks\r\nKuldeep\r\n\r\n\r\n "}, {"time":"2013-08-26T01:59:40.627346-07:00", "updatedBy":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "change":{"assignTo":{"from":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "to":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-09-03T15:36:55.210994-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"status":{"from":"", "to":"Verify"}, "assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-10-01T16:09:03.550749-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Brian,\r\n\r\nI can talk to you about the attempts I have made to fix this. Let us talk when you are ready t handle this. Not a MUST-FIX for 7.0-1"}, {"time":"2013-10-01T16:09:03.550749-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-12-03T14:56:45.132055-08:00", "updatedBy":{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}, "change":{"assignTo":{"from":{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}, "to":{"username":"dgorbet", "name":"David Gorbet", "email":"David.Gorbet@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-12-17T16:10:10.95614-08:00", "updatedBy":{"username":"dgorbet", "name":"David Gorbet", "email":"David.Gorbet@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Wayne, whoever did FIPS should probably take a look at this. Was that someone on your team? Thx."}, {"time":"2013-12-17T16:10:10.95614-08:00", "updatedBy":{"username":"dgorbet", "name":"David Gorbet", "email":"David.Gorbet@marklogic.com"}, "change":{"assignTo":{"from":{"username":"dgorbet", "name":"David Gorbet", "email":"David.Gorbet@marklogic.com"}, "to":{"username":"wfeick", "name":"Wayne Feick", "email":"wfeick@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-12-18T14:11:29.854728-08:00", "updatedBy":{"username":"wfeick", "name":"Wayne Feick", "email":"wfeick@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"It was Chonghai. This is a pretty rare thing to do, so I'll likely slip it out of 7.0-2. I'd be happy not fixing it at all prior to 8."}, {"time":"2014-02-18T12:55:45.945706-08:00", "updatedBy":{"username":"wfeick", "name":"Wayne Feick", "email":"wfeick@marklogic.com"}, "change":{"assignTo":{"from":{"username":"wfeick", "name":"Wayne Feick", "email":"wfeick@marklogic.com"}, "to":{"username":"atsoi", "name":"Arthur Tsoi", "email":"arthur.tsoi@marklogic.com"}}}, "files":[], "show":true}, {"time":"2014-08-29T14:06:28.847087-07:00", "updatedBy":{"username":"atsoi", "name":"Arthur Tsoi", "email":"arthur.tsoi@marklogic.com"}, "change":{"tofixin":{"from":"7.0-4", "to":"7.0-5"}}, "files":[], "show":true}, {"time":"2014-12-02T15:27:51.782489-08:00", "updatedBy":{"username":"atsoi", "name":"Arthur Tsoi", "email":"arthur.tsoi@marklogic.com"}, "change":{"status":{"from":"Verify", "to":"Will not fix"}, "assignTo":{"from":{"username":"atsoi", "name":"Arthur Tsoi", "email":"arthur.tsoi@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"too minor to fix."}], "updatedAt":"2014-12-02T15:27:51.782489-08:00", "fixedAt":"2013-08-08T14:22:19.857-07:00", "fixedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "renderDescriptionAs":"normal"}