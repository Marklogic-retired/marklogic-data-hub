{"id":2056, "kind":"Bug", "createdAt":"2005-08-03T15:21:40.871339-07:00", "status":"Closed", "title":"matching result from near-query(q1,q2)  all have same score if q1 is element-value-query ", "category":"search", "severity":"Major", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"rwang", "name":"Rachel Link", "email":"rwang@cerisent.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"Load shakespeare documents with SPEECH,SCENE,ACT as fragment root, word search, stem search, three character searched and word-position are on. \ndo following query : \n\nfor $a in \ncts:search(//SPEECH,cts:near-query((cts:element-word-query(xs:QName(\"SPEAKER\"),\"HORATIO\"),cts:element-query(xs:QName(\"LINE\"),cts:and-query((\"the\",\"and\")))),15))\nreturn (cts:score($a),$a)\n\nthe score for matching results are 26, 24,23,23 \n\nbut if I change element-word-query to element-value-query, they all get the same score 27. I didn't change the database settings while doing the second query. \n", "samplequery":"", "sampledata":"", "version":"3.0-2", "tofixin":"3.0-3", "fixedin":"3.0-3", "platform":"linux", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"rwang", "name":"Rachel Link", "email":"rwang@cerisent.com"}], "attachments":[], "clones":[], "cloneOf":"", "support":{"headline":"cts:near-query() scores incorrect for queries involving cts:element-value-query()", "supportDescription":"If a cts:near-query() clause involves a cts:element-value-query(), the relevance scores returned from that clause will be incorrect.", "publishStatus":"Publish", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["search", "rwang"], "changeHistory":[{"time":"2005-08-03T17:55:57.920104-07:00", "updatedBy":{"username":"hui", "name":"Hui Li", "email":"hui.li@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Can you add your database settings (index options) in the bug description?\nThanks"}, {"time":"2005-08-03T22:20:18.598766-07:00", "updatedBy":{"username":"rwang", "name":"Rachel Link", "email":"rwang@cerisent.com"}, "change":{}, "files":[], "show":true, "comment":"Please read the bug description. I described database setting I have already. "}, {"time":"2005-08-10T15:27:26.023265-07:00", "updatedBy":{"username":"ian", "name":"Ian Small", "email":"ian@cerisent.com"}, "change":{"status":{"from":"", "to":"Verify"}, "assignTo":{"from":{"username":"ian", "name":"Ian Small", "email":"ian@cerisent.com"}, "to":{"username":"hui", "name":"Hui Li", "email":"hui.li@marklogic.com"}}}, "files":[], "show":true, "comment":"hui, if you cannot reproduce, please huddle with rachel to see what's different about your environments"}, {"time":"2005-08-24T13:36:23.326855-07:00", "updatedBy":{"username":"hui", "name":"Hui Li", "email":"hui.li@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"hui", "name":"Hui Li", "email":"hui.li@marklogic.com"}, "to":{"username":"rwang", "name":"Rachel Link", "email":"rwang@cerisent.com"}}}, "files":[], "show":true, "comment":"I ran the same query.\nthe scores changed from 26,24,23,23 to 30,27,27,27 when element-word-query  was changed to element-value-query"}, {"time":"2005-08-26T12:24:01.547755-07:00", "updatedBy":{"username":"rwang", "name":"Rachel Link", "email":"rwang@cerisent.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"rwang", "name":"Rachel Link", "email":"rwang@cerisent.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"verified on build 0826. "}], "updatedAt":"2005-08-26T12:24:01.547755-07:00", "fixedAt":"2005-08-24T13:36:23.326855-07:00", "fixedBy":{"username":"hui", "name":"Hui Li", "email":"hui.li@marklogic.com"}, "shippedAt":"2005-08-26T12:24:01.547755-07:00", "shippedBy":{"username":"rwang", "name":"Rachel Link", "email":"rwang@cerisent.com"}, "renderDescriptionAs":"normal"}