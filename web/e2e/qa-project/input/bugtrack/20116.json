{"id":20116, "kind":"Bug", "createdAt":"2012-11-19T12:00:21.748718-08:00", "status":"Will not fix", "title":"Multipart encoding is adding a content-length element even through there is one declared by the user in manifest ", "category":"", "severity":"Minor", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"skottam", "name":"Sravan Kottam", "email":"Sravan.Kottam@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"\r\nRun the following query in the qconsole\r\n\r\n  xquery version \"1.0-ml\";\r\n        let $x:=xdmp:document-get(\"QA_HOME/testdata/foo.xml\")\r\n        let $y:= xdmp:document-get(\"QA_HOME/app/NFC.xsl\")\r\n        let $z:=text{xdmp:to-json((\"a\",fn:false()))}\r\n        let $boundary-string:=\"gc0p4Jq0M2Yt08jU534c0p\"\r\n        let $mpe:= xdmp:multipart-encode(\r\n                $boundary-string,\r\n                <manifest><part><headers>\r\n                                <Content-Type>xml</Content-Type>\r\n                                <boundary>gc0p4Jq0M2Yt08jU534c0p</boundary>\r\n                                </headers>\r\n                          </part>\r\n                         <part><headers>\r\n                                <Content-Type>xsl</Content-Type>\r\n                                <Content-Length>329</Content-Length>\r\n                                </headers>\r\n                        </part><part/>\r\n                </manifest>,\r\n                ($x,$y,$z)\r\n                )\r\nreturn\r\n   $mpe\r\n\r\nActual:\r\n\r\nEven though you defined the Content-Length in the <headers> element of the multiple parts, multipart-encoding  api is again adding Content-Length element to headers so you see 2 Content-Length elements under <headers>.\r\n\r\nExpected:\r\n\r\nShould avoid or over write the Content-Length element.\r\n", "samplequery":"", "sampledata":"", "version":"6.0-nightly", "tofixin":"N/A", "fixedin":"N/A", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"skottam", "name":"Sravan Kottam", "email":"Sravan.Kottam@marklogic.com"}, {"username":"wfeick", "name":"Wayne Feick", "email":"wfeick@marklogic.com"}, {"username":"hwu", "name":"Haitao Wu", "email":"haitao.wu@marklogic.com"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[22891], "cloneOf":"", "support":{"headline":"", "supportDescription":"", "publishStatus":"Not Ready", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["", "skottam"], "changeHistory":[{"time":"2012-11-19T12:00:21.748718-08:00", "updatedBy":{"username":"skottam", "name":"Sravan Kottam", "email":"Sravan.Kottam@marklogic.com"}, "change":{"assignTo":{"from":{"username":"skottam", "name":"Sravan Kottam", "email":"Sravan.Kottam@marklogic.com"}, "to":{"username":"wfeick", "name":"Wayne Feick", "email":"wfeick@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-21T13:51:50.93394-08:00", "updatedBy":{"username":"wfeick", "name":"Wayne Feick", "email":"wfeick@marklogic.com"}, "change":{"assignTo":{"from":{"username":"wfeick", "name":"Wayne Feick", "email":"wfeick@marklogic.com"}, "to":{"username":"hwu", "name":"Haitao Wu", "email":"haitao.wu@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-28T11:38:16.899002-08:00", "updatedBy":{"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}, "change":{"tofixin":{"from":"6.0-3", "to":"6.0-4"}}, "files":[], "show":true}, {"time":"2013-05-22T12:26:25.498267-07:00", "updatedBy":{"username":"hwu", "name":"Haitao Wu", "email":"haitao.wu@marklogic.com"}, "change":{"tofixin":{"from":"6.0-4", "to":"6.0-5"}}, "files":[], "show":true}, {"time":"2014-02-19T10:37:09.130496-08:00", "updatedBy":{"username":"hwu", "name":"Haitao Wu", "email":"haitao.wu@marklogic.com"}, "change":{"tofixin":{"from":"6.0-5", "to":"6.0-6"}}, "files":[], "show":true}, {"time":"2015-05-27T21:01:32.017129-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"status":{"from":"Verify", "to":"Will not fix"}, "assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"Not requested by support"}, {"time":"2015-05-27T21:01:32.017129-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}], "updatedAt":"2015-05-27T21:01:32.017129-07:00", "renderDescriptionAs":"normal"}