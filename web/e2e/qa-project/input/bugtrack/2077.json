{"id":2077, "kind":"Bug", "createdAt":"2005-08-11T16:42:21.281719-07:00", "status":"Closed", "title":"XDMP-FORESTNOT during restore", "category":"xdmp", "severity":"Major", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"denise", "name":"Denise Miura", "email":"denise.skarupski@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"introduced with the \"mandatory fix\" in 2.2-7.2, 2.2-8 and 3.0-2, during a restore a forest can become unavailable:\n\n2005-08-04 11:05:02 Debug: ~OnDiskStand /var/opt/MARKcis/RestoredForests/MainFrstA3/0000558b\n\n2005-08-04 11:05:02 Debug: ~Forest 9778788764863608679 MainFrstA3 /var/opt/MARKcis/RestoredForests/MainFrstA3\n\n2005-08-04 11:05:04 Alert: Forest::checkpoint: XDMP-FORESTNOT: Forest MainFrstA3 not available: state='finishClosing'\n\n2005-08-04 11:05:04 Debug: ~OnDiskStand /var/opt/MARKcis/Forests/MainFrstA3/00005571\n\n2005-08-04 11:05:06 Info: Completed restore of forest MainFrstA3\n\n2005-08-04 11:05:07 Debug: OnDiskStand /var/opt/MARKcis/Forests/MainFrstA3/0000558b\n\n2005-08-04 11:05:07 Debug: MainFrstA3 starting redo recovery from checkpointToken {fsn=0x4e63db, off=175839336}\n\n2005-08-04 11:05:07 Debug: MainFrstA3 finished redo recovery of 0 record(s) at recoveryToken {fsn=0x4e63db, off=175839336}\n\n2005-08-04 11:05:07 Debug: MainFrstA3 starting undo recovery at endTimestamp 18446744073709551615\n\n2005-08-04 11:05:08 Debug: MainFrstA3 finished undo recovery at endTimestamp 1172504620\n\n2005-08-04 11:05:50 Debug: OnDiskStand /var/opt/MARKcis/RestoredForests/MainFrstA2/00005528\n\n2005-08-04 11:05:50 Debug: MainFrstA2 starting redo recovery from checkpointToken {fsn=0x4eda9e, off=258954668}\n\n2005-08-04 11:05:50 Debug: MainFrstA2 finished redo recovery of 0 record(s) at recoveryToken {fsn=0x4eda9e, off=258954668}\n\n2005-08-04 11:05:51 Debug: MainFrstA2 starting undo recovery at endTimestamp 18446744073709551615\n\n2005-08-04 11:05:52 Debug: MainFrstA2 finished undo recovery at endTimestamp 1172504622\n\n2005-08-04 11:05:55 Debug: ~OnDiskStand /var/opt/MARKcis/RestoredForests/MainFrstA2/00005528\n\n2005-08-04 11:06:00 Debug: ~Forest 5042242381869001333 MainFrstA2 /var/opt/MARKcis/RestoredForests/MainFrstA2\n\n2005-08-04 11:06:04 Alert: Forest::checkpoint: XDMP-FORESTNOT: Forest MainFrstA2 not available: state='finishClosing'\n\n2005-08-04 11:06:07 Debug: OnDiskStand /var/opt/MARKcis/RestoredForests/MainFrstA1/00007e72\n\n2005-08-04 11:06:07 Debug: ~OnDiskStand /var/opt/MARKcis/Forests/MainFrstA2/0000550c\n\n2005-08-04 11:06:07 Debug: MainFrstA1 starting redo recovery from checkpointToken {fsn=0x513d9a, off=973151088}\n\n2005-08-04 11:06:07 Debug: MainFrstA1 finished redo recovery of 0 record(s) at recoveryToken {fsn=0x513d9a, off=973151088}\n\n2005-08-04 11:06:08 Debug: MainFrstA1 starting undo recovery at endTimestamp 18446744073709551615\n\n2005-08-04 11:06:09 Info: Completed restore of forest MainFrstA2\n\n2005-08-04 11:06:09 Debug: OnDiskStand /var/opt/MARKcis/Forests/MainFrstA2/00005528\n\n2005-08-04 11:06:09 Debug: MainFrstA2 starting redo recovery from checkpointToken {fsn=0x4eda9e, off=258954668}\n\n2005-08-04 11:06:09 Debug: MainFrstA2 finished redo recovery of 0 record(s) at recoveryToken {fsn=0x4eda9e, off=258954668}\n\n2005-08-04 11:06:09 Debug: MainFrstA2 starting undo recovery at endTimestamp 18446744073709551615\n\n2005-08-04 11:06:09 Debug: MainFrstA1 finished undo recovery at endTimestamp 1172504618\n\n2005-08-04 11:06:10 Debug: MainFrstA2 finished undo recovery at endTimestamp 1172504622\n\n2005-08-04 11:06:11 Debug: ~OnDiskStand /var/opt/MARKcis/RestoredForests/MainFrstA1/00007e72\n\n2005-08-04 11:06:11 Debug: ~Forest 8827710168150126594 MainFrstA1 /var/opt/MARKcis/RestoredForests/MainFrstA1\n\n2005-08-04 11:06:12 Alert: Forest::checkpoint: XDMP-FORESTNOT: Forest MainFrstA1 not available: state='finishClosing'\n\n2005-08-04 11:06:12 Debug: ~OnDiskStand /var/opt/MARKcis/Forests/MainFrstA1/00007e59\n\n2005-08-04 11:06:14 Info: Completed restore of forest MainFrstA1\n\n", "samplequery":"", "sampledata":"", "version":"2.2-8", "tofixin":"2.2-9", "fixedin":"2.2-9", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"denise", "name":"Denise Miura", "email":"denise.skarupski@marklogic.com"}], "attachments":[], "clones":[], "cloneOf":"", "support":{"headline":"XDMP-FORESTNOT error during restore", "supportDescription":"While a forest restore is in progress, the forest itself may be come unavailable. An error message of XDMP-FORESTNOT will be thrown. ", "publishStatus":"Publish", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["xdmp", "denise"], "changeHistory":[{"time":"2005-08-11T17:50:14.669732-07:00", "updatedBy":{"username":"ian", "name":"Ian Small", "email":"ian@cerisent.com"}, "change":{"status":{"from":"", "to":"Fix"}, "assignTo":{"from":{"username":"ian", "name":"Ian Small", "email":"ian@cerisent.com"}, "to":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}}}, "files":[], "show":true, "comment":"fix on 2.2-9 and presumably 2.2-7-something."}, {"time":"2005-08-14T13:59:33.840141-07:00", "updatedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "to":{"username":"rwang", "name":"Rachel Link", "email":"rwang@cerisent.com"}}}, "files":[], "show":true, "comment":"Fixed in 2.2-20050815\nBug does not exist in 3.0 or 3.1."}, {"time":"2005-08-16T10:17:39.304188-07:00", "updatedBy":{"username":"rwang", "name":"Rachel Link", "email":"rwang@cerisent.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"rwang", "name":"Rachel Link", "email":"rwang@cerisent.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"verified on 2.2-7-3. "}, {"time":"2007-09-07T11:36:46.106743-07:00", "updatedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "change":{"status":{"from":"", "to":"Closed"}, "assignTo":{"from":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"2.2 eol"}], "updatedAt":"2007-09-07T11:36:46.106743-07:00", "fixedAt":"2005-08-14T13:59:33.840141-07:00", "fixedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "shippedAt":"2005-08-16T10:17:39.304188-07:00", "shippedBy":{"username":"rwang", "name":"Rachel Link", "email":"rwang@cerisent.com"}, "closedAt":"2007-09-07T11:36:46.106743-07:00", "closedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "renderDescriptionAs":"normal"}