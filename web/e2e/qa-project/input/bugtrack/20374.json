{"id":20374, "kind":"Bug", "createdAt":"2013-01-03T13:07:21.697305-08:00", "status":"Closed", "title":"Word query with 2 words and min-occurs > 1 may lead to false negatives in index resolution", "category":"search", "severity":"Major", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"This comes from bug:20230\r\n\r\nTest case: should return true, 1\r\n\r\nxdmp:document-insert(\"dogs.xml\",<x>dog and cat and dog and dog</x>)\r\n;\r\ncts:contains(doc(\"dogs.xml\"), cts:word-query((\"dog\",\"cat\"),\"min-occurs=4\"))\r\n,\r\nxdmp:estimate(cts:search(doc(\"dogs.xml\"), cts:word-query((\"dog\",\"cat\"),\"min-occurs=4\")))\r\n", "samplequery":"", "sampledata":"", "version":"7.0-nightly", "tofixin":"7.0-ea1", "fixedin":"7.0-ea1", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, {"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}, {"username":"msrinivasan", "name":"Mahalakshmi Srinivasan", "email":"mahalakshmi.srinivasan@marklogic.com"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[], "cloneOf":20372, "support":{"headline":"A word query with 2 words and min-occurs > 1 may lead to false negatives in index resolution", "supportDescription":"For example, the following query should return 1, but it returns 0.\r\nxdmp:document-insert(\"dogs.xml\",<x>dog and cat and dog and dog</x>) \r\n; \r\nxdmp:estimate(cts:search(doc(\"dogs.xml\"), cts:word-query((\"dog\",\"cat\"),\"min-occurs=4\")))", "publishStatus":"Prepare", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":"Add a third word you know will never match to the word query:\r\nxdmp:estimate(cts:search(doc(\"dogs.xml\"), cts:word-query((\"dog\",\"cat\",\"nosuchwordever\"), \"min-occurs=4\")))"}, "tags":["search", "mary"], "changeHistory":[{"time":"2013-01-03T13:07:21.697305-08:00", "updatedBy":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "change":{"assignTo":{"from":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "to":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}}}, "files":[], "show":true}, {"time":"2013-01-03T13:15:07.06039-08:00", "updatedBy":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "change":{"tofixin":{"from":"", "to":"7.0-ea1"}}, "files":[], "show":true}, {"time":"2013-01-03T14:03:39.263041-08:00", "updatedBy":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"126396", "paths":["xdmp/trunk/src/Query.cpp", "xdmp/trunk/src/SearchBuiltins.cpp"], "affectedBugs":[]}, "comment":"Bug:20374 false negatives on queries with 2 branches and min-occurs>1"}, {"time":"2013-01-03T14:04:03.023535-08:00", "updatedBy":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "to":{"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}}}, "files":[], "show":true, "comment":"Fixed 7.0-20130104"}, {"time":"2013-01-03T14:04:03.023535-08:00", "updatedBy":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "change":{"assignTo":{"from":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "to":{"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-03-02T10:43:29.224216-08:00", "updatedBy":{"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}, "change":{"assignTo":{"from":{"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}, "to":{"username":"msrinivasan", "name":"Mahalakshmi Srinivasan", "email":"mahalakshmi.srinivasan@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-03-04T13:49:57.042456-08:00", "updatedBy":{"username":"msrinivasan", "name":"Mahalakshmi Srinivasan", "email":"mahalakshmi.srinivasan@marklogic.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"msrinivasan", "name":"Mahalakshmi Srinivasan", "email":"mahalakshmi.srinivasan@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"Verified on build 7.0-ea1_20130227"}], "updatedAt":"2013-03-04T13:49:57.042456-08:00", "fixedAt":"2013-01-03T14:04:03.023535-08:00", "fixedBy":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "shippedAt":"2013-03-04T13:49:57.042456-08:00", "shippedBy":{"username":"msrinivasan", "name":"Mahalakshmi Srinivasan", "email":"mahalakshmi.srinivasan@marklogic.com"}, "renderDescriptionAs":"normal"}