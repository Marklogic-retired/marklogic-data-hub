{"id":20112, "kind":"Bug", "createdAt":"2012-11-19T07:04:37.323844-08:00", "status":"Closed", "title":"Incorrect stem in Japanese language", "category":"xdmp", "severity":"Major", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"kmccaleb", "name":"Ken McCaleb", "email":"Ken.McCaleb@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"Searching for \"いびき\" (which is noun form of \"snore\" in English) returns stemmed results of \"いる\" which is the verb \"to be\".\r\nThis is clearly an incorrect stem.  Our new JMDC customer in Japan is using this search term for their medical database and needs a fix.   ", "samplequery":"let $x := <el xml:lang=\"ja\">\r\n            <a>いびきをかく人は,</a>\r\n            <b>いるのでしょうか。</b>\r\n          </el>\r\nreturn\r\n$x/b[cts:contains(., cts:word-query(\"いびき\", (\"stemmed\", \"lang=ja\")))]\r\n\r\nYou can also run the following query against any existing content source and it will return \"いる\".\r\n\r\n     cts:stem(\"いびき\", \"ja\")\r\n\r\n", "sampledata":"", "version":"6.0-1", "tofixin":"6.0-3", "fixedin":"N/A", "platform":"OS X", "memory":"8GB", "processors":"", "note":"", "subscribers":[{"username":"kmccaleb", "name":"Ken McCaleb", "email":"Ken.McCaleb@marklogic.com"}, {"username":"cbiow", "name":"Christopher Biow", "email":"chris.biow@marklogic.com"}, {"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}, {"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[], "cloneOf":"", "support":{"headline":"", "supportDescription":"", "publishStatus":"Not Ready", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["xdmp", "kmccaleb"], "changeHistory":[{"time":"2012-11-19T09:15:06.809989-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}}}, "files":[], "show":true}, {"time":"2012-11-19T09:15:06.809989-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"tofixin":{"from":"", "to":"6.0-3"}}, "files":[], "show":true}, {"time":"2012-11-19T09:15:24.103035-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"status":{"from":"", "to":"Verify"}, "assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}}}, "files":[], "show":true}, {"time":"2012-11-19T09:18:35.598309-08:00", "updatedBy":{"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}, "change":{"assignTo":{"from":{"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}, "to":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}}}, "files":[], "show":true}, {"time":"2012-11-19T11:35:43.29462-08:00", "updatedBy":{"username":"denise", "name":"Denise Miura", "email":"denise.skarupski@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"we do not know what the breadth of this issue is yet--so far the customer has only found this one example. i'm interested to know if investigating the root cause shed's any light on how broad the problem is, so we can prioritize accordingly. "}, {"time":"2012-11-20T15:51:00.886601-08:00", "updatedBy":{"username":"denise", "name":"Denise Miura", "email":"denise.skarupski@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"ok, it turns out these issues are found only when using hiragana (ie phonetic) spelling for the words in question, not kanji. so it's at least similar to, if not the same as, bug 16059 which we needed to handle with custom dictionaries. mary--what do you think? fwiw, we consistently survey folks in japan on whether they have a better suggestion than inxight for tokenization/stemming and haven't heard of a single alternative so far. i wonder if basis has improved or if inxight is still the best. "}, {"time":"2012-11-20T18:20:09.185594-08:00", "updatedBy":{"username":"denise", "name":"Denise Miura", "email":"denise.skarupski@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"ok, this is actually similar but different than 16059 if i understand the latest conversation here correctly. unlike that case, \"ibiki\" doesn't have a kanji equivalent. it is a noun that can only be spelled in hiragana. So stemming shouldn't be coming into play at all. "}, {"time":"2012-11-21T07:31:10.754375-08:00", "updatedBy":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "change":{}, "files":[], "show":true, "comment":"I think this is a case for custom dictionaries or for using unstemmed search. Stemming is about improving recall, but there is a tradeoff with precision. If you care about precision, don't use stemming. OTOH, my understanding is that Japanese is highly inflecting, so you probably want the extra recall from stemming."}, {"time":"2012-11-21T08:25:28.73236-08:00", "updatedBy":{"username":"kmccaleb", "name":"Ken McCaleb", "email":"Ken.McCaleb@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Japanese is non-inflecting. The issue we are seeing is that there are incorrect stems defined for certain words.  There is likely an algorithmic reason that inxight can explain.   For now we can deal with it case-by-case with the custom dictionary and unstemmed searches.  For JMDC, unstemmed search could be the default setting. \r\n\r\nOnce we have customers who need complex analytics tools (i.e. human intelligence, social media analytics, etc.) this stemming error will become a larger concern."}, {"time":"2012-11-21T09:37:26.154692-08:00", "updatedBy":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "change":{}, "files":[], "show":true, "comment":"Japanese does not inflect nouns, but it has a very complex and productive system of verb forms."}, {"time":"2013-02-01T10:26:49.244447-08:00", "updatedBy":{"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}, "change":{"status":{"from":"", "to":"External"}, "assignTo":{"from":{"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}, "to":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}}}, "files":[], "show":true}, {"time":"2013-02-15T14:20:42.005332-08:00", "updatedBy":{"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Hi Ken,\r\nWe are triaging 6.0-3 bugs.  Mary suggested that you can use custom dictionary to solve this issue.  If you agree, then we can close this bug.  Thanks."}, {"time":"2013-02-15T14:20:42.005332-08:00", "updatedBy":{"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}, "change":{"assignTo":{"from":{"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}, "to":{"username":"kmccaleb", "name":"Ken McCaleb", "email":"Ken.McCaleb@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-03-15T13:17:27.231478-07:00", "updatedBy":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"not a bug"}, {"time":"2013-03-15T13:17:27.231478-07:00", "updatedBy":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "change":{"status":{"from":"", "to":"Closed"}, "assignTo":{"from":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}], "updatedAt":"2013-03-15T13:17:27.231478-07:00", "closedAt":"2013-03-15T13:17:27.231478-07:00", "closedBy":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "renderDescriptionAs":"normal", "renderSampleQueryAs":"normal"}