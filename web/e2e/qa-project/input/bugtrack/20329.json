{"id":20329, "kind":"Bug", "createdAt":"2012-12-24T07:03:29.757051-08:00", "status":"Closed", "title":"getting invalid node in validate strict", "category":"xdmp", "severity":"Major", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"iagrawal", "name":"Isha Agrawal", "email":"iagrawal@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"getting invalid node in validate strict\r\n\r\nTest name:bug15397.xml\r\nMachine name:rh6-intel64-70-test-1\r\npath to Logs: /space/builder/builds/linux64/HEAD/logs.20121223.0/reg-results\r\nPath to results:/space/builder/builds/linux64/HEAD/logs.20121223.0/reg-results/results/bug15397.xml\r\n\r\nXquery:\r\n\r\nxquery version \"1.0-ml\";\r\n\timport module namespace admin = \"http://marklogic.com/xdmp/admin\"\r\n\t\tat \"/MarkLogic/admin.xqy\";\r\n\tdeclare namespace db = \"http://marklogic.com/xdmp/database\";\r\n\r\n\tlet $config := admin:get-configuration()\r\n\tlet $dbid := xdmp:database(\"Documents\")\r\n\tlet $mergespec := validate { admin:database-one-time-merge-blackout(500, \"lower\",\r\n\txs:dateTime(\"2008-02-14T09:45:00\"), (), xs:dayTimeDuration(\"PT3H\") ) }\r\n\tlet $config := admin:database-add-merge-blackout($config, $dbid, $mergespec)\r\n\treturn (validate strict { $config/* })//db:period\r\n\t\r\nTrace seen in ErrorLog.txt:\r\n2012-12-20 23:19:43.304 Notice: QAxdbcServer: XDMP-VALIDATEUNEXPECTED: (err:XQDY0027) validate strict { <databases xsi:schemaLocation=\"http://marklogic.com/xdmp/database database.xsd\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://marklogic.com/xdmp/database\"><database><database-id>16216864484349831536</database-id><databa...</databases> } -- Invalid node: Found db:include-root but expected (db:field-root&db:stemmed-searches?&db:word-searches?&db:field-value-searches?&db:field-value-positions?&db:fast-phrase-searches?&db:fast-case-sensitive-searches?&db:fast-diacritic-sensitive-searches?&db:trailing-wildcard-searches?&db:trailing-wildcard-word-positions?&db:three-character-searches?&db:three-character-word-positions?&db:two-character-searches?&db:one-character-searches?&db:word-lexicons?&db:included-elements?&db:excluded-elements?) at /configuration/db:databases/db:database[10]/db:fields/db:field/db:include-root using schema \"database.xsd\"\r\n\t\r\nActual Result: Invalid node\r\nExpected Result: \r\n<period xmlns=\"http://marklogic.com/xdmp/database\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\r\n  <start-date>2008-02-14</start-date>\r\n  <start-time>09:45:00</start-time>\r\n  <duration>PT3H</duration>\r\n</period>", "samplequery":"", "sampledata":"", "version":"7.0-nightly", "tofixin":"7.0-ea1", "fixedin":"7.0-ea1", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"iagrawal", "name":"Isha Agrawal", "email":"iagrawal@marklogic.com"}, {"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, {"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}, {"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[], "cloneOf":"", "support":{"headline":"", "supportDescription":"", "publishStatus":"Not Ready", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["xdmp", "iagrawal"], "changeHistory":[{"time":"2012-12-24T07:03:29.757051-08:00", "updatedBy":{"username":"iagrawal", "name":"Isha Agrawal", "email":"iagrawal@marklogic.com"}, "change":{"assignTo":{"from":{"username":"iagrawal", "name":"Isha Agrawal", "email":"iagrawal@marklogic.com"}, "to":{"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}}}, "files":[], "show":true}, {"time":"2012-12-25T23:06:36.525003-08:00", "updatedBy":{"username":"iagrawal", "name":"Isha Agrawal", "email":"iagrawal@marklogic.com"}, "change":{"tofixin":{"from":"", "to":"7.0-ea1"}}, "files":[], "show":true}, {"time":"2013-01-02T15:05:19.974301-08:00", "updatedBy":{"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}, "change":{"assignTo":{"from":{"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}, "to":{"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-15T03:03:05.429148-08:00", "updatedBy":{"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Looks like it might be Gajanan's."}, {"time":"2013-02-15T03:03:05.429148-08:00", "updatedBy":{"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}, "change":{"assignTo":{"from":{"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}, "to":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-15T04:25:32.447753-08:00", "updatedBy":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "to":{"username":"iagrawal", "name":"Isha Agrawal", "email":"iagrawal@marklogic.com"}}}, "files":[], "show":true, "comment":"This must have gone now."}, {"time":"2013-02-15T04:25:32.447753-08:00", "updatedBy":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "to":{"username":"iagrawal", "name":"Isha Agrawal", "email":"iagrawal@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-20T03:16:38.936448-08:00", "updatedBy":{"username":"iagrawal", "name":"Isha Agrawal", "email":"iagrawal@marklogic.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"iagrawal", "name":"Isha Agrawal", "email":"iagrawal@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"Verified on ML version 20130219. The test bug15397.xml is passing on 7.0 now,hence shipping the bug."}, {"time":"2013-02-20T03:16:38.936448-08:00", "updatedBy":{"username":"iagrawal", "name":"Isha Agrawal", "email":"iagrawal@marklogic.com"}, "change":{"assignTo":{"from":{"username":"iagrawal", "name":"Isha Agrawal", "email":"iagrawal@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}], "updatedAt":"2013-02-20T03:16:38.936448-08:00", "fixedAt":"2013-02-15T04:25:32.447753-08:00", "fixedBy":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "shippedAt":"2013-02-20T03:16:38.936448-08:00", "shippedBy":{"username":"iagrawal", "name":"Isha Agrawal", "email":"iagrawal@marklogic.com"}, "renderDescriptionAs":"normal"}