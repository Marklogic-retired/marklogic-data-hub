{"id":20588, "kind":"Bug", "createdAt":"2012-12-13T15:04:56.943034-08:00", "status":"Closed", "title":"Incorrect declaration of function/@apply in rest.xsd causes runtime error", "category":"MarkLogic REST API", "severity":"Minor", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"The @apply attribute should be xsd:Name, not xsd:QName.\r\n", "samplequery":"xquery version \"1.0-ml\";\r\n\r\nlet $condition := <function ns=\"http://marklogic.com/markspace\" apply=\"doc-exists\" at=\"/markspace.xqy\" xmlns=\"http://marklogic.com/appservices/rest\"/>\r\nlet $list as xs:string* := ($condition/@apply)\r\nreturn\r\n  $list", "sampledata":"", "version":"5.0-nightly", "tofixin":"5.0-6", "fixedin":"5.0-6", "platform":"all", "memory":"", "processors":"", "note":"I should probably clone this one out to the 5 and 6 branches.", "subscribers":[{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}, {"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, {"username":"wfeick", "name":"Wayne Feick", "email":"wfeick@marklogic.com"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[], "cloneOf":20278, "support":{"headline":"Schema error in REST API could cause user-defined conditions to fail", "supportDescription":"An incorrect declaration in the schema for the http://marklogic.com/appservices/rest namespace could raise an error when user defined condition functions were used.", "publishStatus":"Publish", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["MarkLogic REST API", "nwalsh"], "changeHistory":[{"time":"2012-12-13T15:04:56.943034-08:00", "updatedBy":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}, "change":{"assignTo":{"from":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}, "to":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}}}, "files":[], "show":true}, {"time":"2012-12-14T08:15:30.686928-08:00", "updatedBy":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"124046", "paths":["xdmp/trunk/src/Config/rest.xsd", "xdmp/trunk/src/Apps/test/appservices/utils-unittest/rest-test.xqy", "xdmp/trunk/src/Config/rest.rnc", "xdmp/trunk/src/Apps/test/appservices/utils-unittest/rest-unittest.xqy"], "affectedBugs":[]}, "comment":"Fix bug:20278 by fixing the type of the apply attribute and adding a unit test"}, {"time":"2013-01-03T18:03:34.085615-08:00", "updatedBy":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}, "to":{"username":"wfeick", "name":"Wayne Feick", "email":"wfeick@marklogic.com"}}}, "files":[], "show":true, "comment":"Hi Wayne,\r\n\r\nI fixed this a few weeks ago, but it looks like I forgot to update the bug. You reported it, if the problem looks fixed to you, can you pass it along to Megha?\r\n"}, {"time":"2013-01-03T18:03:34.085615-08:00", "updatedBy":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}, "change":{"assignTo":{"from":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}, "to":{"username":"wfeick", "name":"Wayne Feick", "email":"wfeick@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-24T20:48:42.967963-08:00", "updatedBy":{"username":"wfeick", "name":"Wayne Feick", "email":"wfeick@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"129248", "paths":["xdmp/branches/b6_0/src/Config/rest.rnc", "xdmp/branches/b6_0/src/Apps/test/appservices/utils-unittest/rest-unittest.xqy", "xdmp/branches/b6_0/src/Config/rest.xsd", "xdmp/branches/b6_0/src/Apps/test/appservices/utils-unittest/rest-test.xqy"], "affectedBugs":[]}, "comment":"Fix bug:20278 by fixing the type of the apply attribute and adding a unit test"}, {"time":"2013-01-24T20:50:22.7473-08:00", "updatedBy":{"username":"wfeick", "name":"Wayne Feick", "email":"wfeick@marklogic.com"}, "change":{"assignTo":{"from":{"username":"wfeick", "name":"Wayne Feick", "email":"wfeick@marklogic.com"}, "to":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-25T07:55:29.837466-08:00", "updatedBy":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}, "change":{"status":{"from":"", "to":"Fix"}, "assignTo":{"from":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}, "to":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}}}, "files":[], "show":true, "comment":"Yes, per Wayne's comment on 20585, I think we should fix this in 5.0 as well."}, {"time":"2013-01-25T07:55:29.837466-08:00", "updatedBy":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}, "change":{"assignTo":{"from":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}, "to":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-25T07:55:29.837466-08:00", "updatedBy":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}, "change":{"tofixin":{"from":"", "to":"5.0-6"}}, "files":[], "show":true}, {"time":"2013-07-23T09:13:02.98186-07:00", "updatedBy":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"147398", "paths":["xdmp/branches/b5_0/src/Config/rest.xsd"], "affectedBugs":[]}, "comment":"Fix bug:20588"}, {"time":"2013-07-23T09:13:42.793849-07:00", "updatedBy":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}, "to":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}}}, "files":[], "show":true, "comment":"Tired having this lying around. Fixed."}, {"time":"2013-07-23T09:13:42.793849-07:00", "updatedBy":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}, "change":{"assignTo":{"from":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}, "to":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}}}, "files":[], "show":true}, {"time":"2014-03-13T17:24:02.636063-07:00", "updatedBy":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"You have verified the clones and also have added automated test. So sending this your way so that you can add the same test to 5.0 branch."}, {"time":"2014-03-13T17:24:02.636063-07:00", "updatedBy":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "change":{"assignTo":{"from":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "to":{"username":"vkorolev", "name":"Vitaly Korolev", "email":"vitaly.korolev@marklogic.com"}}}, "files":[], "show":true}, {"time":"2014-03-18T16:42:39.609368-07:00", "updatedBy":{"username":"vkorolev", "name":"Vitaly Korolev", "email":"vitaly.korolev@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"164271", "paths":["qa/branches/b5_0/scripts/tests/bug20588.xml", "qa/branches/b5_0/scripts/keys/bug20588.xml"], "affectedBugs":[]}, "comment":"Adding test for bug:20588"}, {"time":"2014-03-18T16:42:49.554506-07:00", "updatedBy":{"username":"vkorolev", "name":"Vitaly Korolev", "email":"vitaly.korolev@marklogic.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"vkorolev", "name":"Vitaly Korolev", "email":"vitaly.korolev@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"Fix verified and test added to regression."}, {"time":"2014-04-09T15:35:10.644687-07:00", "updatedBy":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "change":{"status":{"from":"", "to":"Closed"}, "assignTo":{"from":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"ga"}], "updatedAt":"2014-04-09T15:35:10.644687-07:00", "fixedAt":"2013-07-23T09:13:42.793849-07:00", "fixedBy":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}, "shippedAt":"2014-03-18T16:42:49.554506-07:00", "shippedBy":{"username":"vkorolev", "name":"Vitaly Korolev", "email":"vitaly.korolev@marklogic.com"}, "closedAt":"2014-04-09T15:35:10.644687-07:00", "closedBy":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "renderDescriptionAs":"normal", "renderSampleQueryAs":"normal"}