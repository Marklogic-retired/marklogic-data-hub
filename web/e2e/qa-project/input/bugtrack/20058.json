{"id":20058, "kind":"Bug", "createdAt":"2012-11-12T01:40:07.544045-08:00", "status":"Closed", "title":"Specification compliance for fn:analyze-string()", "category":"XQuery", "severity":"Minor", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"fn:analyze-string() returns results in the wrong namespace, according to the official version in the XQuery 3.0 specifications. Standards compliance modes should be changed to follow the standard.", "samplequery":"", "sampledata":"", "version":"7.0-nightly", "tofixin":"7.0-1", "fixedin":"7.0-1", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}, {"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, {"username":"skottam", "name":"Sravan Kottam", "email":"Sravan.Kottam@marklogic.com"}, {"username":"msrinivasan", "name":"Mahalakshmi Srinivasan", "email":"mahalakshmi.srinivasan@marklogic.com"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[23624], "cloneOf":"", "support":{"headline":"", "supportDescription":"duplicate", "publishStatus":"Never Publish", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["XQuery", "jsnelson"], "changeHistory":[{"time":"2012-11-12T01:40:07.544045-08:00", "updatedBy":{"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}, "change":{"assignTo":{"from":{"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}, "to":{"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}}}, "files":[], "show":true}, {"time":"2012-11-12T08:53:30.889547-08:00", "updatedBy":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"I think we should fix this even in b6_0 as soon as it opens."}, {"time":"2012-11-13T08:07:36.626904-08:00", "updatedBy":{"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"On 12/11/12 18:32, Mary Holstege wrote:\r\n\r\nWe should certainly support the right namespace in 3.0 strict.\r\n\r\nIn 7 we should support the right namespace in 1.0-ml.\r\n\r\nI think changing the namespace in 1.0-ml in 6.0-3 is\r\na more dubious proposition.\r\n"}, {"time":"2013-02-15T02:52:16.632344-08:00", "updatedBy":{"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}, "change":{"tofixin":{"from":"7.0-ea1", "to":"7.0-ea2"}}, "files":[], "show":true}, {"time":"2013-04-18T20:53:11.583286-07:00", "updatedBy":{"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}, "change":{"tofixin":{"from":"7.0-ea2", "to":"7.0-ea3"}}, "files":[], "show":true}, {"time":"2013-06-03T08:25:35.55561-07:00", "updatedBy":{"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}, "change":{"tofixin":{"from":"7.0-ea3", "to":"7.0-1"}}, "files":[], "show":true}, {"time":"2013-08-08T09:22:22.316256-07:00", "updatedBy":{"username":"wfeick", "name":"Wayne Feick", "email":"wfeick@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Spreading John's load."}, {"time":"2013-08-08T09:22:22.316256-07:00", "updatedBy":{"username":"wfeick", "name":"Wayne Feick", "email":"wfeick@marklogic.com"}, "change":{"assignTo":{"from":{"username":"wfeick", "name":"Wayne Feick", "email":"wfeick@marklogic.com"}, "to":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-08-12T07:21:32.322665-07:00", "updatedBy":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"At present we are using \"http://www.w3.org/2009/xpath-functions/analyze-string\". Our implementation was ahead of the spec and so we were unclear about the namespace at that point.\r\n\r\nHereafter we should use \"http://www.w3.org/2005/xpath-functions\" as specified by the XPath and XQuery Functions and Operators 3.0 spec.\r\n\r\nHere is an example from the spec:\r\n<analyze-string-result xmlns=\"http://www.w3.org/2005/xpath-functions\">\r\n  <match>The</match>\r\n  <non-match> </non-match> \r\n  <match>cat</match> \r\n  <non-match> </non-match> \r\n  <match>sat</match> \r\n  <non-match> </non-match> \r\n  <match>on</match> \r\n  <non-match> </non-match> \r\n  <match>the</match> \r\n  <non-match> </non-match> \r\n  <match>mat</match> \r\n  <non-match>.</non-match> \r\n</analyze-string-result>"}, {"time":"2013-08-12T07:28:17.465105-07:00", "updatedBy":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"148885", "paths":["xdmp/trunk/src/RegexpBuiltins.cpp"], "affectedBugs":[]}, "comment":"Fix for bug:20058. Make namespace in the o/p of analyze-string spec compatible.\n"}, {"time":"2013-08-12T07:32:13.832101-07:00", "updatedBy":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "to":{"username":"skottam", "name":"Sravan Kottam", "email":"Sravan.Kottam@marklogic.com"}}}, "files":[], "show":true, "comment":"The nightly tests for fn:analyze-string will fail due to this fix. Please update the tests."}, {"time":"2013-08-12T07:32:13.832101-07:00", "updatedBy":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "to":{"username":"skottam", "name":"Sravan Kottam", "email":"Sravan.Kottam@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-08-14T14:35:25.980056-07:00", "updatedBy":{"username":"lratcliff", "name":"Larry Ratcliff", "email":"lratcliff@marklogic.com"}, "change":{"assignTo":{"from":{"username":"lratcliff", "name":"Larry Ratcliff", "email":"lratcliff@marklogic.com"}, "to":{"username":"msrinivasan", "name":"Mahalakshmi Srinivasan", "email":"mahalakshmi.srinivasan@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-10-04T15:25:14.387537-07:00", "updatedBy":{"username":"msrinivasan", "name":"Mahalakshmi Srinivasan", "email":"mahalakshmi.srinivasan@marklogic.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"msrinivasan", "name":"Mahalakshmi Srinivasan", "email":"mahalakshmi.srinivasan@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"Verified on build 7.0-20131004"}], "updatedAt":"2013-10-04T15:25:14.387537-07:00", "fixedAt":"2013-08-12T07:32:13.832101-07:00", "fixedBy":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "shippedAt":"2013-10-04T15:25:14.387537-07:00", "shippedBy":{"username":"msrinivasan", "name":"Mahalakshmi Srinivasan", "email":"mahalakshmi.srinivasan@marklogic.com"}, "renderDescriptionAs":"normal"}