{"id":20223, "kind":"Bug", "createdAt":"2012-12-06T13:43:22.346846-08:00", "status":"Verify", "title":"when adding a new forest to a database that is journal archiving, the new forest does not participate in the backup", "category":"xdmp", "severity":"Minor", "priority":{"level":"2", "title":"Not required for product release"}, "submittedBy":{"username":"hwu", "name":"Haitao Wu", "email":"haitao.wu@marklogic.com"}, "assignTo":{"username":"hwu", "name":"Haitao Wu", "email":"haitao.wu@marklogic.com"}, "description":"This came up during a discussion on the new Elasticity feature.  Currently,  a newly-added forest doesn't take any actions when JournalArchiving is running on the database.  With Elasticity being a main feature in ML7, this should be property handled.   CJL suggested this forest should log a waning and also the database and forest status pages should show warnings.\r\n\r\nThere is no need to backport this to 5.0/6.0.", "samplequery":"", "sampledata":"", "version":"7.0-nightly", "tofixin":"N/A", "fixedin":"", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"hwu", "name":"Haitao Wu", "email":"haitao.wu@marklogic.com"}, {"name":"Ganesh Vaideeswaran", "email":"ganesh.vaideeswaran@marklogic.com", "username":"gvaidees"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[], "cloneOf":"", "support":{"headline":"", "supportDescription":"", "publishStatus":"Not Ready", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["xdmp", "hwu"], "hasUnitTests":"no", "changeHistory":[{"time":"2012-12-06T13:45:09.391686-08:00", "updatedBy":{"username":"hwu", "name":"Haitao Wu", "email":"haitao.wu@marklogic.com"}, "change":{"assignTo":{"from":{"username":"hwu", "name":"Haitao Wu", "email":"haitao.wu@marklogic.com"}, "to":{"username":"hwu", "name":"Haitao Wu", "email":"haitao.wu@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-22T16:49:27.559458-08:00", "updatedBy":{"username":"wfeick", "name":"Wayne Feick", "email":"wfeick@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Haitao and I discussed, and if the newly added forest notices that other forests are journal archiving they could do an empty backup and begin journal archiving. We don't currently have information on where the other forests backed up to, but we could add that to the label (we already have last backup time).\r\n\r\nBefore doing this work, we want to think a bit more about some related cases and make sure we're really doing the right thing here.\r\n\r\n1. What if a backup happened while a host was failed (the replica forest would have done the backup)? Conceivably the master forest would want to do the backup as well, but then you get into complexity around whether it succeeds or not. The right thing might just be to make sure we don't begin a backup in this case.\r\n\r\n2. When the user does a restore, how do they know which forests to include? (i.e. which forests were part of the database at the point in time they're thinking of).\r\n\r\nThe right answer might be to just have a manual command that can be run on the forest (e.g. xdmp:forest-join-backup()) to make it become part of the backup. For elasticity users, this might be sufficient."}, {"time":"2013-01-23T11:37:46.811267-08:00", "updatedBy":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, "change":{"status":{"from":"", "to":"Verify"}, "assignTo":{"from":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, "to":{"username":"hwu", "name":"Haitao Wu", "email":"haitao.wu@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-09-03T15:37:42.806918-07:00", "updatedBy":{"username":"wfeick", "name":"Wayne Feick", "email":"wfeick@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Personally, I think we can punt to ML8. Is anyone using journal archiving? Double check with Aaron Rosenbaum."}, {"time":"2013-09-03T16:35:39.498703-07:00", "updatedBy":{"username":"hwu", "name":"Haitao Wu", "email":"haitao.wu@marklogic.com"}, "change":{"tofixin":{"from":"7.0-1", "to":"8.0-1"}}, "files":[], "show":true}, {"time":"2014-10-31T15:58:01.527134-07:00", "updatedBy":{"username":"hwu", "name":"Haitao Wu", "email":"haitao.wu@marklogic.com"}, "change":{"tofixin":{"from":"8.0-1", "to":"N/A"}}, "files":[], "show":true}, {"time":"2015-12-20T18:02:28.343Z", "updatedBy":{"name":"Ganesh Vaideeswaran", "email":"ganesh.vaideeswaran@marklogic.com", "username":"gvaidees"}, "change":{"priority":{"from":{"level":"5", "title":""}, "to":{"level":"2", "title":"Not required for product release"}}, "hasUnitTests":{"to":"no"}}, "comment":"", "files":[]}], "updatedAt":"2015-12-20T18:02:28.343Z", "renderDescriptionAs":"normal"}