{"id":20161, "kind":"Bug", "createdAt":"2012-11-29T04:18:56.663362-08:00", "status":"Will not fix", "title":"validate strict/lax failing for document.xsd on 4.2.", "category":"Validation", "severity":"Critical", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"iagrawal", "name":"Isha Agrawal", "email":"iagrawal@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"validate strict/lax failing for document.xsd on 4.2.\r\n\r\nThe following xquery on 4.2 causing validate strict/lax failing :\r\n\r\nXquery 1:\r\n\r\nxquery version \"1.0-ml\";\r\ndeclare boundary-space preserve;\r\ntry {\r\nlet $doc := fn:doc(\"S0889540605803300.xml\")\r\nlet $validate := validate strict { $doc }\r\nreturn ()\r\n}\r\ncatch ($e) {\r\n fn:concat(\"Failed with the following error: \",\r\n       $e/error:format-string/text())}\r\n\t   \r\nResult returned by query:\r\nFailed with the following error: XDMP-VALIDATEBADTYPE: (err:XQDY0027) validate strict { $doc } -- Invalid node type: @langtype lexical value \"en\" invalid for expected type #{http://www.elsevier.com/xml/common/schema}language-type at fn:doc(\"S0889540605803300.xml\")/*:document/*:article/*:tail/*:bibliography/*:bibliography-sec/*:bib-reference[1]/*:reference/*:contribution/@langtype using schema \"document.xsd\"\r\n\r\nXquery 2:\r\n\r\nxquery version \"1.0-ml\";\r\ndeclare boundary-space preserve;\r\ntry {\r\nlet $doc := fn:doc(\"S0889540605803300.xml\")\r\nlet $validate := validate lax { $doc }\r\nreturn ()\r\n}\r\ncatch ($e) {\r\n fn:concat(\"Failed with the following error: \",\r\n        $e/error:format-string/text())}\r\n\r\n\r\nResult returned by query:\t\t\r\nFailed with the following error: XDMP-VALIDATEBADTYPE: (err:XQDY0027) validate lax { $doc } -- Invalid node type: @langtype lexical value \"en\" invalid for expected type #{http://www.elsevier.com/xml/common/schema}language-type at fn:doc(\"S0889540605803300.xml\")/*:document/*:article/*:tail/*:bibliography/*:bibliography-sec/*:bib-reference[1]/*:reference/*:contribution/@langtype using schema \"document.xsd\"\r\n\r\nTest Name: bug10835.xml\r\nML version: 4.2-20121128", "samplequery":"", "sampledata":"", "version":"4.2-nightly", "tofixin":"N/A", "fixedin":"N/A", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"iagrawal", "name":"Isha Agrawal", "email":"iagrawal@marklogic.com"}, {"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}, {"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[], "cloneOf":"", "support":{"headline":"", "supportDescription":"", "publishStatus":"Not Ready", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["Validation", "iagrawal"], "changeHistory":[{"time":"2012-11-29T04:18:56.663362-08:00", "updatedBy":{"username":"iagrawal", "name":"Isha Agrawal", "email":"iagrawal@marklogic.com"}, "change":{"assignTo":{"from":{"username":"iagrawal", "name":"Isha Agrawal", "email":"iagrawal@marklogic.com"}, "to":{"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}}}, "files":[], "show":true}, {"time":"2012-11-29T15:18:05.759121-08:00", "updatedBy":{"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}, "change":{"assignTo":{"from":{"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}, "to":{"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}}}, "files":[], "show":true}, {"time":"2014-03-28T21:26:04.532153-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"status":{"from":"", "to":"Will not fix"}, "assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"WNF defects in 4.-x"}, {"time":"2014-03-28T21:26:04.532153-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}, {"time":"2014-03-28T21:26:04.532153-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"tofixin":{"from":"4.2-10", "to":"N/A"}}, "files":[], "show":true}], "updatedAt":"2014-03-28T21:26:04.532153-07:00", "renderDescriptionAs":"normal"}