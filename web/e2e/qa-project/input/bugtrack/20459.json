{"id":20459, "kind":"Bug", "createdAt":"2012-12-14T11:30:29.494911-08:00", "status":"Closed", "title":"Admin UI does not inform user when certificate import fails.", "category":"security", "severity":"Minor", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"From Support ticket https://help.marklogic.com/staff/Tickets/Ticket/View/12026\r\n\r\nAdmin UI does not inform user when certificate import fails.\r\n\r\nThe user \r\nAfter pressing the \"OK\" button from the Certofocate Template \"import\" tab for an externally signed certificate template, there is no error displayed to the user - so the user thinks it succeeds except for the fact that the certificate is not displayed in the signed certificate list.  We should be more instructive here.  \r\n\r\n(Note: External certificates are not Yet supported - RFE 788 \"import an externally generated certificate and private key into a certificate template\"; Bug 9430 )\r\n\r\n\r\n\r\n\r\n\r\nI can click ok and it does not throw any type of error it just doesn't show the certificate under signed certificate list\r\n", "samplequery":"", "sampledata":"", "version":"7.0-nightly", "tofixin":"7.0-1", "fixedin":"7.0-1", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, {"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}, {"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, {"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, {"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}], "attachments":[{"name":"c.pem", "uri":"root/support/bugtracking/attachments/20459/c.pem"}], "relationships":[{"type":"", "to":""}], "clones":[], "cloneOf":20287, "support":{"headline":"Importing an invalid certificate via Admin UI will abort the operation with an error message", "supportDescription":"Importing an invalid certificate via Admin UI will abort the operation with an error message such as \r\n\"Certificate <certificate number> failed import. No certificates imported\"", "publishStatus":"Publish", "tickets":[], "customerImpact":{"level":"Low", "title":"Minimal business impact or reasonable workaround is available"}, "workaround":"Make sure that the certificates being imported are valid"}, "tags":["security", "rpelton"], "changeHistory":[{"time":"2012-12-14T16:26:35.991773-08:00", "updatedBy":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, "change":{"status":{"from":"", "to":"Verify"}, "assignTo":{"from":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, "to":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}}}, "files":[], "show":true}, {"time":"2012-12-14T16:26:35.991773-08:00", "updatedBy":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, "change":{"assignTo":{"from":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, "to":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}}}, "files":[], "show":true}, {"time":"2012-12-26T23:20:41.863289-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-10T19:31:27.281891-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-10T19:31:59.065658-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"I am waiting for input from Wayne on this defect"}, {"time":"2013-01-11T12:55:05.604379-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"status":{"from":"", "to":"Fix"}, "assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-14T13:28:46.517878-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Given that defect is minor, Rick is OK with us throwing a 500 error instead of just eating the error. I will check in that fix"}, {"time":"2013-01-14T13:39:42.450781-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}}}, "files":[], "show":true, "comment":"You will see a 500 error "}, {"time":"2013-01-14T13:39:42.450781-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-14T13:39:42.450781-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"tofixin":{"from":"", "to":"7.0-ea1"}}, "files":[], "show":true}, {"time":"2013-02-19T21:41:32.346907-08:00", "updatedBy":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "change":{"assignTo":{"from":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "to":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-27T04:43:59.596625-08:00", "updatedBy":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Hi Ganesh, \r\n\r\nI am not seeing 500 error for this.\r\n\r\nThanks\r\nKuldeep"}, {"time":"2013-02-27T22:34:18.490695-08:00", "updatedBy":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "change":{"status":{"from":"", "to":"Verify"}, "assignTo":{"from":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "to":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-27T22:34:18.490695-08:00", "updatedBy":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "change":{"assignTo":{"from":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "to":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-27T23:04:46.380853-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"tofixin":{"from":"7.0-ea1", "to":"7.0-ea2"}}, "files":[], "show":true}, {"time":"2013-04-29T22:29:18.099611-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"tofixin":{"from":"7.0-ea2", "to":"7.0-ea3"}}, "files":[], "show":true}, {"time":"2013-06-28T11:08:46.295532-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"tofixin":{"from":"7.0-ea3", "to":"7.0-1"}}, "files":[], "show":true}, {"time":"2013-07-20T12:47:12.802494-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"147207", "paths":["xdmp/trunk/src/Admin/import-trusted-certificate-go.xqy", "xdmp/trunk/src/Admin/import-trusted-certificate.xqy", "xdmp/trunk/src/Admin/import-certificates.xqy", "xdmp/trunk/src/Admin/import-certificates-go.xqy"], "affectedBugs":[]}, "comment":"Bug:20459 -  Admin UI does not inform user when certificate import fails. Fixed both Import Trusted Certificates and Import Certificates (under Certificate Templates) UI "}, {"time":"2013-07-20T12:47:30.011617-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"147208", "paths":["xdmp/trunk/src/Modules/MarkLogic/pki.xqy"], "affectedBugs":[]}, "comment":"Bug:20459 -  Admin UI does not inform user when certificate import fails. Fixed both Import Trusted Certificates and Import Certificates (under Certificate Templates) UI "}, {"time":"2013-07-20T12:47:44.34566-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"147209", "paths":["xdmp/trunk/src/Admin/lib/certificate-authority-forms.xqy"], "affectedBugs":[]}, "comment":"Bug:20459 -  Admin UI does not inform user when certificate import fails. Fixed both Import Trusted Certificates and Import Certificates (under Certificate Templates) UI "}, {"time":"2013-07-20T12:48:41.576701-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"147210", "paths":["xdmp/trunk/src/Messages/PKI-en.xml"], "affectedBugs":[]}, "comment":"Bug:20459 -  Admin UI does not inform user when certificate import fails. Fixed both Import Trusted Certificates and Import Certificates (under Certificate Templates) UI "}, {"time":"2013-07-20T12:53:58.917015-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}}}, "files":[], "show":true, "comment":"Megha,\r\n\r\nI have attached invalid certificates (called c.pem)\r\n\r\n1. Click on Security-->Certificate Authorities\r\n2. Import invalid certificates. (Try both pasting into the text box and also uploading from OS).\r\n3. You should see an error message such as \"\r\nCertificate #1 failed import. No certificates imported.\"\r\n\r\nAlso, do this - \r\n\r\n1. Security --> Certificate Templates\r\n2.  Create a template\r\n3. From summary tab, choose the template and click on \"Import\" tab\r\n4. Import invalid certificate (both via text field and uploading from OS)\r\n5.  You should see an error message (at the bottom) such as \"\r\nCertificate #1 failed import. No certificates imported.\""}, {"time":"2013-07-20T12:53:58.917015-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-09-02T21:30:23.335372-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Use the c.pem file attached"}, {"time":"2013-09-06T15:11:14.727627-07:00", "updatedBy":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "change":{"assignTo":{"from":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "to":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-09-13T11:51:51.64065-07:00", "updatedBy":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Hi Ganesh, \r\n\r\nFor the attached c.pem file, it is working fine but if I am importing anything else even a txt file than it is eating up the error.\r\n\r\nPlease confirm if this is expected behavior.\r\n\r\nThanks\r\nKuldeep"}, {"time":"2013-09-13T11:51:51.64065-07:00", "updatedBy":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "change":{"assignTo":{"from":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "to":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-09-13T17:33:11.556457-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"I do see the following message with the c.pem attached\r\n\r\n\"Certificate #1 failed import. No certificates imported.\"\r\n\r\nI tried on chrome"}, {"time":"2013-09-13T17:33:11.556457-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-09-15T07:07:17.672883-07:00", "updatedBy":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Hi Ganesh, \r\n\r\nYes it do work as expected with attached c.pem file but I was trying to convey that if I am using any other file,  even a txt file then it is eating up the error.\r\n\r\nSo it is not throwing any type of error and  just doesn't show the certificate under signed certificate list .\r\n\r\nThanks\r\nKuldeep"}, {"time":"2013-09-15T07:07:43.979404-07:00", "updatedBy":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "change":{"assignTo":{"from":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "to":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-09-15T07:17:50.186676-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Ah ok. Will look into it"}, {"time":"2013-09-22T21:21:44.49611-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"In code review. A message such as \"Certificate #0 failed import. No certificates imported.\" will be printed"}, {"time":"2013-09-24T21:34:47.906421-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"152245", "paths":["xdmp/trunk/src/Admin/import-trusted-certificate-go.xqy", "xdmp/trunk/src/Admin/import-certificates-go.xqy"], "affectedBugs":[]}, "comment":"Bug:20459 -  Admin UI does not inform user when certificate import fails. If file or content pasted has no certficates, we now print an error "}, {"time":"2013-09-24T21:36:17.494564-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"152246", "paths":["xdmp/trunk/src/Modules/MarkLogic/pki.xqy"], "affectedBugs":[]}, "comment":"Bug:20459 -  Admin UI does not inform user when certificate import fails. If file or content pasted has no certficates, we now print an error "}, {"time":"2013-09-24T21:37:35.522916-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"You would see an error Content pasted or file imported does not contain any valid certificate. No certificates imported.\r\n\r\nIn this case, the filed does not even contain a semblance of a certificate.\r\n\r\nPlease test"}, {"time":"2013-09-24T21:37:35.522916-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-09-26T04:12:34.196781-07:00", "updatedBy":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"Verified Pass, added AdminUIBug20459 in regression.\r\n\r\nThanks\r\nK"}], "updatedAt":"2013-09-26T04:12:34.196781-07:00", "fixedAt":"2013-07-20T12:53:58.917015-07:00", "fixedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "shippedAt":"2013-09-26T04:12:34.196781-07:00", "shippedBy":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "renderDescriptionAs":"normal"}