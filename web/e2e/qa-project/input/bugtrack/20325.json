{"id":20325, "kind":"Bug", "createdAt":"2012-12-21T15:53:46.794379-08:00", "status":"Closed", "title":"QConsole: XML view shows blank when executed a query that returns json/text output ", "category":"Query Console", "severity":"Major", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"1. Select XML output\r\n2. Run the query which returns json output\r\nxquery version \"1.0-ml\";\r\njson:array(\r\n  <json:array xmlns:json=\"http://marklogic.com/xdmp/json\"\r\n              xmlns:xs=\"http://www.w3.org/2001/XMLSchema\"\r\n              xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\r\n   <json:value xsi:type=\"xs:string\">hello</json:value>\r\n   <json:value xsi:type=\"xs:string\">world</json:value>\r\n   <json:array>\r\n     <json:value xsi:type=\"xs:string\">one</json:value>\r\n     <json:value xsi:type=\"xs:string\">two</json:value>\r\n   </json:array>\r\n  </json:array>\r\n)\r\n2. Shows blank and the Stop button does not change to Run \r\n\r\nExpected: If the output is incompatible to selected output, error should be shown. Stop button should change to Run\r\n\r\n", "samplequery":"", "sampledata":"JS errors\r\n\r\nError: Non-whitespace before first tag.\r\nLine: 0\r\nColumn: 1\r\nChar: [\r\nhttp://sreddy:8000/common/output-formatter/lib/sax.js\r\nLine 352\r\n\r\nNon-whitespace before first tag.\r\nLine: 0\r\nColumn: 1\r\nChar: [\r\nhttp://sreddy:8000/common/output-formatter/lib/sax.js\r\nLine 352", "version":"7.0-nightly", "tofixin":"7.0-ea1", "fixedin":"7.0-ea1", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, {"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, {"username":"myawitz", "name":"Mitch Yawitz", "email":"mitchell.yawitz@marklogic.com"}, {"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, {"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[], "cloneOf":"", "support":{"headline":"", "supportDescription":"", "publishStatus":"Not Ready", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["Query Console", "sreddy"], "changeHistory":[{"time":"2012-12-21T15:53:46.794379-08:00", "updatedBy":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "change":{"assignTo":{"from":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "to":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}}}, "files":[], "show":true}, {"time":"2012-12-21T15:54:31.652424-08:00", "updatedBy":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"adding Mitch'e eyes on this one for UX feedback"}, {"time":"2013-01-11T10:48:04.38553-08:00", "updatedBy":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"another query that returns text output\r\ncount(doc())"}, {"time":"2013-01-11T10:55:25.317085-08:00", "updatedBy":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Parser issue.  Passing to Christophe.  \r\n\r\nOf note, if you run JSON output through XML parser a similar breakage also occurs.\r\n"}, {"time":"2013-01-11T10:55:25.317085-08:00", "updatedBy":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, "change":{"assignTo":{"from":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, "to":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-14T16:20:15.090327-08:00", "updatedBy":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "to":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}}}, "files":[], "show":true, "comment":"Please verify that this is not reproducible anymore. I can't seem to reproduce it on my machine with the latest build."}, {"time":"2013-01-14T16:20:15.090327-08:00", "updatedBy":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "change":{"assignTo":{"from":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "to":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-14T16:31:10.741818-08:00", "updatedBy":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"I can reproduce on my machine in the latest build. Drop by my desk "}, {"time":"2013-01-14T16:31:10.741818-08:00", "updatedBy":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "change":{"assignTo":{"from":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "to":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-15T13:56:11.105931-08:00", "updatedBy":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"127867", "paths":["xdmp/trunk/src/Apps/common/output-formatter/output-formatter.js"], "affectedBugs":["20350"]}, "comment":"Bug:20350,20325 - fixed xml parser error message."}, {"time":"2013-01-15T13:56:59.019437-08:00", "updatedBy":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Duplicate of 20350"}, {"time":"2013-01-15T13:59:04.251434-08:00", "updatedBy":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"stop button still \"sticks\", but my commit fixed the issue with the xml parser error not producing the proper error message."}, {"time":"2013-01-15T13:59:04.251434-08:00", "updatedBy":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "change":{"status":{"from":"", "to":"Fix"}, "assignTo":{"from":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "to":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-15T13:59:04.251434-08:00", "updatedBy":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "change":{"assignTo":{"from":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "to":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-15T14:33:57.086136-08:00", "updatedBy":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Great, thanks."}, {"time":"2013-01-15T18:52:03.405052-08:00", "updatedBy":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Hey Christophe,\r\n\r\nThere's still errors coming from the output formatter library.\r\n\r\nOn Chrome, follow the steps in the bug and you'll see the following two JS errors:\r\n\r\nError\r\n output-formatter.js:263\r\n\r\nUncaught Error: Non-whitespace before first tag.\r\nLine: 0\r\nColumn: 1\r\nChar: [ \r\n\r\nsending back to you."}, {"time":"2013-01-15T18:52:03.405052-08:00", "updatedBy":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, "change":{"assignTo":{"from":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, "to":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-16T16:06:04.555157-08:00", "updatedBy":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"128018", "paths":["xdmp/trunk/src/Apps/common/output-formatter/output-formatter.js", "xdmp/trunk/src/Apps/common/output-formatter/css/output-formatter.css"], "affectedBugs":["20350"]}, "comment":"Bug:20350,20325 - fixed run/start button not resetting after a parsing error, updated xml display to be more compact by keeping text nodes on the same line as their parent nodes. Also matched font and sizing to codemirror."}, {"time":"2013-01-16T17:00:06.403032-08:00", "updatedBy":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "to":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}}}, "files":[], "show":true, "comment":"Fixed by last commit"}, {"time":"2013-01-16T17:00:06.403032-08:00", "updatedBy":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "change":{"assignTo":{"from":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "to":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-16T17:02:27.41628-08:00", "updatedBy":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Christophe - FYI - please always assign the bugs back to the reporter (in this case its me) so that it does not fall through the cracks "}, {"time":"2013-01-16T17:02:27.41628-08:00", "updatedBy":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "change":{"assignTo":{"from":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "to":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-17T12:57:26.62415-08:00", "updatedBy":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "change":{"status":{"from":"", "to":"Fix"}, "assignTo":{"from":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "to":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}}}, "files":[], "show":true, "comment":"Parser error is fixed but the Stop button still sticks\r\nhttp://sreddy:8000/qconsole\r\nRun the query in the bug in json mode"}, {"time":"2013-01-17T12:57:26.62415-08:00", "updatedBy":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "change":{"assignTo":{"from":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "to":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-17T12:58:31.106877-08:00", "updatedBy":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"yea I noticed yesterday that qconsole.js change didn't get committed.  He just needs to push that piece and it's done.  Thanks."}, {"time":"2013-01-23T12:26:31.960942-08:00", "updatedBy":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"Not reproducible in latest build. Shipping it"}, {"time":"2013-01-23T12:26:31.960942-08:00", "updatedBy":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "change":{"assignTo":{"from":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}], "updatedAt":"2013-01-23T12:26:31.960942-08:00", "fixedAt":"2013-01-16T17:00:06.403032-08:00", "fixedBy":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "shippedAt":"2013-01-23T12:26:31.960942-08:00", "shippedBy":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "renderDescriptionAs":"normal", "renderSampleDataAs":"normal"}