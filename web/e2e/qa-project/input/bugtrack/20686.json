{"id":20686, "kind":"Bug", "createdAt":"2013-02-03T11:14:08.331319-08:00", "status":"Closed", "title":"QueryConsole: Does not display properties or document from links in results pane", "category":"Query Console", "severity":"Major", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"paven", "name":"Pete Aven", "email":"paven@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"Ingesting a binary through QueryConsole using xdmp:document-insert(), the user is able to click 'Explore', and view the document properties by clicking the 'properties' link in the result pane.\r\n\r\nIf the same document is ingested via ContentPump or InfoStudio, the properties link does NOT display the properties and the user has to use xdmp:document-properties() to view them in the results pane.\r\n\r\nIf the Document Filtering pipeline is enabled on the target DB, again, if the user inserts the document via xdmp:document-insert(), then clicks 'Explore' and then clicks the .xhtml link in the results pane for the filtered document, the xhtml is properly displayed.\r\n\r\nHowever, if the same document is ingested via Content Pump or InfoStudio, clicking the xhtml link in the results pane, the document is NOT displayed and fn:doc() must be used.", "samplequery":"", "sampledata":"", "version":"6.0-2.2", "tofixin":"7.0-2", "fixedin":"N/A", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"paven", "name":"Pete Aven", "email":"paven@marklogic.com"}, {"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}, {"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, {"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}], "attachments":[{"name":"20686.png", "uri":"root/support/bugtracking/attachments/20686/20686.png"}], "relationships":[{"type":"", "to":""}], "clones":[25010], "cloneOf":"", "support":{"headline":"", "supportDescription":"", "publishStatus":"Not Ready", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["Query Console", "paven"], "changeHistory":[{"time":"2013-02-03T11:24:07.79977-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"status":{"from":"", "to":"Verify"}, "assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-03T11:24:07.79977-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"tofixin":{"from":"", "to":"6.0-3"}}, "files":[], "show":true}, {"time":"2013-02-03T11:28:24.408416-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Pete,\r\n\r\nYou say - \"If the same document is ingested via ContentPump or InfoStudio, the properties link does NOT display the properties and the user has to use xdmp:document-properties() to view them in the results pane.\" \r\n\r\nDid you setup any transforms while ingesting via infostudio? \r\n\r\nThanks"}, {"time":"2013-02-03T11:28:24.408416-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-28T15:31:53.482979-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"tofixin":{"from":"6.0-3", "to":"6.0-4"}}, "files":[], "show":true}, {"time":"2013-07-01T10:16:30.714727-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Pete,\r\n\r\nWe are trying to dispose this bug. Can you please answer my question above?\r\n\r\nThanks,\r\n\r\nGanesh"}, {"time":"2013-07-01T10:39:33.082612-07:00", "updatedBy":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Moving it to 7.0-1 per discussion with Ganesh "}, {"time":"2013-07-01T10:39:33.082612-07:00", "updatedBy":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "change":{"tofixin":{"from":"6.0-4", "to":"7.0-1"}}, "files":[], "show":true}, {"time":"2013-07-01T16:14:52.824448-07:00", "updatedBy":{"username":"paven", "name":"Pete Aven", "email":"paven@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"No transforms were applied via infostudio."}, {"time":"2013-07-09T14:28:58.186514-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Micah,\r\n\r\nCan you chime in on a fix for this, since you know QC and InfoStudio well? Thanks"}, {"time":"2013-07-09T14:28:58.186514-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-07-09T14:37:35.637067-07:00", "updatedBy":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"I'll need to try this out. I'd be surprised if a document inserted with vanilla document-insert had properties at all. Maybe last-modified is turned on for that db?"}, {"time":"2013-07-15T11:32:57.340787-07:00", "updatedBy":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"I ingested a binary document with xdmp:document-insert. It had no properties.\r\nI ingested a binary document with InfoStudio, both the 'external binary' and 'directory' collector. Neither had properties, either in qconsole explore, or via an explicit call to xdmp:document-properties().\r\n\r\nPete, in the case where you are not seeing properties in the QConsole explore view, what does xdmp:document-properties() on the same URI return?"}, {"time":"2013-07-15T11:32:57.340787-07:00", "updatedBy":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "change":{"assignTo":{"from":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "to":{"username":"paven", "name":"Pete Aven", "email":"paven@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-07-26T09:45:12.339999-07:00", "updatedBy":{"username":"paven", "name":"Pete Aven", "email":"paven@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"As stated originally, xdmp:document-properties() from QConsole will display the properties for a URI properly, but the link for the properties from the Explore view for the same URI will return nothing; the results pane will be blank."}, {"time":"2013-07-26T09:45:12.339999-07:00", "updatedBy":{"username":"paven", "name":"Pete Aven", "email":"paven@marklogic.com"}, "change":{"assignTo":{"from":{"username":"paven", "name":"Pete Aven", "email":"paven@marklogic.com"}, "to":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-08-01T17:55:01.049129-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Pete,\r\n\r\nWhat kind of document are you ingesting? I did the following - \r\n\r\nxdmp:document-insert(\"/docs/sop1.doc\",\r\n    xdmp:external-binary(\r\n        \"C:\\Temp\\SOP.docx\"))\r\n\r\nNot sure if it matters, but I made sure I added document properties such as Title, Subject Tags etc. before I did the document-insert.\r\n\r\nIn QC, when I explore I do not see any properties associated with the document. \r\n\r\nCan you attach the binary document that you are ingesting (and also add to the defect if you did anything extra to add properties to the document).\r\n\r\nBasically, I am having the same issue as Micah. \"I ingested a binary document with xdmp:document-insert via QC. It had no properties.\"\r\n\r\n\r\nThanks,\r\n\r\nGanesh"}, {"time":"2013-08-02T08:51:55.837616-07:00", "updatedBy":{"username":"paven", "name":"Pete Aven", "email":"paven@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Apologies if I did not articulate properly when I initially logged this.\r\n\r\nProperties aren't added to a document by default on ingest into MarkLogic.  In my case, I had the \"Document Filtering (XHTML)\" pipeline enabled, and I inserted a document into the domain which CPF was configured for ( which in my case was: \"/\")\r\n\r\nTo reproduce the issue, documents of the above types would need to be ingested via Content Pump or Informatino Studio into the domain where CPF is enabled with the \"Status Change Handling\" and \"Document Filtering (XHTML)\" pipelines enabled.   When I ingested documents in this way, I could click Explore in QC to view the documents , they had a properties link associated with them in the results pane, and when I clicked the link, the results pane showed no document propertes (which were the CPF properties associated as part of CPF processing on ingest).  To view the properties for these documents, I had to use xdmp:document-properties() in QC, which would then show the properties fragment for the document in the results pane.\r\n\r\nIf I used xdmp:document-insert(), and inserted the same documents with the same URI into the same CPF domain, I could click \"Explore\" in QC, to view the list of docs.  Each doc would have the associated properties link, and when I clicked the link, the properties fragment for the document was displayed properly.  \r\n\r\nThe issue seemed to only happen when using Content Pump or Information Studio to ingest the documents.\r\n\r\nHope this helps,\r\nPete"}, {"time":"2013-08-02T08:53:22.971766-07:00", "updatedBy":{"username":"paven", "name":"Pete Aven", "email":"paven@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"\"documents of the above types\" - not sure what happened to my comment, but I was ingesting a sample of customer provided .doc, .xls, .rtf, and .pdf documents."}, {"time":"2013-08-08T15:01:54.717026-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"I cannot reproduce this in 7.0. This is what I did - \r\n\r\n1. Under Content Processing, I enabled conversion. This was against Documents DB\r\n2. Under Content Processing --> Default Domains --> PipeLines I checked \"Document Filtering (XHTML)\". I also made sure \"Status Change Handling\" was checked as well\r\n3. I then added some .docx documents via InfoStudio to Documents DB\r\n4. In QC, I then explored Documents DB and the properties link is enabled and I can look at the properties.\r\n\r\nI have attached 20686.png to illustrate this. Note that this was with a 7.0 build (08/03 nightly).\r\n\r\nAt this point, perhaps a webex to go over what I have done and what you are doing makes sense.  "}, {"time":"2013-08-29T16:15:01.683692-07:00", "updatedBy":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Needs further input from Pete--nobody on this end has been able to repro. Marking low priority."}, {"time":"2013-10-04T09:20:14.666511-07:00", "updatedBy":{"username":"jmakeig", "name":"Justin Makeig", "email":"jmakeig@marklogic.com"}, "change":{"tofixin":{"from":"7.0-1", "to":"7.0-2"}}, "files":[], "show":true}, {"time":"2013-11-22T10:59:13.660651-08:00", "updatedBy":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"I suspect this is no longer an issue"}, {"time":"2013-11-22T10:59:13.660651-08:00", "updatedBy":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "change":{"assignTo":{"from":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "to":{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-12-03T14:56:04.76053-08:00", "updatedBy":{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Hi Pete, do you still see the issue?"}, {"time":"2013-12-03T14:56:04.76053-08:00", "updatedBy":{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}, "change":{"assignTo":{"from":{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}, "to":{"username":"paven", "name":"Pete Aven", "email":"paven@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-12-03T17:31:29.221581-08:00", "updatedBy":{"username":"paven", "name":"Pete Aven", "email":"paven@marklogic.com"}, "change":{"status":{"from":"", "to":"Closed"}, "assignTo":{"from":{"username":"paven", "name":"Pete Aven", "email":"paven@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"no longer an issue"}], "updatedAt":"2013-12-03T17:31:29.221581-08:00", "closedAt":"2013-12-03T17:31:29.221581-08:00", "closedBy":{"username":"paven", "name":"Pete Aven", "email":"paven@marklogic.com"}, "renderDescriptionAs":"normal"}