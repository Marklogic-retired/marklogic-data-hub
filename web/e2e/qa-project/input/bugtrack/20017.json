{"id":20017, "kind":"Bug", "createdAt":"2012-11-07T10:26:28.957241-08:00", "status":"Closed", "title":"Certain path range indexes do not get included in the plan", "category":"xdmp", "severity":"Minor", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"msrinivasan", "name":"Mahalakshmi Srinivasan", "email":"mahalakshmi.srinivasan@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"1. Create 'u' as path range index and run \r\nxdmp:query-trace(fn:true()), \r\n//u, \r\nxdmp:query-trace(fn:false()) \r\n \r\nThis does not include the path range index in the plan. \r\nTrying /*[u='l'] also does not include the range index.\r\n\r\n\r\n2. There is one more case:\r\nCreate a path range index: /hello/team/server\r\nRun query:\r\nxdmp:query-trace(fn:true()),\r\n/hello/team[.='world'],\r\nxdmp:query-trace(fn:false())\r\n \r\nThis does not include the path range index as well.\r\n\r\nThis was part of the task 17564, now made it a separate bug.", "samplequery":"", "sampledata":"", "version":"6.0-1", "tofixin":"7.0-ea1", "fixedin":"7.0-ea1", "platform":"all", "memory":"", "processors":"", "note":"Please feel free to move it to 6.0-3", "subscribers":[{"username":"msrinivasan", "name":"Mahalakshmi Srinivasan", "email":"mahalakshmi.srinivasan@marklogic.com"}, {"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[20021], "cloneOf":"", "support":{"headline":"", "supportDescription":"", "publishStatus":"Not Ready", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["xdmp", "msrinivasan"], "changeHistory":[{"time":"2012-11-07T10:26:28.957241-08:00", "updatedBy":{"username":"msrinivasan", "name":"Mahalakshmi Srinivasan", "email":"mahalakshmi.srinivasan@marklogic.com"}, "change":{"assignTo":{"from":{"username":"msrinivasan", "name":"Mahalakshmi Srinivasan", "email":"mahalakshmi.srinivasan@marklogic.com"}, "to":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}}}, "files":[], "show":true}, {"time":"2012-11-07T11:26:40.721322-08:00", "updatedBy":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "change":{"tofixin":{"from":"6.0-2", "to":"6.1-ea1"}}, "files":[], "show":true}, {"time":"2012-11-07T15:57:54.454635-08:00", "updatedBy":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"The self-node part of this bug has been fixed by bug 20000.\r\n\r\nThe fix for this bug adds following optimizations=>\r\n\r\n1. Create integer range indexes on u, /v and //w.\r\n\r\na. Queries /u[.=5] and //u[.=5] should use the index on 'u'.\r\nb. Queries /v[.=6] should use the index on /v ( but not the query //v[.=5]:  /v doesn't cover //v).\r\nc. Queries /w[.=7] and //w[.=7] should use the index on //w.\r\n\r\nSemantically index on //w is equivalent to index on 'w'. So (a) and (b) have the same index usage."}, {"time":"2012-11-07T15:59:11.082087-08:00", "updatedBy":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"119909", "paths":["xdmp/trunk/src/PathIndexes.cpp"], "affectedBugs":[]}, "comment":"Fix for bug:20017.\n"}, {"time":"2012-11-07T16:00:40.881967-08:00", "updatedBy":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "to":{"username":"msrinivasan", "name":"Mahalakshmi Srinivasan", "email":"mahalakshmi.srinivasan@marklogic.com"}}}, "files":[], "show":true}, {"time":"2012-11-07T16:00:40.881967-08:00", "updatedBy":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "to":{"username":"msrinivasan", "name":"Mahalakshmi Srinivasan", "email":"mahalakshmi.srinivasan@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-21T15:20:44.97065-08:00", "updatedBy":{"username":"msrinivasan", "name":"Mahalakshmi Srinivasan", "email":"mahalakshmi.srinivasan@marklogic.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"msrinivasan", "name":"Mahalakshmi Srinivasan", "email":"mahalakshmi.srinivasan@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"Verified on build 7.0-20130221. Going to add a test query-opt-bug20017.xml"}], "updatedAt":"2013-02-21T15:20:44.97065-08:00", "fixedAt":"2012-11-07T16:00:40.881967-08:00", "fixedBy":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "shippedAt":"2013-02-21T15:20:44.97065-08:00", "shippedBy":{"username":"msrinivasan", "name":"Mahalakshmi Srinivasan", "email":"mahalakshmi.srinivasan@marklogic.com"}, "renderDescriptionAs":"normal"}