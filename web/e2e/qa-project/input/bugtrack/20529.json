{"id":20529, "kind":"Bug", "createdAt":"2013-01-21T01:54:06.952114-08:00", "status":"Closed", "title":"Task Server: DBG-NODEBUGGER exception on clicking \"stack\" link of a long running query", "category":"Debug API", "severity":"Major", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"akakkar", "name":"Ankit Kakkar", "email":"Ankit.Kakkar@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"https://help.marklogic.com/staff/Tickets/Ticket/View/12404:\r\n\r\nI had 15 tasks queued and 8 threads executing in the Task Server. When I clicked the \"[stack]\" button under the Expanded Tree Cache table on the Task Server Status page, it redirects to a Server Error page with the following error detail:\r\n\r\n\r\n500: Internal Server Error\r\nDBG-NODEBUGGER: dbg:attach(xs:unsignedLong(\"9875972036831806416\")) -- Request not being debugged: 9875972036831806416\r\nIn /request-stack.xqy on line 252\r\n$key = xs:unsignedLong(\"9875972036831806416\")\r\n$status = <requests xmlns=\"http://marklogic.com/xdmp/debug\"><request><request-id>9875972036831806416</request-id><server-id>...</requests>\r\n$attached = dbg:debugging-status(\"detached\")\r\n$stopped = dbg:request-status(\"running\")\r\n$callattach = fn:true()\r\n\r\nI'm running MLS v 6.0-2. Let me know if I can provide any more info.\r\n\r\n-Will\r\n\r\n", "samplequery":"Te replicate a long running query, use xdmp:sleep  and spawn this module on task server.", "sampledata":"", "version":"6.0-2.2", "tofixin":"6.0-3", "fixedin":"N/A", "platform":"all", "memory":"", "processors":"", "note":"Also noticed http://bugtrack.marklogic.com/20208 but as I was not sure if the same fix would work for the task server, I created a new bug.", "subscribers":[{"username":"akakkar", "name":"Ankit Kakkar", "email":"Ankit.Kakkar@marklogic.com"}, {"username":"jchen", "name":"Jane Chen", "email":"jane.chen@marklogic.com"}, {"username":"ali", "name":"Aries Li", "email":"ali@marklogic.com"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[], "cloneOf":"", "support":{"headline":"", "supportDescription":"", "publishStatus":"Not Ready", "tickets":[], "customerImpact":{"level":"Medium", "title":"Requires significant or unnatural effort to work around issue or to prevent significant business impact"}, "workaround":""}, "tags":["Debug API", "akakkar"], "changeHistory":[{"time":"2013-01-21T08:32:01.690203-08:00", "updatedBy":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "change":{"tofixin":{"from":"", "to":"6.0-3"}}, "files":[], "show":true}, {"time":"2013-01-23T11:43:03.703947-08:00", "updatedBy":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, "change":{"status":{"from":"", "to":"Verify"}, "assignTo":{"from":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, "to":{"username":"jchen", "name":"Jane Chen", "email":"jane.chen@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-23T11:43:03.703947-08:00", "updatedBy":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, "change":{"assignTo":{"from":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, "to":{"username":"jchen", "name":"Jane Chen", "email":"jane.chen@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-23T11:44:34.257577-08:00", "updatedBy":{"username":"jchen", "name":"Jane Chen", "email":"jane.chen@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Please verify if this is the same bug you fixed on b5-0."}, {"time":"2013-01-23T11:44:34.257577-08:00", "updatedBy":{"username":"jchen", "name":"Jane Chen", "email":"jane.chen@marklogic.com"}, "change":{"assignTo":{"from":{"username":"jchen", "name":"Jane Chen", "email":"jane.chen@marklogic.com"}, "to":{"username":"ali", "name":"Aries Li", "email":"ali@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-23T11:54:22.274908-08:00", "updatedBy":{"username":"ali", "name":"Aries Li", "email":"ali@marklogic.com"}, "change":{"status":{"from":"", "to":"Closed"}, "assignTo":{"from":{"username":"ali", "name":"Aries Li", "email":"ali@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"duplicate of bug 20208"}, {"time":"2013-01-23T11:54:22.274908-08:00", "updatedBy":{"username":"ali", "name":"Aries Li", "email":"ali@marklogic.com"}, "change":{"assignTo":{"from":{"username":"ali", "name":"Aries Li", "email":"ali@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}], "updatedAt":"2013-01-23T11:54:22.274908-08:00", "closedAt":"2013-01-23T11:54:22.274908-08:00", "closedBy":{"username":"ali", "name":"Aries Li", "email":"ali@marklogic.com"}, "renderDescriptionAs":"normal", "renderSampleQueryAs":"normal"}