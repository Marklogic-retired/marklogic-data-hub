{"id":20227, "kind":"Bug", "createdAt":"2012-08-07T09:53:48.566703-07:00", "status":"Closed", "title":"QConsole not properly displaying very large result sets", "category":"Query Console", "severity":"Major", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"cwhitney", "name":"Colleen  Whitney", "email":"colleen.whitney@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"Posted by Florent George on the General Dev list.   I ran into the same issue myself on 6.0 nightly when doing queries that returned very large documents (several MBs).  At very least, we should consider whether it's possible to display an error message instead of the dangling XML declaration.\r\n\r\n  I looked in the QConsole documentation, but did not find\r\nanything.  Is there any restriction on the size of the result of\r\na query that QConsole can display?\r\n\r\n  I am asking because I found a very strange behaviour which is\r\nquite difficult to reproduce.  I have a query looking like:\r\n\r\n    <my-results> {\r\n      some CTS search returning 350 or so documents\r\n    }\r\n    </my-results>\r\n\r\n  But the result shows only an XML declaration with nothing else.\r\nNot even an empty \"my-result\" element.  But if I filter the\r\ncts:search call to select the first 100 documents (with an\r\npositional predicate [1 to 100]), it returns the expected result.\r\nIf I say 1 to 200 also.  If I say 1 to 250, then it shows only\r\nthe XML declaration and nothing else...\r\n\r\n  I see no error, and I am not sure how I could investigate any\r\nfurther.  Any idea?\r\n\r\n", "samplequery":"", "sampledata":"", "version":"7.0-nightly", "tofixin":"7.0-ea1", "fixedin":"7.0-ea1", "platform":"all", "memory":"", "processors":"", "note":"Not sure whether this goes back to 5.0-1; have requested a specific version from Florent.", "subscribers":[{"username":"cwhitney", "name":"Colleen  Whitney", "email":"colleen.whitney@marklogic.com"}, {"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, {"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, {"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[], "cloneOf":18791, "support":{"headline":"", "supportDescription":"", "publishStatus":"Not Ready", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["Query Console", "cwhitney"], "changeHistory":[{"time":"2012-08-07T09:53:48.566703-07:00", "updatedBy":{"username":"cwhitney", "name":"Colleen  Whitney", "email":"colleen.whitney@marklogic.com"}, "change":{"assignTo":{"from":{"username":"cwhitney", "name":"Colleen  Whitney", "email":"colleen.whitney@marklogic.com"}, "to":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}}}, "files":[], "show":true}, {"time":"2012-08-08T06:46:35.794456-07:00", "updatedBy":{"username":"cwhitney", "name":"Colleen  Whitney", "email":"colleen.whitney@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Florent is running:  MarkLogic Server Enterprise 5.0-2, accessed via Chrome\r\n\"21.0.1180.60 m\" running on Windows 7 Enterprise SP1."}, {"time":"2012-12-06T15:16:08.035358-08:00", "updatedBy":{"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}, "change":{"tofixin":{"from":"5.0-5", "to":"N/A"}}, "files":[], "show":true}, {"time":"2012-12-06T19:21:40.420974-08:00", "updatedBy":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, "change":{"tofixin":{"from":"", "to":"7.0-ea1"}}, "files":[], "show":true}, {"time":"2013-01-28T14:29:26.910024-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Could be same as 16091"}, {"time":"2013-01-28T14:29:26.910024-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-12T14:12:23.292369-08:00", "updatedBy":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "to":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}}}, "files":[], "show":true, "comment":"Results of more than 5mb will now have an error message stating that they cannot be parsed due to file size. the raw text will be dumped below the error message."}, {"time":"2013-02-12T14:12:23.292369-08:00", "updatedBy":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "change":{"assignTo":{"from":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "to":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-26T15:46:08.884373-08:00", "updatedBy":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "change":{"assignTo":{"from":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "to":{"username":"aabbas", "name":"Adeel Abbas", "email":"Adeel.Abbas@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-03-01T01:05:02.189007-08:00", "updatedBy":{"username":"aabbas", "name":"Adeel Abbas", "email":"Adeel.Abbas@marklogic.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"aabbas", "name":"Adeel Abbas", "email":"Adeel.Abbas@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"Verified by these queries\r\nxquery version \"1.0-ml\";\r\ndeclare namespace html = \"http://www.w3.org/1999/xhtml\";\r\nfor $i in 1 to 100500\r\nreturn xdmp:document-insert(fn:concat($i, \".xml\"), <a>This is interesting test to check the size of 5MB {$i}. </a>)\r\n\r\nand verified by \r\n   <my-results> {\r\n      cts:search(doc(), \"test\")\r\n    }\r\n    </my-results> \r\n\r\nWorking fine hence shipped\r\n"}], "updatedAt":"2013-03-01T01:05:02.189007-08:00", "fixedAt":"2013-02-12T14:12:23.292369-08:00", "fixedBy":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "shippedAt":"2013-03-01T01:05:02.189007-08:00", "shippedBy":{"username":"aabbas", "name":"Adeel Abbas", "email":"Adeel.Abbas@marklogic.com"}, "renderDescriptionAs":"normal"}