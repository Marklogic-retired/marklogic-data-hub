{"id":20483, "kind":"Bug", "createdAt":"2013-01-16T13:43:53.949513-08:00", "status":"Will not fix", "title":"REGR:QConsole - XML declaration is not displayed in xml output", "category":"Query Console", "severity":"Major", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"In previous qconole versions there is a xml declaration for xml output as shown below\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<a>\r\n...some xml stuff here\r\n</a>\r\n\r\nBut in current output the xml is shown without xml declaration at the beginning.", "samplequery":"let $doc := <foo>\r\n <test>\r\n <!-- comment -->\r\n <bar att=\"attribute\">foo</bar>\r\n <bar2>fooo2</bar2>\r\n </test>\r\n </foo>\r\n return $doc", "sampledata":"", "version":"7.0-nightly", "tofixin":"N/A", "fixedin":"N/A", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, {"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}, {"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[], "cloneOf":"", "support":{"headline":"", "supportDescription":"", "publishStatus":"Not Ready", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["Query Console", "sreddy"], "changeHistory":[{"time":"2013-01-16T13:43:53.949513-08:00", "updatedBy":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "change":{"assignTo":{"from":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "to":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-16T13:44:36.380427-08:00", "updatedBy":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Christophe - If this does not fall under code base, feel free to assign to Scott"}, {"time":"2013-01-16T17:02:23.09825-08:00", "updatedBy":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Passing on to Brian to close after he finishes turning all the xml wrapping features back on in the qconsole eval endpoint. This will be fixed by that work."}, {"time":"2013-01-16T17:02:23.09825-08:00", "updatedBy":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "change":{"assignTo":{"from":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "to":{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-17T14:28:22.841964-08:00", "updatedBy":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Brian - this is affecting lot of qconsole tests. Could you please fix this asap\r\nThanks"}, {"time":"2013-01-18T10:31:01.651953-08:00", "updatedBy":{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"This is not a simple to turn the switch back on.  The new endpoint is a complete rewrite that expects the client side to do all the heavy lifting of detecting of content types.   \r\n\r\nIn the kitchen now..."}, {"time":"2013-01-23T14:33:48.886975-08:00", "updatedBy":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"any leads on this?"}, {"time":"2013-01-23T14:57:23.883297-08:00", "updatedBy":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"When we move forward with qconsole plans, this will come together. the idea is that if the server returns xml, it will return properly formatted xml (including the declaration). The parser will parse a returned sequence one element at a time, according to the datatype of that sequence. since sequences can't be nested, that means out data types with be text, json, xml, naked attribute, etc. We won't have to worry about mixed data types, which is the current issue.\r\n\r\nThe qconsole changes are on hold while we fix 5.0 bugs. I can hack in a temporary stopgap if needed to placate the tests, but it will be a temporary stopgap, not a fix, as the problem is one of us over-constraining ourselves into a box."}, {"time":"2013-01-23T15:37:33.62005-08:00", "updatedBy":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"I would advise against a temporary fix because it may in turn cause more regression. Lets triage this issue with Megha & Ganesh"}, {"time":"2013-01-29T21:57:10.989011-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Sudhakar,\r\n\r\nAs per the meeting today, we will keep the sanity of the result returned by the server and not add any decoration/wrapping. The question about wrapping mixed content as needed is a separate requirement that we will look at. CLosing this one as working as designed. Hope you agree"}, {"time":"2013-01-29T21:57:10.989011-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"status":{"from":"", "to":"Will not fix"}, "assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-29T21:57:10.989011-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-29T21:57:10.989011-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"tofixin":{"from":"7.0-ea1", "to":"N/A"}}, "files":[], "show":true}, {"time":"2013-01-30T11:35:37.650541-08:00", "updatedBy":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Personally even I'd prefer to see the raw output instead of extra wrapping. All in all agreed!"}], "updatedAt":"2013-01-30T11:35:37.650541-08:00", "renderDescriptionAs":"normal", "renderSampleQueryAs":"normal"}