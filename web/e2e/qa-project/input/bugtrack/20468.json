{"id":20468, "kind":"Bug", "createdAt":"2013-01-15T02:30:37.125475-08:00", "status":"Closed", "title":"Unfiltered language search on russian language not returning correct results", "category":"xdmp", "severity":"Major", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"ksaxena", "name":"Kapil Saxena", "email":"kapil.saxena@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"ML Version: 7.0-20130114\r\nTest Name: field-value-query-16.xml\r\nLink to diff:\r\nhttps://regression-status.marklogic.com/new-app/space2/diff-archive/b7_0/2013-01-14/winnt-64-w8/diffs/field-value-query-16.xml\r\n******************************************************************************************************************************************************\r\n\r\nXQuery:\r\n*******\r\n\t\tfor $text in fn:doc(\"langFields.xml\")//russian/text()\r\n        let $language := \"ru\"\r\n        let $langopt := fn:concat(\"lang=\",$language)\r\n        let $search-result := cts:search(fn:doc(),cts:field-value-query(\"tf1\",$text,(\"case-insensitive\", $langopt)),\"unfiltered\") \r\n\t\treturn \r\n\t\t<result language=\"{$language}\" docs-matched=\"{count($search-result)}\"> {for $x at $item in $search-result return element {concat(\"doc-uri\",$item)} {document-uri($x)} } </result>     \r\n******************************************************************************************************************************************************\r\n\r\nActual Result:\r\n<result docs-matched=\"2\" language=\"ru\"><doc-uri1>langFieldsRussian.xml</doc-uri1><doc-uri2>langFields.xml</doc-uri2></result>\r\n<result docs-matched=\"0\" language=\"ru\"/>\r\n<result docs-matched=\"2\" language=\"ru\"><doc-uri1>langFieldsRussian.xml</doc-uri1><doc-uri2>langFields.xml</doc-uri2></result>\r\n******************************************************************************************************************************************************\r\n\r\nExpected Result:\r\n<result docs-matched=\"2\" language=\"ru\"><doc-uri1>langFieldsRussian.xml</doc-uri1><doc-uri2>langFields.xml</doc-uri2></result>\r\n<result docs-matched=\"2\" language=\"ru\"><doc-uri1>langFieldsRussian.xml</doc-uri1><doc-uri2>langFields.xml</doc-uri2></result>\r\n<result docs-matched=\"2\" language=\"ru\"><doc-uri1>langFieldsRussian.xml</doc-uri1><doc-uri2>langFields.xml</doc-uri2></result>\r\n\r\n", "samplequery":"", "sampledata":"", "version":"7.0-nightly", "tofixin":"7.0-ea1", "fixedin":"7.0-ea1", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"ksaxena", "name":"Kapil Saxena", "email":"kapil.saxena@marklogic.com"}, {"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, {"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[], "cloneOf":"", "support":{"headline":"", "supportDescription":"", "publishStatus":"Not Ready", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["xdmp", "ksaxena"], "changeHistory":[{"time":"2013-01-15T02:30:37.125475-08:00", "updatedBy":{"username":"ksaxena", "name":"Kapil Saxena", "email":"kapil.saxena@marklogic.com"}, "change":{"assignTo":{"from":{"username":"ksaxena", "name":"Kapil Saxena", "email":"kapil.saxena@marklogic.com"}, "to":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-22T15:34:50.778692-08:00", "updatedBy":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Looks like fix for 20555 fixed this as well."}, {"time":"2013-01-22T15:34:50.778692-08:00", "updatedBy":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "to":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}}}, "files":[], "show":true}, {"time":"2013-01-24T13:12:57.248889-08:00", "updatedBy":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "to":{"username":"ksaxena", "name":"Kapil Saxena", "email":"kapil.saxena@marklogic.com"}}}, "files":[], "show":true, "comment":"Fixed 7.0-20130122 by other fix"}, {"time":"2013-01-24T13:12:57.248889-08:00", "updatedBy":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "change":{"assignTo":{"from":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "to":{"username":"ksaxena", "name":"Kapil Saxena", "email":"kapil.saxena@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-21T03:00:43.227859-08:00", "updatedBy":{"username":"ksaxena", "name":"Kapil Saxena", "email":"kapil.saxena@marklogic.com"}, "change":{"status":{"from":"", "to":"Closed"}, "assignTo":{"from":{"username":"ksaxena", "name":"Kapil Saxena", "email":"kapil.saxena@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"This test is now passing on 7.0. Hence, closing."}, {"time":"2013-02-21T03:00:43.227859-08:00", "updatedBy":{"username":"ksaxena", "name":"Kapil Saxena", "email":"kapil.saxena@marklogic.com"}, "change":{"assignTo":{"from":{"username":"ksaxena", "name":"Kapil Saxena", "email":"kapil.saxena@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}], "updatedAt":"2013-02-21T03:00:43.227859-08:00", "fixedAt":"2013-01-24T13:12:57.248889-08:00", "fixedBy":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "closedAt":"2013-02-21T03:00:43.227859-08:00", "closedBy":{"username":"ksaxena", "name":"Kapil Saxena", "email":"kapil.saxena@marklogic.com"}, "renderDescriptionAs":"normal"}