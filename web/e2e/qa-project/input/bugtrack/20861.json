{"id":20861, "kind":"Bug", "createdAt":"2011-11-28T14:49:06.928147-08:00", "status":"Closed", "title":"Search API: Support fragment-scope for terms", "category":"Search API", "severity":"Major", "priority":{"level":"3", "title":""}, "submittedBy":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"Given unadorned query text like [foo]\r\n\r\nIt is not currently possible (without writing an extension function) to search in document fragments for the text when the global fragment-scope is properties, and vice versa.\r\n\r\nThis should be done in the same manner that constraint-level overrides of fragment scope, that is, making this legal:\r\n\r\n<options xmlns=\"http://marklogic.com/appservices/search\">\r\n    <term>\r\n        <fragment-scope>properties</fragment-scope>\r\n    </term>\r\n</options>\r\n\r\nNote that a custom term function, if provided, continues to be wholly responsible for parsing individual terms.", "samplequery":"", "sampledata":"", "version":"7.0-nightly", "tofixin":"7.0-ea2", "fixedin":"7.0-ea2", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, {"username":"cgreer", "name":"Charles Greer", "email":"charles.greer@marklogic.com"}, {"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, {"username":"kcoleman", "name":"Kim Coleman", "email":"kim.coleman@marklogic.com"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[], "cloneOf":15809, "support":{"headline":"", "supportDescription":"", "publishStatus":"Not Ready", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["Search API", "mdubinko"], "changeHistory":[{"time":"2011-11-28T14:49:06.928147-08:00", "updatedBy":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "change":{"assignTo":{"from":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "to":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}}}, "files":[], "show":true}, {"time":"2012-01-20T12:56:13.489337-08:00", "updatedBy":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Triage: this is slated for b5_1. Let's push it."}, {"time":"2012-12-09T00:34:51.493629-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Micah,\r\n\r\nIs this a bug or RFE? If RFE, does Charles have visibility into this? "}, {"time":"2012-12-10T10:20:34.244761-08:00", "updatedBy":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Is this covered by naked terms in 6?"}, {"time":"2012-12-17T13:10:01.036091-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"tofixin":{"from":"5.0-5", "to":"7.0-ea1"}}, "files":[], "show":true}, {"time":"2013-02-20T16:34:02.375286-08:00", "updatedBy":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"132726", "paths":["xdmp/trunk/src/Config/search.xsd", "xdmp/trunk/src/Modules/MarkLogic/appservices/search/ast.xqy", "xdmp/trunk/src/Modules/MarkLogic/appservices/search/search-impl.xqy", "xdmp/trunk/src/Apps/test/appservices/search-unittest/ast-unittest.xqy", "xdmp/trunk/src/Apps/test/appservices/search-unittest/parse-unittest.xqy", "xdmp/trunk/src/Config/search.rnc"], "affectedBugs":[]}, "comment":"bug:15809 fragment-scope for terms"}, {"time":"2013-02-20T16:36:45.935336-08:00", "updatedBy":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"For doc:\r\n<search:fragment-scope> is now allowed as a child of <search:term> and will cause the term-queries to be processed in the defined scope. As with constraints, the specific setting can override the general one, optionally set at the root level.\r\n\r\nIf your term definition uses an inline specification (<opt:range>, etc.) or a @ref to an existing constraint, or a custom-function, then this setting will be ignored, as the thing-pointed-to gets responsibility for handling the fragment scope as needed."}, {"time":"2013-02-20T16:38:42.129456-08:00", "updatedBy":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"For doc:\r\n<search:fragment-scope> is now allowed as a child of <search:term> and will cause the term-queries to be processed in the defined scope. As with constraints, the specific setting can override the general one, optionally set at the root level.\r\n\r\nIf your term definition uses an inline specification (<opt:range>, etc.) or a @ref to an existing constraint, or a custom-function, then this setting will be ignored, as the thing-pointed-to gets responsibility for handling the fragment scope as needed."}, {"time":"2013-02-20T16:38:42.129456-08:00", "updatedBy":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "to":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}}}, "files":[], "show":true, "comment":"Fixed on trunk. (Will port to EA1 branch, if that's already a separate thing).\r\n\r\nDanny, I'm bouncing this through you first to make sure this change gets documented for ML7. At your convenience, hand it off to QA.Thanks!"}, {"time":"2013-02-20T16:38:42.129456-08:00", "updatedBy":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "change":{"assignTo":{"from":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "to":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-20T16:42:29.764781-08:00", "updatedBy":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"I'll clone the doc part, as it is bad practice to use one bug for 2 things."}, {"time":"2013-02-20T16:45:19.670491-08:00", "updatedBy":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, "change":{"status":{"from":"", "to":"Verify"}, "assignTo":{"from":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, "to":{"username":"kcoleman", "name":"Kim Coleman", "email":"kim.coleman@marklogic.com"}}}, "files":[], "show":true, "comment":"Kim, this is the doc part of bug 15809."}, {"time":"2013-02-20T16:45:19.670491-08:00", "updatedBy":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, "change":{"assignTo":{"from":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, "to":{"username":"kcoleman", "name":"Kim Coleman", "email":"kim.coleman@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-20T16:45:19.670491-08:00", "updatedBy":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, "change":{"tofixin":{"from":"", "to":"7.0-ea1"}}, "files":[], "show":true}, {"time":"2013-02-27T12:32:02.170324-08:00", "updatedBy":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, "change":{"tofixin":{"from":"7.0-ea1", "to":"7.0-ea2"}}, "files":[], "show":true}, {"time":"2013-05-09T09:29:29.247478-07:00", "updatedBy":{"username":"kcoleman", "name":"Kim Coleman", "email":"kim.coleman@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/docsvn", "revision":"6657", "paths":["docs/trunk/fm/rest-dev/appendixa.fm", "docs/trunk/fm/search-dev-guide/query-options.fm", "docs/trunk/fm/rest-dev/appendixb.fm"], "affectedBugs":[]}, "comment":"Bug:20861 Document use of fragment-scope in term definition."}, {"time":"2013-05-09T09:36:39.280224-07:00", "updatedBy":{"username":"kcoleman", "name":"Kim Coleman", "email":"kim.coleman@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/docsvn", "revision":"6658", "paths":["docs/trunk/modules/searchapi.xml"], "affectedBugs":[]}, "comment":"Bug:20861 Document use of fragment-scope in term definition."}, {"time":"2013-05-09T09:37:56.55786-07:00", "updatedBy":{"username":"kcoleman", "name":"Kim Coleman", "email":"kim.coleman@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"kcoleman", "name":"Kim Coleman", "email":"kim.coleman@marklogic.com"}, "to":{"username":"kcoleman", "name":"Kim Coleman", "email":"kim.coleman@marklogic.com"}}}, "files":[], "show":true, "comment":"Will be in doc build of 20130509. I'll run it by Micah once I verify the build worked OK."}, {"time":"2013-05-10T09:47:30.441554-07:00", "updatedBy":{"username":"kcoleman", "name":"Kim Coleman", "email":"kim.coleman@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Micah, can you please check the last paragraph of this section to see if I correctly interpreted what you said about fragment scope on a term definition:\r\n\r\nhttp://pubs.marklogic.com:8011/guide/search-dev/query-options#id_35473\r\n\r\nif you're satisfied, you can either set this ship or bounce it back to me and I'll do it - whatever is easiest for you."}, {"time":"2013-05-10T09:47:30.441554-07:00", "updatedBy":{"username":"kcoleman", "name":"Kim Coleman", "email":"kim.coleman@marklogic.com"}, "change":{"assignTo":{"from":{"username":"kcoleman", "name":"Kim Coleman", "email":"kim.coleman@marklogic.com"}, "to":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-05-10T11:00:32.316883-07:00", "updatedBy":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"Looks OK to me. Thanks, Kim!"}, {"time":"2013-05-10T11:00:32.316883-07:00", "updatedBy":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "change":{"assignTo":{"from":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}], "updatedAt":"2013-05-10T11:00:32.316883-07:00", "fixedAt":"2013-05-09T09:37:56.55786-07:00", "fixedBy":{"username":"kcoleman", "name":"Kim Coleman", "email":"kim.coleman@marklogic.com"}, "shippedAt":"2013-05-10T11:00:32.316883-07:00", "shippedBy":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "renderDescriptionAs":"normal"}