{"id":20239, "kind":"Bug", "createdAt":"2012-12-10T11:13:39.041661-08:00", "status":"Closed", "title":"Package Revert Functionality not working on b6_0", "category":"packaging", "severity":"Major", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"gghai", "name":"Gaurav Ghai", "email":"Gaurav.ghai@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"Build : 12/07\r\n\r\n1. in packaging UI, create a package of the documents database\r\n2. open the package in editor and change a couple of settings from true to false\r\n3. in packaging UI, import the modified package, you should see that there are differences with the current config as expected.\r\n4. apply the package.\r\n5. select the id of the ticket and copy it.\r\n6. in browser enter the following url:\r\nhttp://localhost:8002/manage/v1/tickets/[enter ticketid here]/revert \r\n\r\nActual Result : Revert functionality is working on b5_0 ; on b6_0 user is not seeing the revert functionality page / button. Nothing happens. \r\n", "samplequery":"", "sampledata":"", "version":"6.0-nightly", "tofixin":"6.0-4", "fixedin":"6.0-4", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"gghai", "name":"Gaurav Ghai", "email":"Gaurav.ghai@marklogic.com"}, {"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, {"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, {"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[], "cloneOf":"", "support":{"headline":"Package revert functionality did not correctly revert application server settings", "supportDescription":"If a package that contained changes to application servers was reverted, the settings of the application servers were not correctly changed back to the settings that they had before the package was installed.", "publishStatus":"Publish", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":"The package ticket contains the original settings, so they can be changed by hand if necessary."}, "tags":["packaging", "gghai"], "changeHistory":[{"time":"2012-12-10T11:13:39.041661-08:00", "updatedBy":{"username":"gghai", "name":"Gaurav Ghai", "email":"Gaurav.ghai@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gghai", "name":"Gaurav Ghai", "email":"Gaurav.ghai@marklogic.com"}, "to":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}}}, "files":[], "show":true}, {"time":"2012-12-10T11:20:50.82865-08:00", "updatedBy":{"username":"gghai", "name":"Gaurav Ghai", "email":"Gaurav.ghai@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Seems Yann reported few Bug with revert functionality Bug 15501 -  [IE] no notification that package revert was succesful in IE on b5_0 which also got fixed . Probably same would need to be taken here too. We can include Scott on the same since he fixed the b5_0 bug ."}, {"time":"2013-01-24T13:29:34.922601-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"tofixin":{"from":"6.0-3", "to":"6.0-4"}}, "files":[], "show":true}, {"time":"2013-06-24T14:03:28.439203-07:00", "updatedBy":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"If the bug here is that revert doesn't work, then we definitely need to fix it in 6.0-5.\r\n\r\nIf the bug is that some browsers don't display the right results, then I'm on the fence about how critical it is to fix.\r\n\r\nI don't think we can ignore this one without investigating it. I'll try to triage this with more care after EA3 code freeze ends.\r\n"}, {"time":"2013-06-24T16:17:38.109136-07:00", "updatedBy":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Subscribing myself to this bug as http://bugtrack.marklogic.com/20240 has a dependency on this fix."}, {"time":"2013-07-11T17:08:03.32417-07:00", "updatedBy":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"146442", "paths":["xdmp/branches/b6_0/src/Modules/MarkLogic/manage/config.xqy"], "affectedBugs":[]}, "comment":"Fix bug:20239 by correcting the rewriter URI"}, {"time":"2013-07-11T17:08:50.214325-07:00", "updatedBy":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}, "to":{"username":"gghai", "name":"Gaurav Ghai", "email":"Gaurav.ghai@marklogic.com"}}}, "files":[], "show":true, "comment":"Fixed, I believe."}, {"time":"2013-07-11T17:08:50.214325-07:00", "updatedBy":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}, "change":{"assignTo":{"from":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}, "to":{"username":"gghai", "name":"Gaurav Ghai", "email":"Gaurav.ghai@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-07-17T13:27:50.14146-07:00", "updatedBy":{"username":"gghai", "name":"Gaurav Ghai", "email":"Gaurav.ghai@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Verified on 07/15 build.\r\n\r\nWhen i revert the package using the http://localhost:8002/manage/v1/tickets/[enter ticketid here]/revert   ; the old state of the setting both in db and app server is not reinstated to the old value .\r\n\r\nAlso to accomplish revert process when i click on the Revert button can you confirm if below message is expected \r\n\r\n<pkg:result xmlns:pkg=\"http://marklogic.com/package\"><pkg:ticket-id>/tickets/ticket/8891773826777146893</pkg:ticket-id><pkg:result-status>UNLOADED</pkg:result-status><pkg:result-event>PACKAGE_REVERTED</pkg:result-event></pkg:result>"}, {"time":"2013-07-17T13:27:50.14146-07:00", "updatedBy":{"username":"gghai", "name":"Gaurav Ghai", "email":"Gaurav.ghai@marklogic.com"}, "change":{"status":{"from":"", "to":"Verify"}, "assignTo":{"from":{"username":"gghai", "name":"Gaurav Ghai", "email":"Gaurav.ghai@marklogic.com"}, "to":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-07-17T13:27:50.14146-07:00", "updatedBy":{"username":"gghai", "name":"Gaurav Ghai", "email":"Gaurav.ghai@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gghai", "name":"Gaurav Ghai", "email":"Gaurav.ghai@marklogic.com"}, "to":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-07-18T10:29:10.35482-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Norm,\r\n\r\nWhen you are back, can you look at this 6.0-4 issue as highest priority.\r\n\r\nThanks,"}, {"time":"2013-07-19T11:07:35.942658-07:00", "updatedBy":{"username":"gghai", "name":"Gaurav Ghai", "email":"Gaurav.ghai@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Regression from 5.0, issue exists from 6.0-1"}, {"time":"2013-07-22T14:56:42.467181-07:00", "updatedBy":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"147316", "paths":["xdmp/branches/b6_0/src/Modules/MarkLogic/package/install-impl.xqy"], "affectedBugs":[]}, "comment":"Fix bug:20239 make sure appservers revert correctly"}, {"time":"2013-07-22T15:04:48.556255-07:00", "updatedBy":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}, "to":{"username":"gghai", "name":"Gaurav Ghai", "email":"Gaurav.ghai@marklogic.com"}}}, "files":[], "show":true, "comment":"Fixed, I believe."}, {"time":"2013-07-22T15:04:48.556255-07:00", "updatedBy":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}, "change":{"assignTo":{"from":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}, "to":{"username":"gghai", "name":"Gaurav Ghai", "email":"Gaurav.ghai@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-07-24T10:22:24.544012-07:00", "updatedBy":{"username":"gghai", "name":"Gaurav Ghai", "email":"Gaurav.ghai@marklogic.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"gghai", "name":"Gaurav Ghai", "email":"Gaurav.ghai@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"Verified on 07/24 build. for both appserver and db , pkg revert is fixed "}, {"time":"2013-07-24T10:22:24.544012-07:00", "updatedBy":{"username":"gghai", "name":"Gaurav Ghai", "email":"Gaurav.ghai@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gghai", "name":"Gaurav Ghai", "email":"Gaurav.ghai@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-08-12T18:10:55.365126-07:00", "updatedBy":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "change":{"status":{"from":"", "to":"Closed"}, "assignTo":{"from":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}], "updatedAt":"2013-08-12T18:10:55.365126-07:00", "fixedAt":"2013-07-22T15:04:48.556255-07:00", "fixedBy":{"username":"nwalsh", "name":"Norman Walsh", "email":"norman.walsh@marklogic.com"}, "shippedAt":"2013-07-24T10:22:24.544012-07:00", "shippedBy":{"username":"gghai", "name":"Gaurav Ghai", "email":"Gaurav.ghai@marklogic.com"}, "closedAt":"2013-08-12T18:10:55.365126-07:00", "closedBy":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "renderDescriptionAs":"normal"}