{"id":20453, "kind":"Bug", "createdAt":"2013-01-14T01:24:07.559309-08:00", "status":"Closed", "title":"REGR:Getting error 500 on updating Namespaces of Default group", "category":"adminGUI", "severity":"Minor", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"Getting error 500 on updating Namespaces of Default group\r\n\r\nSteps to reproduce - \r\n\r\n1. Go to Default group\r\n2. Create Namespaces for this group\r\n3. Now try to update Namespaces on configure page\r\n\r\nPlease note that below error displayed\r\n \r\n\r\nYou've encountered an error in the server. Please copy the text below, and email support (support@marklogic.com):\r\n\r\n500: Internal Server Error\r\nXDMP-ELEMNAME: (err:XPTY0004) for $value2 in $val/*[fn:node-name(.) eq $name2] -- Cannot use (fn:QName(\"http://marklogic.com/xdmp/group\", \"namespace\"), fn:QName(\"http://marklogic.com/xdmp/group\", \"using-namespace\")) as an element name\r\nIn /namespace-admin-go.xqy on line 49\r\nIn local:rebuildServerConfig(<xs:schema targetNamespace=\"http://marklogic.com/xdmp/group\" xsi:schemaLocation=\"http://www.w3.org/2001/XMLSchema XMLSchema.xsd http://marklogic....\" attributeFormDefault=\"unqualified\" elementFormDefault=\"unqualified\" xmlns:xhtml=\"http://www.w3.org/1999/xhtml\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:admin=\"http://marklogic.com/xdmp/admin\" xmlns=\"http://marklogic.com/xdmp/group\"><?xdmp-annotations?><xs:annotation><xs:documentation>&#10; ...</xs:schema>, xs:NCName(\"namespaces\"), <namespaces xmlns=\"http://marklogic.com/xdmp/group\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"><namespace><prefix>abc</prefix><namespace-uri>http://localhost:8...</namespaces>, \"/gr:groups/gr:group\")\r\n\r\n    $schemaroot = <xs:schema targetNamespace=\"http://marklogic.com/xdmp/group\" xsi:schemaLocation=\"http://www.w3.org/2001/XMLSchema XMLSchema.xsd http://marklogic....\" attributeFormDefault=\"unqualified\" elementFormDefault=\"unqualified\" xmlns:xhtml=\"http://www.w3.org/1999/xhtml\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:admin=\"http://marklogic.com/xdmp/admin\" xmlns=\"http://marklogic.com/xdmp/group\"><?xdmp-annotations?><xs:annotation><xs:documentation>&#10; ...</xs:schema>\r\n    $name = xs:NCName(\"namespaces\")\r\n    $val = <namespaces xmlns=\"http://marklogic.com/xdmp/group\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"><namespace><prefix>abc</prefix><namespace-uri>http://localhost:8...</namespaces>\r\n    $parentindex = \"/gr:groups/gr:group\"\r\n    $gr = \"http://marklogic.com/xdmp/group\"\r\n    $decl = <xs:element name=\"namespaces\" type=\"namespaces\" abstract=\"false\" nillable=\"false\" xmlns:xhtml=\"http://www.w3.org/1999/xhtml\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:admin=\"http://marklogic.com/xdmp/admin\" xmlns=\"http://marklogic.com/xdmp/group\"><xs:annotation><xs:documentation>&#10; The namespace bind...</xs:element>\r\n    $t = xs:NCName(\"namespaces\")\r\n    $simple = ()\r\n    $complex = <xs:complexType name=\"namespaces\" abstract=\"false\" mixed=\"false\" xmlns:xhtml=\"http://www.w3.org/1999/xhtml\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:admin=\"http://marklogic.com/xdmp/admin\" xmlns=\"http://marklogic.com/xdmp/group\"><xs:annotation><xs:documentation>&#10; The namespace bind...</xs:complexType>\r\n    $index = \"/gr:groups/gr:group/gr:namespaces\"\r\n    $name2 = (fn:QName(\"http://marklogic.com/xdmp/group\", \"namespace\"), fn:QName(\"http://marklogic.com/xdmp/group\", \"using-namespace\"))\r\n    $value2 = <namespace xmlns=\"http://marklogic.com/xdmp/group\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"><prefix>abc</prefix><namespace-uri>http://localhost:8002</namesp...</namespace>\r\n\r\nIn /namespace-admin-go.xqy on line 61\r\nIn local:rebuildServerConfig(<xs:schema targetNamespace=\"http://marklogic.com/xdmp/group\" xsi:schemaLocation=\"http://www.w3.org/2001/XMLSchema XMLSchema.xsd http://marklogic....\" attributeFormDefault=\"unqualified\" elementFormDefault=\"unqualified\" xmlns:xhtml=\"http://www.w3.org/1999/xhtml\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:admin=\"http://marklogic.com/xdmp/admin\" xmlns=\"http://marklogic.com/xdmp/group\"><?xdmp-annotations?><xs:annotation><xs:documentation>&#10; ...</xs:schema>, \"group\", <group xmlns=\"http://marklogic.com/xdmp/group\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"><group-name>Default</group-name><group-id>7380439121064767732</g...</group>, \"\")\r\n\r\n    $schemaroot = <xs:schema targetNamespace=\"http://marklogic.com/xdmp/group\" xsi:schemaLocation=\"http://www.w3.org/2001/XMLSchema XMLSchema.xsd http://marklogic....\" attributeFormDefault=\"unqualified\" elementFormDefault=\"unqualified\" xmlns:xhtml=\"http://www.w3.org/1999/xhtml\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:admin=\"http://marklogic.com/xdmp/admin\" xmlns=\"http://marklogic.com/xdmp/group\"><?xdmp-annotations?><xs:annotation><xs:documentation>&#10; ...</xs:schema>\r\n    $name = \"group\"\r\n    $val = <group xmlns=\"http://marklogic.com/xdmp/group\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"><group-name>Default</group-name><group-id>7380439121064767732</g...</group>\r\n    $parentindex = \"\"\r\n    $gr = \"http://marklogic.com/xdmp/group\"\r\n    $decl = <xs:element name=\"group\" type=\"group\" abstract=\"false\" nillable=\"false\" xmlns:xhtml=\"http://www.w3.org/1999/xhtml\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:admin=\"http://marklogic.com/xdmp/admin\" xmlns=\"http://marklogic.com/xdmp/group\"><xs:annotation><xs:documentation>&#10; The server specifi...</xs:element>\r\n    $t = xs:NCName(\"group\")\r\n    $simple = ()\r\n    $complex = <xs:complexType name=\"group\" abstract=\"false\" mixed=\"false\" xmlns:xhtml=\"http://www.w3.org/1999/xhtml\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:admin=\"http://marklogic.com/xdmp/admin\" xmlns=\"http://marklogic.com/xdmp/group\"><xs:annotation><xs:documentation>&#10; The server specifi...</xs:complexType>\r\n    $index = \"/gr:groups/gr:group\"\r\n    $rf = attribute{fn:QName(\"\", \"ref\")}{\"namespaces\"}\r\n    $name2 = fn:QName(\"http://marklogic.com/xdmp/group\", \"namespaces\")\r\n    $value2 = <namespaces xmlns=\"http://marklogic.com/xdmp/group\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"><namespace><prefix>abc</prefix><namespace-uri>http://localhost:8...</namespaces>\r\n\r\nIn /namespace-admin-go.xqy on line 101\r\nIn local:rebuildGroupConfig1(<xs:schema targetNamespace=\"http://marklogic.com/xdmp/group\" xsi:schemaLocation=\"http://www.w3.org/2001/XMLSchema XMLSchema.xsd http://marklogic....\" attributeFormDefault=\"unqualified\" elementFormDefault=\"unqualified\" xmlns:xhtml=\"http://www.w3.org/1999/xhtml\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:admin=\"http://marklogic.com/xdmp/admin\" xmlns=\"http://marklogic.com/xdmp/group\"><?xdmp-annotations?><xs:annotation><xs:documentation>&#10; ...</xs:schema>, <groups xsi:schemaLocation=\"http://marklogic.com/xdmp/group group.xsd\" timestamp=\"13581552257170000\" xmlns=\"http://marklogic.com/xdmp/group\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"><group><group-name>Default</group-name><group-id>738043912106476...</groups>)\r\n\r\n    $schemaroot = <xs:schema targetNamespace=\"http://marklogic.com/xdmp/group\" xsi:schemaLocation=\"http://www.w3.org/2001/XMLSchema XMLSchema.xsd http://marklogic....\" attributeFormDefault=\"unqualified\" elementFormDefault=\"unqualified\" xmlns:xhtml=\"http://www.w3.org/1999/xhtml\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:admin=\"http://marklogic.com/xdmp/admin\" xmlns=\"http://marklogic.com/xdmp/group\"><?xdmp-annotations?><xs:annotation><xs:documentation>&#10; ...</xs:schema>\r\n    $datanode = <groups xsi:schemaLocation=\"http://marklogic.com/xdmp/group group.xsd\" timestamp=\"13581552257170000\" xmlns=\"http://marklogic.com/xdmp/group\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"><group><group-name>Default</group-name><group-id>738043912106476...</groups>\r\n    $gid = gr:group-id(\"7380439121064767732\")\r\n    $g = <group xmlns=\"http://marklogic.com/xdmp/group\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"><group-name>Default</group-name><group-id>7380439121064767732</g...</group>\r\n\r\nIn /namespace-admin-go.xqy on line 120\r\n\r\n    $confirm = \"42\"\r\n    $mode = \"group\"\r\n    $cancel = \"\"\r\n    $schemaroot = <xs:schema targetNamespace=\"http://marklogic.com/xdmp/group\" xsi:schemaLocation=\"http://www.w3.org/2001/XMLSchema XMLSchema.xsd http://marklogic....\" attributeFormDefault=\"unqualified\" elementFormDefault=\"unqualified\" xmlns:xhtml=\"http://www.w3.org/1999/xhtml\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:admin=\"http://marklogic.com/xdmp/admin\" xmlns=\"http://marklogic.com/xdmp/group\"><?xdmp-annotations?><xs:annotation><xs:documentation>&#10; ...</xs:schema>\r\n    $datanode = <groups xsi:schemaLocation=\"http://marklogic.com/xdmp/group group.xsd\" timestamp=\"13581552257170000\" xmlns=\"http://marklogic.com/xdmp/group\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"><group><group-name>Default</group-name><group-id>738043912106476...</groups>\r\n\r\n\t\r\n", "samplequery":"", "sampledata":"", "version":"7.0-nightly", "tofixin":"7.0-ea1", "fixedin":"7.0-ea1", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, {"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, {"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, {"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[], "cloneOf":"", "support":{"headline":"", "supportDescription":"", "publishStatus":"Never Publish", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["adminGUI", "knagar"], "changeHistory":[{"time":"2013-01-14T01:24:07.559309-08:00", "updatedBy":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "change":{"assignTo":{"from":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "to":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-16T11:53:21.811783-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-17T21:04:18.526927-08:00", "updatedBy":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Regression from 20445?"}, {"time":"2013-01-17T21:04:18.526927-08:00", "updatedBy":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gchinchwadkar", "name":"Gajanan Chinchwadkar", "email":"Gajanan.Chinchwadkar@marklogic.com"}, "to":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}}}, "files":[], "show":true}, {"time":"2013-01-17T22:17:57.60226-08:00", "updatedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"128223", "paths":["xdmp/trunk/src/Admin/namespace-admin-go.xqy"], "affectedBugs":[]}, "comment":"bug:20453"}, {"time":"2013-01-17T22:18:27.887332-08:00", "updatedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"128224", "paths":["xdmp/branches/b6_0/src/Admin/namespace-admin-go.xqy"], "affectedBugs":[]}, "comment":"bug:20453"}, {"time":"2013-01-17T22:18:42.800225-08:00", "updatedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"128225", "paths":["xdmp/branches/b5_0/src/Admin/namespace-admin-go.xqy"], "affectedBugs":[]}, "comment":"bug:20453"}, {"time":"2013-01-17T22:20:17.126167-08:00", "updatedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "to":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}}}, "files":[], "show":true, "comment":"fixed in 7.0-20130118\r\n"}, {"time":"2013-01-17T22:20:17.126167-08:00", "updatedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "change":{"assignTo":{"from":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "to":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-18T07:30:24.55304-08:00", "updatedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/docsvn", "revision":"6179", "paths":["docs/trunk/modules/admin.xml"], "affectedBugs":[]}, "comment":"bug:20453"}, {"time":"2013-01-18T07:49:40.131495-08:00", "updatedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"128281", "paths":["xdmp/trunk/src/Modules/MarkLogic/security.xqy", "xdmp/trunk/src/Config/security.xml"], "affectedBugs":[]}, "comment":"bug:20453"}, {"time":"2013-01-18T07:52:53.635346-08:00", "updatedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/docsvn", "revision":"6180", "paths":["docs/trunk/modules/security.xml"], "affectedBugs":[]}, "comment":"bug:20453"}, {"time":"2013-01-22T03:32:52.102412-08:00", "updatedBy":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"Verified and already having UISchemaNamespaceValidate4594.java in regression, so shipping this.\r\n\r\nThanks\r\nKuldeep"}], "updatedAt":"2013-01-22T03:32:52.102412-08:00", "fixedAt":"2013-01-17T22:20:17.126167-08:00", "fixedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "shippedAt":"2013-01-22T03:32:52.102412-08:00", "shippedBy":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "renderDescriptionAs":"normal"}