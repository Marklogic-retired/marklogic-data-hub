{"id":20154, "kind":"Bug", "createdAt":"2012-11-28T15:57:03.132064-08:00", "status":"Closed", "title":"Consistency of values with search for directory and collections", "category":"MarkLogic REST API", "severity":"Minor", "priority":{"level":"2", "title":"Not required for product release"}, "submittedBy":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"Use Case: Convenience when restricting values to documents in a directory or belonging to collections.\r\n\r\nThe  /v1/search endpoint supports query criteria parameters for any number of collections and zero or one directory.  For consistency, the /v1/values endpoint should support the same parameters.\r\n\r\nIn Java, the ValuesDefinition class should add methods parallel with those of QueryDefinition to specify collections and a directory.", "samplequery":"", "sampledata":"", "version":"6.0-1", "tofixin":"7.0-2", "fixedin":"7.0-2", "platform":"all", "memory":"", "processors":"", "note":"Test: rest-client-api-values-bugs.xml", "subscribers":[{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, {"username":"cgreer", "name":"Charles Greer", "email":"charles.greer@marklogic.com"}, {"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, {"username":"vkorolev", "name":"Vitaly Korolev", "email":"vitaly.korolev@marklogic.com"}], "attachments":[{"name":"Workspace with steps to reproduce the issue", "uri":"root/support/bugtracking/attachments/20154/Workspace - collections with values.xml.zip"}], "relationships":[{"type":"", "to":""}], "clones":[], "cloneOf":"", "support":{"headline":"Collection and directory filtering parameters missing for REST API values requests", "supportDescription":"The REST API supports requests for lists of values or for tuples of value co-occurrence in documents as well as search requests. Search requests can take any number of collection parameters and zero or one directory parameters to filter the results.\r\n\r\nThe values requests did not accept collections parameters nor a directory parameter to filter the results similar to search. \r\n", "publishStatus":"Publish", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["MarkLogic REST API", "ehennum"], "changeHistory":[{"time":"2012-11-28T15:57:03.132064-08:00", "updatedBy":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "change":{"assignTo":{"from":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "to":{"username":"cgreer", "name":"Charles Greer", "email":"charles.greer@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-15T13:15:14.838011-08:00", "updatedBy":{"username":"cgreer", "name":"Charles Greer", "email":"charles.greer@marklogic.com"}, "change":{"assignTo":{"from":{"username":"cgreer", "name":"Charles Greer", "email":"charles.greer@marklogic.com"}, "to":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-15T14:44:15.709732-08:00", "updatedBy":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "change":{"status":{"from":"", "to":"Fix"}, "assignTo":{"from":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "to":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}}}, "files":[], "show":true, "comment":"patch in review"}, {"time":"2013-02-15T19:31:00.913806-08:00", "updatedBy":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"132031", "paths":["xdmp/trunk/src/Modules/MarkLogic/rest-api/models/values-model.xqy", "xdmp/trunk/src/Modules/MarkLogic/rest-api/endpoints/config.xqy", "xdmp/trunk/src/Apps/test/appservices/restapi-unittest/values-unittest.xqy"], "affectedBugs":[]}, "comment":"Bug:20154 collection and directory parameters for values endpoint"}, {"time":"2013-02-15T19:32:03.778621-08:00", "updatedBy":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "to":{"username":"vkorolev", "name":"Vitaly Korolev", "email":"vitaly.korolev@marklogic.com"}}}, "files":[], "show":true, "comment":"directory and collection parameters for scoping values results"}, {"time":"2013-02-15T19:32:03.778621-08:00", "updatedBy":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "change":{"assignTo":{"from":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "to":{"username":"vkorolev", "name":"Vitaly Korolev", "email":"vitaly.korolev@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-25T15:19:26.07275-08:00", "updatedBy":{"username":"vkorolev", "name":"Vitaly Korolev", "email":"vitaly.korolev@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"This will require a few new tests for various valid and invalid combinations with the new parameters. Plus some tests for interactions with existing parameters."}, {"time":"2013-02-27T14:57:55.136297-08:00", "updatedBy":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"This is enhancements done in 7.0 and not bug fixes to existing endpoints. Testing this will be done post EA1."}, {"time":"2013-06-25T10:56:08.687123-07:00", "updatedBy":{"username":"vkorolev", "name":"Vitaly Korolev", "email":"vitaly.korolev@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"I tested a happy path and will need to add more tests for full coverage."}, {"time":"2013-10-07T13:18:09.747517-07:00", "updatedBy":{"username":"vkorolev", "name":"Vitaly Korolev", "email":"vitaly.korolev@marklogic.com"}, "change":{"status":{"from":"", "to":"Fix"}, "assignTo":{"from":{"username":"vkorolev", "name":"Vitaly Korolev", "email":"vitaly.korolev@marklogic.com"}, "to":{"username":"vkorolev", "name":"Vitaly Korolev", "email":"vitaly.korolev@marklogic.com"}}}, "files":[], "show":true, "comment":"I'm pretty sure this worked when it was fixed in February, but it seems like something changed. I'm sorry it's combing back so late in the game. Also attaching workspace with setup and test."}, {"time":"2013-10-07T15:18:33.375547-07:00", "updatedBy":{"username":"vkorolev", "name":"Vitaly Korolev", "email":"vitaly.korolev@marklogic.com"}, "change":{"assignTo":{"from":{"username":"vkorolev", "name":"Vitaly Korolev", "email":"vitaly.korolev@marklogic.com"}, "to":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-10-07T22:25:21.70308-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"What is the priority on this defect? Please assign it. Thanks"}, {"time":"2013-10-11T09:09:36.653358-07:00", "updatedBy":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"patch in review"}, {"time":"2013-10-11T14:41:17.195168-07:00", "updatedBy":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"153476", "paths":["xdmp/trunk/src/Apps/test/appservices/restapi-unittest/searchjson-unittest.xqy", "xdmp/trunk/src/Modules/MarkLogic/rest-api/models/values-model.xqy", "xdmp/trunk/src/Modules/MarkLogic/rest-api/lib/search-util.xqy"], "affectedBugs":[]}, "comment":"Bug:20154 collection and directory parameters in the values query instead of options"}, {"time":"2013-10-11T14:42:46.203599-07:00", "updatedBy":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "to":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}}}, "files":[], "show":true, "comment":"Vitaly's new test should pass now."}, {"time":"2013-10-11T14:42:46.203599-07:00", "updatedBy":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "change":{"assignTo":{"from":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "to":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-10-18T15:45:01.404449-07:00", "updatedBy":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"Verified on 1018 build. The scenario from the workspace is automated as rest-client-api-bug-20154.xml and is added to 7.0 regression.\r\n\r\nCreated following task to add more coverage that Vitaly plans to add.\r\n http://bugtrack.marklogic.com/24670"}, {"time":"2013-10-18T15:45:01.404449-07:00", "updatedBy":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "change":{"assignTo":{"from":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-12-16T14:09:38.218636-08:00", "updatedBy":{"username":"vkorolev", "name":"Vitaly Korolev", "email":"vitaly.korolev@marklogic.com"}, "change":{"status":{"from":"", "to":"Fix"}, "assignTo":{"from":{"username":"vkorolev", "name":"Vitaly Korolev", "email":"vitaly.korolev@marklogic.com"}, "to":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}}}, "files":[], "show":true, "comment":"Looks like we need to resurrect this bug. Collection and directory parameters are accepted, but have no effect on results. Tests in included workspace should still be valid."}, {"time":"2013-12-16T14:09:38.218636-08:00", "updatedBy":{"username":"vkorolev", "name":"Vitaly Korolev", "email":"vitaly.korolev@marklogic.com"}, "change":{"assignTo":{"from":{"username":"vkorolev", "name":"Vitaly Korolev", "email":"vitaly.korolev@marklogic.com"}, "to":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-12-16T14:09:38.218636-08:00", "updatedBy":{"username":"vkorolev", "name":"Vitaly Korolev", "email":"vitaly.korolev@marklogic.com"}, "change":{"tofixin":{"from":"7.0-1", "to":"7.0-2"}}, "files":[], "show":true}, {"time":"2013-12-16T15:36:55.706138-08:00", "updatedBy":{"username":"vkorolev", "name":"Vitaly Korolev", "email":"vitaly.korolev@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"It turns out that parameters work along with q parameter, but not by themselves."}, {"time":"2013-12-17T08:51:43.187154-08:00", "updatedBy":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"patch in review"}, {"time":"2013-12-17T09:02:52.289433-08:00", "updatedBy":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"157447", "paths":["xdmp/trunk/src/Apps/test/appservices/restapi-unittest/values-unittest.xqy", "xdmp/trunk/src/Modules/MarkLogic/rest-api/lib/search-util.xqy"], "affectedBugs":[]}, "comment":"Bug:20154 use collection and directory param with or without query param"}, {"time":"2013-12-17T09:03:52.664243-08:00", "updatedBy":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"157448", "paths":["xdmp/branches/b7_0/src/Modules/MarkLogic/rest-api/lib/search-util.xqy", "xdmp/branches/b7_0/src/Apps/test/appservices/restapi-unittest/values-unittest.xqy"], "affectedBugs":[]}, "comment":"Bug:20154 use collection and directory param with or without query param"}, {"time":"2013-12-17T09:05:07.719649-08:00", "updatedBy":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "to":{"username":"vkorolev", "name":"Vitaly Korolev", "email":"vitaly.korolev@marklogic.com"}}}, "files":[], "show":true, "comment":"Should be fixed now for both search and values on both 7 branch and trunk"}, {"time":"2013-12-17T09:05:07.719649-08:00", "updatedBy":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "change":{"assignTo":{"from":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "to":{"username":"vkorolev", "name":"Vitaly Korolev", "email":"vitaly.korolev@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-12-18T09:54:50.10084-08:00", "updatedBy":{"username":"vkorolev", "name":"Vitaly Korolev", "email":"vitaly.korolev@marklogic.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"vkorolev", "name":"Vitaly Korolev", "email":"vitaly.korolev@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"Fix confirmed and tests are passing in regression."}, {"time":"2014-02-02T07:48:53.791656-08:00", "updatedBy":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "change":{"status":{"from":"", "to":"Closed"}, "assignTo":{"from":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"ga"}], "updatedAt":"2014-02-02T07:48:53.791656-08:00", "fixedAt":"2013-12-17T09:05:07.719649-08:00", "fixedBy":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "shippedAt":"2013-12-18T09:54:50.10084-08:00", "shippedBy":{"username":"vkorolev", "name":"Vitaly Korolev", "email":"vitaly.korolev@marklogic.com"}, "closedAt":"2014-02-02T07:48:53.791656-08:00", "closedBy":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "renderDescriptionAs":"normal"}