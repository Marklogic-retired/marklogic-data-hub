{"id":20559, "kind":"Bug", "createdAt":"2013-01-20T23:05:18.423839-08:00", "status":"Closed", "title":" Test harness called mladmin abort on 6.0 Linux 64 RH6 machine in test xdmp-db-backup-ja.xml, as following XQuery did not finished in 30 minutes, which usually get completed in the said time.", "category":"xdmp", "severity":"Major", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"sanand", "name":"Sumit Anand", "email":"Sumit.Anand@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"Test harness called mladmin abort on 6.0 Linux 64 RH6 machine in test xdmp-db-backup-ja.xml, as following XQuery did not finished in 30 minutes, which usually get completed in the said time.\r\n\r\nTest name : xdmp-db-backup-ja.xml\r\nMachine name : rh6-intel64-43-test-2\r\nML Version : 20130120\r\nPath to Error Log : /space/builder/builds/linux64/b5_0/logs.20130120.0/reg-results/ErrorLog.txt\r\nPath to pstack log : /space/builder/builds/linux64/b5_0/logs.20130120.0/reg-results/pstack.log\r\n\r\nThread causing sigabrt: \r\n__________________\r\n\r\nThread 1 (Thread 0x7fcf4c671740 (LWP 13148)):\r\n#0 0x000000342380f05d in waitpid () from /lib64/libpthread.so.0\r\n#1 0x00000000025542b9 in xdmp::pstack(char const*) ()\r\n#2 0x000000000255443a in sigabrtHandler ()\r\n#3 < signal handler called >\r\n#4 0x000000342380eced in nanosleep () from /lib64/libpthread.so.0\r\n#5 0x0000000002ab9951 in svc::Thread::sleep(unsigned int) ()\r\n#6 0x000000000256dd2a in xdmp::Server::background() ()\r\n#7 0x00000000025816a5 in xdmp::run() ()\r\n#8 0x000000000258419c in xdmp::Server::main(int, char const**) ()\r\n#9 0x000000342301ec5d in __libc_start_main () from /lib64/libc.so.6\r\n\r\n#10 0x00000000009a9a09 in _start ()\t\r\n\r\n\r\nComplete stack trace:\r\n_________________\r\n\r\nAbort in thread 140528316782400\r\nThread 62 (Thread 0x7fcd66fff710 (LWP 13149)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002ab9cbe in svc::StarterThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 61 (Thread 0x7fcd66fe0710 (LWP 13150)):\r\n#0 0x000000342380e80d in accept () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa9946 in svc::Socket::accept(sockaddr_in&) ()\r\n#2 0x00000000028ddfe3 in xdmp::XDQPServerThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 60 (Thread 0x7fcd66fc1710 (LWP 13151)):\r\n#0 0x000000342380eced in nanosleep () from /lib64/libpthread.so.0\r\n#1 0x0000000002ab9951 in svc::Thread::sleep(unsigned int) ()\r\n#2 0x00000000019827d8 in xdmp::ClusterManager::clusterThread() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 59 (Thread 0x7fcd65bff710 (LWP 13153)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 58 (Thread 0x7fcd65781710 (LWP 13155)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 57 (Thread 0x7fcd65303710 (LWP 13157)):\r\n#0 0x000000342380e80d in accept () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa9946 in svc::Socket::accept(sockaddr_in&) ()\r\n#2 0x0000000001834f09 in xdmp::AppServerThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 56 (Thread 0x7fcd64bff710 (LWP 13158)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 55 (Thread 0x7fcf49111710 (LWP 13159)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000001be6a65 in xdmp::Forest::getHBInfo(xdmp::HBInfo&) const ()\r\n#3 0x0000000001c3fbbb in xdmp::ForestHBInfoCreateTask::run() ()\r\n#4 0x0000000002abd170 in svc::PooledThread::run() ()\r\n#5 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#6 0x0000000002abae99 in runThread ()\r\n#7 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#8 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 54 (Thread 0x7fcf4c462710 (LWP 13160)):\r\n#0 0x000000342380e80d in accept () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa9946 in svc::Socket::accept(sockaddr_in&) ()\r\n#2 0x0000000001834f09 in xdmp::AppServerThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 53 (Thread 0x7fcd63eff710 (LWP 13161)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 52 (Thread 0x7fcf4c443710 (LWP 13162)):\r\n#0 0x000000342380e80d in accept () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa9946 in svc::Socket::accept(sockaddr_in&) ()\r\n#2 0x0000000001834f09 in xdmp::AppServerThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 51 (Thread 0x7fcf4c424710 (LWP 13164)):\r\n#0 0x000000342380e80d in accept () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa9946 in svc::Socket::accept(sockaddr_in&) ()\r\n#2 0x0000000001834f09 in xdmp::AppServerThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 50 (Thread 0x7fcd62bff710 (LWP 13165)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 49 (Thread 0x7fcd66c43710 (LWP 13167)):\r\n#0 0x000000342380e80d in accept () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa9946 in svc::Socket::accept(sockaddr_in&) ()\r\n#2 0x0000000001834f09 in xdmp::AppServerThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 48 (Thread 0x7fcd61b00710 (LWP 13169)):\r\n#0 0x000000342380e80d in accept () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa9946 in svc::Socket::accept(sockaddr_in&) ()\r\n#2 0x0000000001834f09 in xdmp::AppServerThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 47 (Thread 0x7fcd615e2710 (LWP 13171)):\r\n#0 0x000000342380e80d in accept () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa9946 in svc::Socket::accept(sockaddr_in&) ()\r\n#2 0x0000000001834f09 in xdmp::AppServerThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 46 (Thread 0x7fcd615c3710 (LWP 13172)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 45 (Thread 0x7fcd611c4710 (LWP 13173)):\r\n#0 0x000000342380e80d in accept () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa9946 in svc::Socket::accept(sockaddr_in&) ()\r\n#2 0x0000000001834f09 in xdmp::AppServerThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 44 (Thread 0x7fcd60da6710 (LWP 13175)):\r\n#0 0x000000342380e80d in accept () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa9946 in svc::Socket::accept(sockaddr_in&) ()\r\n#2 0x0000000002896997 in xdmp::XDBCServerThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 43 (Thread 0x7fcd56186710 (LWP 13259)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 42 (Thread 0x7fcd56107710 (LWP 13260)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 41 (Thread 0x7fcd43fff710 (LWP 13261)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 40 (Thread 0x7fcd5fbff710 (LWP 13368)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000001c64c9f in xdmp::Forest::updateConfig(svc::Handle< xdmp::ForestInfo > const&) ()\r\n#3 0x00000000018a5da1 in xdmp::LocalAssignment::updateConfig(svc::Handle< xdmp::AssignmentInfo > const&) ()\r\n#4 0x00000000018b2987 in xdmp::AssignmentManager::updateConfig(std::vector< svc::Handle, std::allocator<svc::Handle > > const&, xdmp::Cluster&) ()\r\n#5 0x00000000018be6e6 in xdmp::AssignmentConfig::loadConfig(xdmp::LocationInfo const&, xdmp::DynamicEnv const&, svc::Handle< xdmp::StaticEnv > const&) ()\r\n#6 0x00000000019cff58 in xdmp::Config::writeFile(xdmp::LocationInfo const&, xdmp::DynamicEnv const&, svc::Handle< xdmp::StaticEnv > const&, std::basic_string, std::allocator > const&, xdmp::Node const&, bool) ()\r\n#7 0x00000000017ff610 in xdmp::xdmp_write_cluster_config_file(svc::Handle< xdmp::ThreeArgBuiltinExpr > const&, xdmp::LocationInfo const&, xdmp::DynamicEnv&, svc::Handle const&, svc::Handle const&, svc::Handle const&, svc::Handle const&) ()\r\n#8 0x0000000001933179 in xdmp::ThreeArgBuiltinExpr::_eval(xdmp::DynamicEnv&, std::vector< svc::Handle, std::allocator<svc::Handle > > const&, svc::Handle&) const ()\r\n#9 0x00000000019319fc in xdmp::BuiltinEnv::eval() ()\r\n#10 0x000000000193b9c9 in xdmp::Value::builtinArg(xdmp::BuiltinEnv&) const ()\r\n#11 0x000000000193ba02 in xdmp::Value::builtinArg(xdmp::BuiltinEnv&) const ()\r\n#12 0x000000000193fee4 in xdmp::BuiltinExpr::eval(xdmp::DynamicEnv&, svc::Handle< xdmp::Value >&) const ()\r\n#13 0x0000000001610f6b in xdmp::IfExpr::eval(xdmp::DynamicEnv&, svc::Handle< xdmp::Value >&) const ()\r\n#14 0x00000000015fa592 in xdmp::ExprSequence::eval(xdmp::DynamicEnv&, svc::Handle< xdmp::Value >&) const ()\r\n#15 0x00000000015dfd4f in xdmp::FLWORExpr::_flworEval(xdmp::FLWOREnv&) const ()\r\n#16 0x0000000001614ac0 in xdmp::LetClause::flworEval(xdmp::FLWOREnv&, xdmp::FLWORExpr const&, unsigned long) const ()\r\n#17 0x0000000001614861 in xdmp::LetClause::flworEval(xdmp::FLWOREnv&, xdmp::FLWORExpr const&, unsigned long) const ()\r\n#18 0x0000000001614861 in xdmp::LetClause::flworEval(xdmp::FLWOREnv&, xdmp::FLWORExpr const&, unsigned long) const ()\r\n#19 0x0000000001614861 in xdmp::LetClause::flworEval(xdmp::FLWOREnv&, xdmp::FLWORExpr const&, unsigned long) const ()\r\n#20 0x0000000001614861 in xdmp::LetClause::flworEval(xdmp::FLWOREnv&, xdmp::FLWORExpr const&, unsigned long) const ()\r\n#21 0x0000000001614861 in xdmp::LetClause::flworEval(xdmp::FLWOREnv&, xdmp::FLWORExpr const&, unsigned long) const ()\r\n#22 0x0000000001614861 in xdmp::LetClause::flworEval(xdmp::FLWOREnv&, xdmp::FLWORExpr const&, unsigned long) const ()\r\n#23 0x0000000001615e76 in xdmp::FLWORExpr::eval(xdmp::DynamicEnv&, svc::Handle< xdmp::Value >&) const ()\r\n#24 0x00000000015fa592 in xdmp::ExprSequence::eval(xdmp::DynamicEnv&, svc::Handle< xdmp::Value >&) const ()\r\n#25 0x0000000001602e61 in xdmp::FunctionEnv::eval() ()\r\n#26 0x00000000016571a8 in xdmp::Value::functinArg(xdmp::FunctionEnv&) const ()\r\n#27 0x000000000167038c in xdmp::FunctionCall::eval(xdmp::DynamicEnv&, svc::Handle< xdmp::Value >&) const ()\r\n#28 0x00000000016149e2 in xdmp::LetClause::flworEval(xdmp::FLWOREnv&, xdmp::FLWORExpr const&, unsigned long) const ()\r\n#29 0x0000000001615e76 in xdmp::FLWORExpr::eval(xdmp::DynamicEnv&, svc::Handle< xdmp::Value >&) const ()\r\n#30 0x00000000015fa592 in xdmp::ExprSequence::eval(xdmp::DynamicEnv&, svc::Handle< xdmp::Value >&) const ()\r\n#31 0x0000000001602e61 in xdmp::FunctionEnv::eval() ()\r\n#32 0x00000000016571a8 in xdmp::Value::functinArg(xdmp::FunctionEnv&) const ()\r\n#33 0x000000000167038c in xdmp::FunctionCall::eval(xdmp::DynamicEnv&, svc::Handle< xdmp::Value >&) const ()\r\n#34 0x0000000001611001 in xdmp::IfExpr::eval(xdmp::DynamicEnv&, svc::Handle< xdmp::Value >&) const ()\r\n#35 0x00000000015dfd4f in xdmp::FLWORExpr::_flworEval(xdmp::FLWOREnv&) const ()\r\n#36 0x0000000001614ac0 in xdmp::LetClause::flworEval(xdmp::FLWOREnv&, xdmp::FLWORExpr const&, unsigned long) const ()\r\n#37 0x0000000001614861 in xdmp::LetClause::flworEval(xdmp::FLWOREnv&, xdmp::FLWORExpr const&, unsigned long) const ()\r\n#38 0x0000000001614861 in xdmp::LetClause::flworEval(xdmp::FLWOREnv&, xdmp::FLWORExpr const&, unsigned long) const ()\r\n#39 0x0000000001615e76 in xdmp::FLWORExpr::eval(xdmp::DynamicEnv&, svc::Handle< xdmp::Value >&) const ()\r\n#40 0x0000000001657f89 in xdmp::StatementExpr::eval(xdmp::DynamicEnv&, svc::Handle< xdmp::Value >&) const ()\r\n#41 0x000000000295b7c2 in xdmp::Statement::_eval(xdmp::DynamicEnv&, svc::Handle< xdmp::StaticEnv > const&, svc::Handle const&, bool&) const ()\r\n#42 0x000000000295c2cb in xdmp::Statement::eval(xdmp::DynamicEnv&, svc::Handle< xdmp::StaticEnv > const&, svc::Handle const&, char const*) const ()\r\n#43 0x00000000029692d5 in xdmp::Program::eval(xdmp::LocationInfo const&, xdmp::DynamicEnv&, svc::Handle< xdmp::StaticEnv > const&, svc::Handle const&, char const*, bool, std::vector<svc::Handle, std::allocator<svc::Handle > >*) const ()\r\n#44 0x000000000288f201 in xdmp::XDBCConnectionTask::handleEval(xdmp::DynamicEnv&, svc::Handle< xdmp::StaticEnv > const&, svc::Handle, bool, xdmp::Dialect, bool&) ()\r\n#45 0x000000000289a84f in xdmp::XDBCConnectionTask::handleConnection() ()\r\n#46 0x000000000289d3ea in xdmp::XDBCConnectionTask::run() ()\r\n#47 0x0000000002abd170 in svc::PooledThread::run() ()\r\n#48 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#49 0x0000000002abae99 in runThread ()\r\n#50 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#51 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 39 (Thread 0x7fcd619e1710 (LWP 13413)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 38 (Thread 0x7fcd58a83710 (LWP 13415)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 37 (Thread 0x7fcd63f7f710 (LWP 13532)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 36 (Thread 0x7fcd633ff710 (LWP 13535)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 35 (Thread 0x7fcd39014710 (LWP 13590)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 34 (Thread 0x7fcd3bc09710 (LWP 13698)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 33 (Thread 0x7fcd5a882710 (LWP 13731)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000001bf2fa4 in xdmp::Forest::journalArchiveFinish(std::basic_string< char, std::char_traits, std::allocator > const&, bool, bool, bool, unsigned long) ()\r\n#3 0x0000000001bf3d00 in xdmp::Forest::doBackupFinish(std::basic_string< char, std::char_traits, std::allocator > const&, svc::FileCtl&, bool, bool, std::basic_string, std::allocator > const&, unsigned int, xdmp::RecoveryToken const&, unsigned long, unsigned long, unsigned long) ()\r\n#4 0x0000000001cdccf6 in xdmp::Forest::doBackup(std::basic_string< char, std::char_traits, std::allocator > const&, svc::Handle const&, svc::Handle const&, unsigned long, bool, bool, std::basic_string, std::allocator > const&, unsigned int) ()\r\n#5 0x0000000001cde8d5 in xdmp::ForestBackupTask::run() ()\r\n#6 0x0000000002ab6592 in svc::TaskManager::runTask(svc::Handle< svc::Task > const&) ()\r\n#7 0x0000000002ab7132 in svc::TaskManager::scheduler() ()\r\n#8 0x0000000002abd170 in svc::PooledThread::run() ()\r\n#9 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#10 0x0000000002abae99 in runThread ()\r\n#11 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#12 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 32 (Thread 0x7fcd63a00710 (LWP 14016)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 31 (Thread 0x7fcd34c01710 (LWP 14628)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000001f5339c in xdmp::JournalConsumer::consumerThread() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 30 (Thread 0x7fcd33806710 (LWP 14699)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 29 (Thread 0x7fcd63882710 (LWP 14777)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 28 (Thread 0x7fcd66182710 (LWP 14845)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 27 (Thread 0x7fcd4abff710 (LWP 14874)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 26 (Thread 0x7fcd56905710 (LWP 14944)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 25 (Thread 0x7fcd6088a710 (LWP 14945)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 24 (Thread 0x7fcd56507710 (LWP 14946)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 23 (Thread 0x7fcd65800710 (LWP 14959)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 22 (Thread 0x7fcd63901710 (LWP 14960)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 21 (Thread 0x7fcd63282710 (LWP 14969)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 20 (Thread 0x7fcd5ab80710 (LWP 14970)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 19 (Thread 0x7fcd66103710 (LWP 14971)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 18 (Thread 0x7fcd48bff710 (LWP 14972)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 17 (Thread 0x7fcd56782710 (LWP 14973)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 16 (Thread 0x7fcd49b80710 (LWP 14974)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 15 (Thread 0x7fcd63203710 (LWP 14976)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 14 (Thread 0x7fcd5db7f710 (LWP 14978)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 13 (Thread 0x7fcd663ff710 (LWP 14980)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 12 (Thread 0x7fcd56b01710 (LWP 14981)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 11 (Thread 0x7fcd5ed06710 (LWP 14994)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 10 (Thread 0x7fcd4ab80710 (LWP 14996)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 9 (Thread 0x7fcd63184710 (LWP 14997)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 8 (Thread 0x7fcd60988710 (LWP 14998)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 7 (Thread 0x7fcd58b02710 (LWP 15001)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 6 (Thread 0x7fcd5ef81710 (LWP 15010)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 5 (Thread 0x7fcd5dbff710 (LWP 15049)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 4 (Thread 0x7fcd58808710 (LWP 15062)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 3 (Thread 0x7fcd56488710 (LWP 15064)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 2 (Thread 0x7fcd63380710 (LWP 15076)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 1 (Thread 0x7fcf4c671740 (LWP 13148)):\r\n#0 0x000000342380f05d in waitpid () from /lib64/libpthread.so.0\r\n#1 0x00000000025542b9 in xdmp::pstack(char const*) ()\r\n#2 0x000000000255443a in sigabrtHandler ()\r\n#3 < signal handler called >\r\n#4 0x000000342380eced in nanosleep () from /lib64/libpthread.so.0\r\n#5 0x0000000002ab9951 in svc::Thread::sleep(unsigned int) ()\r\n#6 0x000000000256dd2a in xdmp::Server::background() ()\r\n#7 0x00000000025816a5 in xdmp::run() ()\r\n#8 0x000000000258419c in xdmp::Server::main(int, char const**) ()\r\n#9 0x000000342301ec5d in __libc_start_main () from /lib64/libc.so.6\r\n#10 0x00000000009a9a09 in _start ()\t\r\n", "samplequery":"xquery version \"1.0-ml\";\r\n        declare namespace admin=\"http://marklogic.com/xdmp/admin\";\r\n        import module \"http://marklogic.com/xdmp/admin\" at \"/MarkLogic/admin.xqy\";\r\n        let $config := admin:get-configuration()\r\n        let $primary-host := fn:data(xdmp:host-status(xdmp:host())//*:assignment[fn:contains(*:forest-name, \"Security\")]/*:host-id)\r\n        let $c := admin:forest-create($config,\"backupF1\", $primary-host,())\r\n        return\r\n          if (admin:forest-get-name($c,admin:forest-get-id($c,\"backupF1\")) ne \"backupF1\" )\r\n           then fn:concat(\"Error: forest-create\")\r\n          else admin:save-configuration($c)", "sampledata":"", "version":"6.0-1", "tofixin":"6.0-3", "fixedin":"6.0-3", "platform":"linux(64-bit)", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"sanand", "name":"Sumit Anand", "email":"Sumit.Anand@marklogic.com"}, {"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}, {"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}, {"username":"wfeick", "name":"Wayne Feick", "email":"wfeick@marklogic.com"}], "attachments":[{"name":"Error Log", "uri":"root/support/bugtracking/attachments/20526/ErrorLog.zip"}, {"name":"Process status of machine during sigabrt ", "uri":"root/support/bugtracking/attachments/20526/pstack.log"}], "relationships":[{"type":"", "to":""}], "clones":[], "cloneOf":20526, "support":{"headline":"", "supportDescription":"", "publishStatus":"Never Publish", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["xdmp", "sanand"], "changeHistory":[{"time":"2013-01-20T23:05:18.423839-08:00", "updatedBy":{"username":"sanand", "name":"Sumit Anand", "email":"Sumit.Anand@marklogic.com"}, "change":{"assignTo":{"from":{"username":"sanand", "name":"Sumit Anand", "email":"Sumit.Anand@marklogic.com"}, "to":{"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-21T11:21:48.051025-08:00", "updatedBy":{"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}, "change":{"assignTo":{"from":{"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}, "to":{"username":"wfeick", "name":"Wayne Feick", "email":"wfeick@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-21T13:37:59.07229-08:00", "updatedBy":{"username":"wfeick", "name":"Wayne Feick", "email":"wfeick@marklogic.com"}, "change":{"tofixin":{"from":"5.0-5", "to":"5.0-6"}}, "files":[], "show":true}, {"time":"2013-01-22T15:05:11.382182-08:00", "updatedBy":{"username":"wfeick", "name":"Wayne Feick", "email":"wfeick@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Here are the three stack frames that look to be relevant.\r\n\r\nThread 55 (Thread 0x7fcf49111710 (LWP 13159)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000001be6a65 in xdmp::Forest::getHBInfo(xdmp::HBInfo&) const ()\r\n#3 0x0000000001c3fbbb in xdmp::ForestHBInfoCreateTask::run() ()\r\n#4 0x0000000002abd170 in svc::PooledThread::run() ()\r\n#5 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#6 0x0000000002abae99 in runThread ()\r\n#7 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#8 0x00000034230e153d in clone () from /lib64/libc.so.6\r\n\r\nThread 40 (Thread 0x7fcd5fbff710 (LWP 13368)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000001c64c9f in xdmp::Forest::updateConfig(svc::Handle< xdmp::ForestInfo > const&) ()\r\n#3 0x00000000018a5da1 in xdmp::LocalAssignment::updateConfig(svc::Handle< xdmp::AssignmentInfo > const&) ()\r\n#4 0x00000000018b2987 in xdmp::AssignmentManager::updateConfig(std::vector< svc::Handle, std::allocator<svc::Handle > > const&, xdmp::Cluster&) ()\r\n#5 0x00000000018be6e6 in xdmp::AssignmentConfig::loadConfig(xdmp::LocationInfo const&, xdmp::DynamicEnv const&, svc::Handle< xdmp::StaticEnv > const&) ()\r\n#6 0x00000000019cff58 in xdmp::Config::writeFile(xdmp::LocationInfo const&, xdmp::DynamicEnv const&, svc::Handle< xdmp::StaticEnv > const&, std::basic_string, std::allocator > const&, xdmp::Node const&, bool) ()\r\n#7 0x00000000017ff610 in xdmp::xdmp_write_cluster_config_file(svc::Handle< xdmp::ThreeArgBuiltinExpr > const&, xdmp::LocationInfo const&, xdmp::DynamicEnv&, svc::Handle const&, svc::Handle const&, svc::Handle const&, svc::Handle const&) ()\r\n#8 0x0000000001933179 in xdmp::ThreeArgBuiltinExpr::_eval(xdmp::DynamicEnv&, std::vector< svc::Handle, std::allocator<svc::Handle > > const&, svc::Handle&) const ()\r\n#9 0x00000000019319fc in xdmp::BuiltinEnv::eval() ()\r\n#10 0x000000000193b9c9 in xdmp::Value::builtinArg(xdmp::BuiltinEnv&) const ()\r\n#11 0x000000000193ba02 in xdmp::Value::builtinArg(xdmp::BuiltinEnv&) const ()\r\n#12 0x000000000193fee4 in xdmp::BuiltinExpr::eval(xdmp::DynamicEnv&, svc::Handle< xdmp::Value >&) const ()\r\n#13 0x0000000001610f6b in xdmp::IfExpr::eval(xdmp::DynamicEnv&, svc::Handle< xdmp::Value >&) const ()\r\n#14 0x00000000015fa592 in xdmp::ExprSequence::eval(xdmp::DynamicEnv&, svc::Handle< xdmp::Value >&) const ()\r\n#15 0x00000000015dfd4f in xdmp::FLWORExpr::_flworEval(xdmp::FLWOREnv&) const ()\r\n#16 0x0000000001614ac0 in xdmp::LetClause::flworEval(xdmp::FLWOREnv&, xdmp::FLWORExpr const&, unsigned long) const ()\r\n#17 0x0000000001614861 in xdmp::LetClause::flworEval(xdmp::FLWOREnv&, xdmp::FLWORExpr const&, unsigned long) const ()\r\n#18 0x0000000001614861 in xdmp::LetClause::flworEval(xdmp::FLWOREnv&, xdmp::FLWORExpr const&, unsigned long) const ()\r\n#19 0x0000000001614861 in xdmp::LetClause::flworEval(xdmp::FLWOREnv&, xdmp::FLWORExpr const&, unsigned long) const ()\r\n#20 0x0000000001614861 in xdmp::LetClause::flworEval(xdmp::FLWOREnv&, xdmp::FLWORExpr const&, unsigned long) const ()\r\n#21 0x0000000001614861 in xdmp::LetClause::flworEval(xdmp::FLWOREnv&, xdmp::FLWORExpr const&, unsigned long) const ()\r\n#22 0x0000000001614861 in xdmp::LetClause::flworEval(xdmp::FLWOREnv&, xdmp::FLWORExpr const&, unsigned long) const ()\r\n#23 0x0000000001615e76 in xdmp::FLWORExpr::eval(xdmp::DynamicEnv&, svc::Handle< xdmp::Value >&) const ()\r\n#24 0x00000000015fa592 in xdmp::ExprSequence::eval(xdmp::DynamicEnv&, svc::Handle< xdmp::Value >&) const ()\r\n#25 0x0000000001602e61 in xdmp::FunctionEnv::eval() ()\r\n#26 0x00000000016571a8 in xdmp::Value::functinArg(xdmp::FunctionEnv&) const ()\r\n#27 0x000000000167038c in xdmp::FunctionCall::eval(xdmp::DynamicEnv&, svc::Handle< xdmp::Value >&) const ()\r\n#28 0x00000000016149e2 in xdmp::LetClause::flworEval(xdmp::FLWOREnv&, xdmp::FLWORExpr const&, unsigned long) const ()\r\n#29 0x0000000001615e76 in xdmp::FLWORExpr::eval(xdmp::DynamicEnv&, svc::Handle< xdmp::Value >&) const ()\r\n#30 0x00000000015fa592 in xdmp::ExprSequence::eval(xdmp::DynamicEnv&, svc::Handle< xdmp::Value >&) const ()\r\n#31 0x0000000001602e61 in xdmp::FunctionEnv::eval() ()\r\n#32 0x00000000016571a8 in xdmp::Value::functinArg(xdmp::FunctionEnv&) const ()\r\n#33 0x000000000167038c in xdmp::FunctionCall::eval(xdmp::DynamicEnv&, svc::Handle< xdmp::Value >&) const ()\r\n#34 0x0000000001611001 in xdmp::IfExpr::eval(xdmp::DynamicEnv&, svc::Handle< xdmp::Value >&) const ()\r\n#35 0x00000000015dfd4f in xdmp::FLWORExpr::_flworEval(xdmp::FLWOREnv&) const ()\r\n#36 0x0000000001614ac0 in xdmp::LetClause::flworEval(xdmp::FLWOREnv&, xdmp::FLWORExpr const&, unsigned long) const ()\r\n#37 0x0000000001614861 in xdmp::LetClause::flworEval(xdmp::FLWOREnv&, xdmp::FLWORExpr const&, unsigned long) const ()\r\n#38 0x0000000001614861 in xdmp::LetClause::flworEval(xdmp::FLWOREnv&, xdmp::FLWORExpr const&, unsigned long) const ()\r\n#39 0x0000000001615e76 in xdmp::FLWORExpr::eval(xdmp::DynamicEnv&, svc::Handle< xdmp::Value >&) const ()\r\n#40 0x0000000001657f89 in xdmp::StatementExpr::eval(xdmp::DynamicEnv&, svc::Handle< xdmp::Value >&) const ()\r\n#41 0x000000000295b7c2 in xdmp::Statement::_eval(xdmp::DynamicEnv&, svc::Handle< xdmp::StaticEnv > const&, svc::Handle const&, bool&) const ()\r\n#42 0x000000000295c2cb in xdmp::Statement::eval(xdmp::DynamicEnv&, svc::Handle< xdmp::StaticEnv > const&, svc::Handle const&, char const*) const ()\r\n#43 0x00000000029692d5 in xdmp::Program::eval(xdmp::LocationInfo const&, xdmp::DynamicEnv&, svc::Handle< xdmp::StaticEnv > const&, svc::Handle const&, char const*, bool, std::vector<svc::Handle, std::allocator<svc::Handle > >*) const ()\r\n#44 0x000000000288f201 in xdmp::XDBCConnectionTask::handleEval(xdmp::DynamicEnv&, svc::Handle< xdmp::StaticEnv > const&, svc::Handle, bool, xdmp::Dialect, bool&) ()\r\n#45 0x000000000289a84f in xdmp::XDBCConnectionTask::handleConnection() ()\r\n#46 0x000000000289d3ea in xdmp::XDBCConnectionTask::run() ()\r\n#47 0x0000000002abd170 in svc::PooledThread::run() ()\r\n#48 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#49 0x0000000002abae99 in runThread ()\r\n#50 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#51 0x00000034230e153d in clone () from /lib64/libc.so.6\r\nThread 39 (Thread 0x7fcd619e1710 (LWP 13413)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000002abd081 in svc::PooledThread::run() ()\r\n#3 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#4 0x0000000002abae99 in runThread ()\r\n#5 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#6 0x00000034230e153d in clone () from /lib64/libc.so.6\r\n\r\nThread 33 (Thread 0x7fcd5a882710 (LWP 13731)):\r\n#0 0x000000342380d720 in sem_wait () from /lib64/libpthread.so.0\r\n#1 0x0000000002aa2cb8 in svc::Semaphore::wait(bool) const ()\r\n#2 0x0000000001bf2fa4 in xdmp::Forest::journalArchiveFinish(std::basic_string< char, std::char_traits, std::allocator > const&, bool, bool, bool, unsigned long) ()\r\n#3 0x0000000001bf3d00 in xdmp::Forest::doBackupFinish(std::basic_string< char, std::char_traits, std::allocator > const&, svc::FileCtl&, bool, bool, std::basic_string, std::allocator > const&, unsigned int, xdmp::RecoveryToken const&, unsigned long, unsigned long, unsigned long) ()\r\n#4 0x0000000001cdccf6 in xdmp::Forest::doBackup(std::basic_string< char, std::char_traits, std::allocator > const&, svc::Handle const&, svc::Handle const&, unsigned long, bool, bool, std::basic_string, std::allocator > const&, unsigned int) ()\r\n#5 0x0000000001cde8d5 in xdmp::ForestBackupTask::run() ()\r\n#6 0x0000000002ab6592 in svc::TaskManager::runTask(svc::Handle< svc::Task > const&) ()\r\n#7 0x0000000002ab7132 in svc::TaskManager::scheduler() ()\r\n#8 0x0000000002abd170 in svc::PooledThread::run() ()\r\n#9 0x0000000002aba2d8 in svc::Thread::top() ()\r\n#10 0x0000000002abae99 in runThread ()\r\n#11 0x00000034238077e1 in start_thread () from /lib64/libpthread.so.0\r\n#12 0x00000034230e153d in clone () from /lib64/libc.so.6\r\n\r\nLooking at the code, they're all waiting on the forest state semaphore. The problem is that Forest::doBackupFinish() holds the stateSemaphore when it calls Forest::journalArchiveFinish(), but tries to take the semaphore again there. This only happens if the forest is no longer in a database when the backup finishes.\r\n\r\nI expect the test is doing tear down before the backup has actually finished.\r\n"}, {"time":"2013-01-22T18:23:43.737499-08:00", "updatedBy":{"username":"wfeick", "name":"Wayne Feick", "email":"wfeick@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"128878", "paths":["xdmp/branches/b5_0/src/Forest.cpp"], "affectedBugs":[]}, "comment":"bug:20526 fixed deadlock during backup"}, {"time":"2013-01-22T18:25:57.806757-08:00", "updatedBy":{"username":"wfeick", "name":"Wayne Feick", "email":"wfeick@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"wfeick", "name":"Wayne Feick", "email":"wfeick@marklogic.com"}, "to":{"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}}}, "files":[], "show":true, "comment":"You should be able to duplicate this in test by doing a backup with journal archiving that will take some time to finish and detaching the forest from the database while the backup is running.\r\n\r\nFor the existing regression test that showed this issue, I think it's probably a bug with the test script that it deleted the test configuration before the backup had completed."}, {"time":"2013-01-22T18:25:57.806757-08:00", "updatedBy":{"username":"wfeick", "name":"Wayne Feick", "email":"wfeick@marklogic.com"}, "change":{"assignTo":{"from":{"username":"wfeick", "name":"Wayne Feick", "email":"wfeick@marklogic.com"}, "to":{"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-22T18:25:57.806757-08:00", "updatedBy":{"username":"wfeick", "name":"Wayne Feick", "email":"wfeick@marklogic.com"}, "change":{"tofixin":{"from":"5.0-6", "to":"5.0-5"}}, "files":[], "show":true}, {"time":"2013-01-22T18:28:23.418438-08:00", "updatedBy":{"username":"wfeick", "name":"Wayne Feick", "email":"wfeick@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"128879", "paths":["xdmp/branches/b6_0/src/Forest.cpp"], "affectedBugs":[]}, "comment":"bug:20559 fixed deadlock during backup"}, {"time":"2013-01-22T18:28:53.227132-08:00", "updatedBy":{"username":"wfeick", "name":"Wayne Feick", "email":"wfeick@marklogic.com"}, "change":{"tofixin":{"from":"", "to":"6.0-3"}}, "files":[], "show":true}, {"time":"2013-03-21T23:34:01.445755-07:00", "updatedBy":{"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}, "change":{"assignTo":{"from":{"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}, "to":{"username":"skottam", "name":"Sravan Kottam", "email":"Sravan.Kottam@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-04-09T10:49:59.820088-07:00", "updatedBy":{"username":"skottam", "name":"Sravan Kottam", "email":"Sravan.Kottam@marklogic.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"skottam", "name":"Sravan Kottam", "email":"Sravan.Kottam@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"Verified on the build 6.0-20130409."}], "updatedAt":"2013-04-09T10:49:59.820088-07:00", "fixedAt":"2013-01-22T18:25:57.806757-08:00", "fixedBy":{"username":"wfeick", "name":"Wayne Feick", "email":"wfeick@marklogic.com"}, "shippedAt":"2013-04-09T10:49:59.820088-07:00", "shippedBy":{"username":"skottam", "name":"Sravan Kottam", "email":"Sravan.Kottam@marklogic.com"}, "renderDescriptionAs":"normal", "renderSampleQueryAs":"normal"}