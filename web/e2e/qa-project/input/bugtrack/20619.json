{"id":20619, "kind":"Bug", "createdAt":"2013-01-28T16:56:25.919556-08:00", "status":"Closed", "title":"PDF document fails to convert", "category":"inxight", "severity":"Major", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"jespinoza", "name":"Jose Espinoza", "email":"jespinoza@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"The following document fails to convert via the following call or through the conversion pipeline:\r\n\r\nxquery version \"1.0-ml\";\r\n\r\nxdmp:document-insert(\"/my-file.pdf\", xdmp:document-get(\r\n     \"/home/jespinoza/customers/mstanley/Intro+to+Basel+II_FFIEC+101+Training.pdf\"))\r\n\r\nI tried it with the CPF diagnostic traces and it fails when entering the initial state.", "samplequery":"", "sampledata":"file on /home/jespinoza/customers/mstanley/Intro+to+Basel+II_FFIEC+101+Training.pdf", "version":"5.0-1", "tofixin":"5.0-5", "fixedin":"5.0-5", "platform":"linux(64-bit)", "memory":"", "processors":"", "note":"Submitted by Gurbeer Singh of Morgan Stanley as 12426.", "subscribers":[{"username":"jespinoza", "name":"Jose Espinoza", "email":"jespinoza@marklogic.com"}, {"username":"msrinivasan", "name":"Mahalakshmi Srinivasan", "email":"mahalakshmi.srinivasan@marklogic.com"}, {"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}, {"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}, {"username":"sthirumavalavan", "name":"Subhadra Thirumavalavan", "email":"subhadra.thirumavalavan@marklogic.com"}, {"username":"smiller", "name":"Scott Miller", "email":"Scott.Miller@marklogic.com"}], "attachments":[{"name":"Document to repro [PDF]", "uri":"root/support/bugtracking/attachments/20619/Intro+to+Basel+II_FFIEC+101+Training.pdf"}], "relationships":[{"type":"", "to":""}], "clones":[], "cloneOf":"", "support":{"headline":"xdmp:pdf-convert() can fail in a CPF flow.", "supportDescription":"Under some rare circumstances, xdmp:pdf-convert() can fail in a CPF flow.", "publishStatus":"Publish", "tickets":[], "customerImpact":{"level":"Low", "title":"Minimal business impact or reasonable workaround is available"}, "workaround":""}, "tags":["inxight", "jespinoza"], "changeHistory":[{"time":"2013-01-31T22:23:45.665354-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"status":{"from":"", "to":"Verify"}, "assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-31T22:23:45.665354-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-31T22:23:45.665354-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"tofixin":{"from":"", "to":"5.0-5"}}, "files":[], "show":true}, {"time":"2013-02-01T09:54:42.46579-08:00", "updatedBy":{"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Scott,\r\nPlease investigate this bug ASAP."}, {"time":"2013-02-01T09:54:42.46579-08:00", "updatedBy":{"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}, "change":{"assignTo":{"from":{"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}, "to":{"username":"smiller", "name":"Scott Miller", "email":"Scott.Miller@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-01T17:37:31.186056-08:00", "updatedBy":{"username":"jespinoza", "name":"Jose Espinoza", "email":"jespinoza@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"It looks like the 5.0-4.1 version fixes the issue. I will let the customer know so they can upgrade."}, {"time":"2013-02-04T15:34:28.825236-08:00", "updatedBy":{"username":"smiller", "name":"Scott Miller", "email":"Scott.Miller@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"smiller", "name":"Scott Miller", "email":"Scott.Miller@marklogic.com"}, "to":{"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}}}, "files":[], "show":true, "comment":"Jos√© and I observe this to be fixed in 5.0-4.1 and 5.0-5 respectively (note that I'm not personally clear on whether the reported problem manifested with Iceni (pdf-convert) or Isys (document-filter on a PDF file) -- I confirmed the fix with both)."}, {"time":"2013-02-04T15:34:28.825236-08:00", "updatedBy":{"username":"smiller", "name":"Scott Miller", "email":"Scott.Miller@marklogic.com"}, "change":{"assignTo":{"from":{"username":"smiller", "name":"Scott Miller", "email":"Scott.Miller@marklogic.com"}, "to":{"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-05T11:02:08.786847-08:00", "updatedBy":{"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}, "change":{"assignTo":{"from":{"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}, "to":{"username":"sthirumavalavan", "name":"Subhadra Thirumavalavan", "email":"subhadra.thirumavalavan@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-11T11:32:10.131028-08:00", "updatedBy":{"username":"msrinivasan", "name":"Mahalakshmi Srinivasan", "email":"mahalakshmi.srinivasan@marklogic.com"}, "change":{"assignTo":{"from":{"username":"msrinivasan", "name":"Mahalakshmi Srinivasan", "email":"mahalakshmi.srinivasan@marklogic.com"}, "to":{"username":"msrinivasan", "name":"Mahalakshmi Srinivasan", "email":"mahalakshmi.srinivasan@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-11T13:43:10.890435-08:00", "updatedBy":{"username":"msrinivasan", "name":"Mahalakshmi Srinivasan", "email":"mahalakshmi.srinivasan@marklogic.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"msrinivasan", "name":"Mahalakshmi Srinivasan", "email":"mahalakshmi.srinivasan@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"Verified on build 5.0-20130210. Saw the following in error logs when I had CPF trace event enabled:\r\n\r\n2013-02-11 13:34:49.987 Info: [Event:id=CPF on-create] /my-file.pdf\r\n2013-02-11 13:34:50.073 Info: [Event:id=CPF on-status-enter] /my-file.pdf created\r\n2013-02-11 13:34:50.204 Info: [Event:id=CPF Action Invoke] on-status-enter /my-file.pdf created /MarkLogic/cpf/actions/set-updated-action.xqy\r\n2013-02-11 13:34:50.330 Info: [Event:id=CPF on-state-enter] /my-file.pdf http://marklogic.com/states/initial\r\n2013-02-11 13:34:50.332 Info: [Event:id=CPF Action Complete] on-status-enter /my-file.pdf created PT0.258812S\r\n2013-02-11 13:34:50.333 Info: [Event:id=CPF Action Invoke] on-state-enter /my-file.pdf http://marklogic.com/states/initial /MarkLogic/conversion/actions/convert-pdf-action.xqy\r\n"}, {"time":"2013-02-11T14:09:41.860824-08:00", "updatedBy":{"username":"smiller", "name":"Scott Miller", "email":"Scott.Miller@marklogic.com"}, "change":{"status":{"from":"", "to":"Verify"}, "assignTo":{"from":{"username":"smiller", "name":"Scott Miller", "email":"Scott.Miller@marklogic.com"}, "to":{"username":"smiller", "name":"Scott Miller", "email":"Scott.Miller@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-11T14:09:41.860824-08:00", "updatedBy":{"username":"smiller", "name":"Scott Miller", "email":"Scott.Miller@marklogic.com"}, "change":{"assignTo":{"from":{"username":"smiller", "name":"Scott Miller", "email":"Scott.Miller@marklogic.com"}, "to":{"username":"smiller", "name":"Scott Miller", "email":"Scott.Miller@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-11T14:13:09.528291-08:00", "updatedBy":{"username":"smiller", "name":"Scott Miller", "email":"Scott.Miller@marklogic.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"smiller", "name":"Scott Miller", "email":"Scott.Miller@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"Adding support info undid some assignment state; maybe I used an old buffer...?  Anyway, this should be status=ship, assingnedTo=nobody."}, {"time":"2013-02-11T14:13:09.528291-08:00", "updatedBy":{"username":"smiller", "name":"Scott Miller", "email":"Scott.Miller@marklogic.com"}, "change":{"assignTo":{"from":{"username":"smiller", "name":"Scott Miller", "email":"Scott.Miller@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-25T17:15:39.474532-08:00", "updatedBy":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "change":{"status":{"from":"", "to":"Closed"}, "assignTo":{"from":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}], "updatedAt":"2013-02-25T17:15:39.474532-08:00", "fixedAt":"2013-02-04T15:34:28.825236-08:00", "fixedBy":{"username":"smiller", "name":"Scott Miller", "email":"Scott.Miller@marklogic.com"}, "shippedAt":"2013-02-11T14:13:09.528291-08:00", "shippedBy":{"username":"smiller", "name":"Scott Miller", "email":"Scott.Miller@marklogic.com"}, "closedAt":"2013-02-25T17:15:39.474532-08:00", "closedBy":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "renderDescriptionAs":"normal", "renderSampleDataAs":"normal"}