{"id":2029, "kind":"Bug", "createdAt":"2005-08-02T19:02:57.395441-07:00", "status":"Closed", "title":"XDBC returns null rather than throwing an exception on truncated result sequences", "category":"XDBC(Java)", "severity":"Major", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"ronh", "name":"Ron Hitchens", "email":"ronh@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"If a result sequence that is not \"streaming\" (contains a Content-Length header) is truncated, such as by the server timing out and dropping the socket, a null value may be returned for one or more result items rather than an exception being thrown.  In the case of resultSequence.getNode().asString(), an IOException is silently smothered and a stack trace written to stderr.\n\nIn some cases an XDBCException is ultimately thrown, sometimes no error indication is ever given while iterating the truncated result sequence.", "samplequery":"", "sampledata":"", "version":"2.2-8", "tofixin":"2.2-9", "fixedin":"2.2-9", "platform":"all", "memory":"412", "processors":"1", "note":"", "subscribers":[{"username":"ronh", "name":"Ron Hitchens", "email":"ronh@marklogic.com"}], "attachments":[], "clones":[], "cloneOf":2028, "support":{"headline":"XDBC returns null rather than throwing an exception on truncated result sequences", "supportDescription":"If the server connection drops in the middle of an XDBC session (most probably because the client does not read the full query result in a timely manner), then a null result item may be returned.  This can only occur if the result sequence is \"streaming\".  Other conditions that give rise to this situation include large result sets (minimum 64K for 32-bit systems, 256K for 64-bit systems), short request timeouts, and interleaved queries on the client side.", "publishStatus":"Publish", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":"Check for null results and assume a dropped connection in these cases."}, "tags":["XDBC(Java)", "ronh"], "changeHistory":[{"time":"2005-08-11T14:36:11.935931-07:00", "updatedBy":{"username":"ian", "name":"Ian Small", "email":"ian@cerisent.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"ian", "name":"Ian Small", "email":"ian@cerisent.com"}, "to":{"username":"ronh", "name":"Ron Hitchens", "email":"ronh@marklogic.com"}}}, "files":[], "show":true, "comment":"please move to ship when you're happy with the 2.2-9 status of this bug.  i suspect you probably already are :-)"}, {"time":"2005-08-30T16:14:29.308-07:00", "updatedBy":{"username":"ronh", "name":"Ron Hitchens", "email":"ronh@marklogic.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"ronh", "name":"Ron Hitchens", "email":"ronh@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"Passes unit tests"}, {"time":"2007-09-07T11:36:35.426934-07:00", "updatedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "change":{"status":{"from":"", "to":"Closed"}, "assignTo":{"from":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"2.2 eol"}], "updatedAt":"2007-09-07T11:36:35.426934-07:00", "fixedAt":"2005-08-11T14:36:11.935931-07:00", "fixedBy":{"username":"ian", "name":"Ian Small", "email":"ian@cerisent.com"}, "shippedAt":"2005-08-30T16:14:29.308-07:00", "shippedBy":{"username":"ronh", "name":"Ron Hitchens", "email":"ronh@marklogic.com"}, "closedAt":"2007-09-07T11:36:35.426934-07:00", "closedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "renderDescriptionAs":"normal"}