{"id":20858, "kind":"Bug", "createdAt":"2013-02-20T16:06:13.933609-08:00", "status":"Closed", "title":"Lost Field Path configuration after adding \"Includes\" for Field", "category":"adminGUI", "severity":"Major", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"Steps to reproduce:\r\n1) Go to any database --> Field \r\n2) Go to Create Tab to create a new Field with Path & Weight\r\n3) Upon clicking the OK button, the current page is redirected to the Configure page where you can confirm the new Field Path info.\r\n4) Choose the \"Includes\" tab to include an element for the field. \r\n5) Upon clicking the OK button, the current page is redirected to the Configure page\r\n\r\nYou will see the previously defined Field Path and Weight is gone.  On the summary page, there is a warning: \"Detected invalid field definitions in databases.xml configuration file.\"\r\n\r\n\r\n", "samplequery":"", "sampledata":"", "version":"7.0-nightly", "tofixin":"7.0-ea1", "fixedin":"7.0-ea1", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}, {"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, {"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}], "attachments":[{"name":"Bug-20858.mp4", "uri":"root/support/bugtracking/attachments/20858/Bug-20858.mp4"}, {"name":"Bug-20858.mp4", "uri":"root/support/bugtracking/attachments/20858/17782701854863321356-Bug-20858.mp4"}, {"name":"Final_one.mp4", "uri":"root/support/bugtracking/attachments/20858/Final_one.mp4"}], "relationships":[{"type":"", "to":""}], "clones":[], "cloneOf":"", "support":{"headline":"", "supportDescription":"", "publishStatus":"Not Ready", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["adminGUI", "bmo"], "changeHistory":[{"time":"2013-02-20T16:06:13.933609-08:00", "updatedBy":{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}, "change":{"assignTo":{"from":{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}, "to":{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-22T11:57:15.615392-08:00", "updatedBy":{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}, "change":{"status":{"from":"", "to":"Fix"}, "assignTo":{"from":{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}, "to":{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-22T11:58:40.72136-08:00", "updatedBy":{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"133094", "paths":["xdmp/branches/b7_0-ea1/src/Admin/database-field-add-includes-go.xqy"], "affectedBugs":[]}, "comment":"Bug:20858 - add existing field to rewriting back to databases.xml"}, {"time":"2013-02-22T11:59:15.993257-08:00", "updatedBy":{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}, "to":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}}}, "files":[], "show":true, "comment":"Fixed."}, {"time":"2013-02-22T11:59:15.993257-08:00", "updatedBy":{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}, "change":{"assignTo":{"from":{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}, "to":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-22T12:01:53.955165-08:00", "updatedBy":{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"133095", "paths":["xdmp/trunk/src/Admin/database-field-add-includes-go.xqy"], "affectedBugs":[]}, "comment":"Bug:20858 - add existing field to rewriting back to databases.xml"}, {"time":"2013-02-25T10:43:45.265312-08:00", "updatedBy":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "change":{"assignTo":{"from":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "to":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-03-04T02:33:37.430393-08:00", "updatedBy":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Hi Brian, \r\n\r\nI am still able to reproduce this issue, please find the below steps to reproduce - \r\n\r\n1) Go to any database --> Field\r\n2) Go to Create Tab to create a new Field with Path & Weight\r\n3) Upon clicking the OK button, the current page is redirected to the Configure page where you can confirm the new Field Path info.\r\n4) Choose the \"Includes\" tab to include an element for the field.\r\n5) Upon clicking the OK button, the current page is redirected to the Configure page \r\n6) Click on 'more items' under 'field path' and enter new path with default wieght\r\n7) Choose the \"Includes\" tab to include an element for the field.\r\n8) Upon clicking the OK button, the current page is redirected to the Configure page \r\n\r\nNow see that defined Field Path and Weight are not gone but On the summary page, there is a warning: \"Detected invalid field definitions in databases.xml configuration file.\" and below error \r\n\r\nContact MarkLogic technical support and provide the information below.\r\n\r\n XDMP-VALIDATEUNEXPECTED err:XQDY0027 0.9-ml Invalid node XDMP-VALIDATEUNEXPECTED: (err:XQDY0027) validate global { $db/db:fields } -- Invalid node: Found db:stemmed-searches but expected (db:included-elements?,db:excluded-elements?,db:tokenizer-overrides?) at /db:fields/db:field[1]/db:stemmed-searches using schema \"database.xsd\" false validate global { $db/db:fields } db:stemmed-searches (db:included-elements?,db:excluded-elements?,db:tokenizer-overrides?) /db:fields/db:field[1]/db:stemmed-searches \"database.xsd\" /lib/database-field-summary-form.xqy 206 0 fieldsSummaryPage(()) msgs () tooltips () db <database xmlns=\"http://marklogic.com/xdmp/database\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"><database-id>14178655550155487208</database-id><database-name>Ad...</database> 0.9-ml /database-field-summary.xqy 13 0 0.9-ml \r\n "}, {"time":"2013-03-04T02:33:37.430393-08:00", "updatedBy":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "change":{"assignTo":{"from":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "to":{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-03-04T02:35:04.831807-08:00", "updatedBy":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "change":{"status":{"from":"", "to":"Verify"}, "assignTo":{"from":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "to":{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-03-04T14:23:48.229146-08:00", "updatedBy":{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Hi Kuldeep,  I couldn't reproduce it.    Maybe, fixes for other bugs also fixed this?  Would you verify one more time?  Thanks!\r\n\r\nBTW, in Step 6 to 7, do I have to click \"OK\" button before moving to Step 7.\r\n"}, {"time":"2013-03-04T14:23:48.229146-08:00", "updatedBy":{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}, "change":{"assignTo":{"from":{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}, "to":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-03-04T23:32:44.717166-08:00", "updatedBy":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Hi Brian, \r\n\r\nI am able to reproduce this on 7.0-ea1_20130304 build.\r\n\r\nYes, you have to click \"Ok\" button before moving to Step 7 (Sorry for inconvenience caused)\r\n\r\nPlease find the attached video for steps to reproduce\r\n\r\nThanks\r\nKuldeep"}, {"time":"2013-03-04T23:32:44.717166-08:00", "updatedBy":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "change":{"assignTo":{"from":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "to":{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-03-05T11:16:20.392497-08:00", "updatedBy":{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Hi Kuldeep, both of the attached videos got cut off after creating a new field and adding path and weight."}, {"time":"2013-03-05T12:33:22.0064-08:00", "updatedBy":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Please find the Final_one.mp4, its of small size.\r\n\r\nThanks\r\nKuldeep"}, {"time":"2013-03-05T13:00:54.143862-08:00", "updatedBy":{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Thanks for the new video.  It is due to the validation from the validate() function defined in admin-forms.xqy fails.   I think this is a new bug."}, {"time":"2013-03-05T14:28:40.759603-08:00", "updatedBy":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "to":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}}}, "files":[], "show":true, "comment":"Kuldeep since the original problem for which the bugs was created got fixed, let us test and ship this bug. \r\n\r\nPlease create a seperate EA2 bug for the issue you are seeing on summary page."}, {"time":"2013-03-05T14:28:40.759603-08:00", "updatedBy":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "change":{"assignTo":{"from":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "to":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-03-05T23:32:52.946843-08:00", "updatedBy":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"Logged 21054 for above issue and this test is added as AdminUIBug20858 in regression.\r\n\r\nThanks\r\nKuldeep"}], "updatedAt":"2013-03-05T23:32:52.946843-08:00", "fixedAt":"2013-03-05T14:28:40.759603-08:00", "fixedBy":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "shippedAt":"2013-03-05T23:32:52.946843-08:00", "shippedBy":{"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, "renderDescriptionAs":"normal"}