{"id":20695, "kind":"Bug", "createdAt":"2013-02-04T11:53:12.791529-08:00", "status":"Closed", "title":"XDQPClientConnection continuously starting and stopping during large bulk replication ", "category":"xdmp", "severity":"Major", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"lratcliff", "name":"Larry Ratcliff", "email":"lratcliff@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"Usinb build 5.0-20130123 the following was observed: \r\n\r\nduring a large 48 million document bulk replication : \r\n\r\n013-02-04 11:50:57.196 Debug: Forest f1-on4 bulk replicated 190000 fragments  to domestic forest f1r-on5 (810000 remaining, 552/sec)\r\n2013-02-04 11:51:09.333 Debug: Stopping XDQPServerConnection, client=rh6-intel64-51-test-5.marklogic.com, conn=172.18.18.35:7999-172.18.18.36:60778, sessions=0, requests=0, recvTics=0, sendTics=33, recvs=12, sends=1, recvBytes=6364, sendBytes=100\r\n2013-02-04 11:51:09.333 Debug: Stopping XDQPServerConnection, client=rh6-intel64-51-test-5.marklogic.com, conn=172.18.18.35:7999-172.18.18.36:60779, sessions=0, requests=0, recvTics=0, sendTics=32, recvs=12, sends=1, recvBytes=6368, sendBytes=100\r\n2013-02-04 11:51:09.333 Debug: Stopping XDQPServerConnection, client=rh6-intel64-51-test-5.marklogic.com, conn=172.18.18.35:7999-172.18.18.36:60777, sessions=0, requests=0, recvTics=0, sendTics=34, recvs=13, sends=1, recvBytes=6936, sendBytes=100\r\n2013-02-04 11:51:10.335 Debug: Starting domestic XDQPServerConnection, client=rh6-intel64-51-test-5.marklogic.com, conn=172.18.18.35:7999-172.18.18.36:55131\r\n2013-02-04 11:51:11.334 Debug: Starting domestic XDQPServerConnection, client=rh6-intel64-51-test-5.marklogic.com, conn=172.18.18.35:7999-172.18.18.36:55132\r\n2013-02-04 11:51:12.335 Debug: Starting domestic XDQPServerConnection, client=rh6-intel64-51-test-5.marklogic.com, conn=172.18.18.35:7999-172.18.18.36:55133\r\n2013-02-04 11:51:14.779 Debug: Forest f1-on4 bulk replicated 200000 fragments  to domestic forest f1r-on5 (800000 remaining, 554/sec)\r\n2013-02-04 11:51:18.859 Info: Disconnecting from domestic host rh6-intel64-51-test-5.marklogic.com in cluster 11537469354735732722 because it has not responded for 30 seconds.\r\n2013-02-04 11:51:18.859 Info: Disconnected from host rh6-intel64-51-test-5.marklogic.com\r\n2013-02-04 11:51:18.859 Debug: Stopping XDQPClientConnection, server=rh6-intel64-51-test-5.marklogic.com, conn=172.18.18.35:9260-172.18.18.36:7999, sendTicks=2, recvTicks=0, sends=464, recvs=41, sendBytes=574412, recvBytes=4100\r\n2013-02-04 11:51:18.859 Debug: Stopping XDQPClientConnection, server=rh6-intel64-51-test-5.marklogic.com, conn=172.18.18.35:9259-172.18.18.36:7999, sendTicks=3, recvTicks=0, sends=465, recvs=41, sendBytes=575288, recvBytes=4100\r\n2013-02-04 11:51:18.859 Debug: Stopping XDQPClientConnection, server=rh6-intel64-51-test-5.marklogic.com, conn=172.18.18.35:9258-172.18.18.36:7999, sendTicks=1, recvTicks=0, sends=465, recvs=41, sendBytes=575856, recvBytes=4100\r\n2013-02-04 11:51:18.861 Debug: Starting XDQPClientConnection, server=rh6-intel64-51-test-5.marklogic.com, conn=172.18.18.35:28213-172.18.18.36:7999\r\n2013-02-04 11:51:19.861 Debug: Starting XDQPClientConnection, server=rh6-intel64-51-test-5.marklogic.com, conn=172.18.18.35:28214-172.18.18.36:7999\r\n2013-02-04 11:51:20.860 Info: Connected to domestic host rh6-intel64-51-test-5.marklogic.com\r\n2013-02-04 11:51:20.862 Debug: Starting XDQPClientConnection, server=rh6-intel64-51-test-5.marklogic.com, conn=172.18.18.35:28215-172.18.18.36:7999\r\n\r\nso the it looks like the XDQP session is continuously restarting. \r\n", "samplequery":"whole log file can be found /home/lratcliff/BUG_NUM", "sampledata":"", "version":"5.0-nightly", "tofixin":"5.0-5", "fixedin":"N/A", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"lratcliff", "name":"Larry Ratcliff", "email":"lratcliff@marklogic.com"}, {"username":"wfeick", "name":"Wayne Feick", "email":"wfeick@marklogic.com"}, {"username":"atsoi", "name":"Arthur Tsoi", "email":"arthur.tsoi@marklogic.com"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[], "cloneOf":"", "support":{"headline":"", "supportDescription":"", "publishStatus":"Not Ready", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["xdmp", "lratcliff"], "changeHistory":[{"time":"2013-02-04T11:53:12.791529-08:00", "updatedBy":{"username":"lratcliff", "name":"Larry Ratcliff", "email":"lratcliff@marklogic.com"}, "change":{"assignTo":{"from":{"username":"lratcliff", "name":"Larry Ratcliff", "email":"lratcliff@marklogic.com"}, "to":{"username":"wfeick", "name":"Wayne Feick", "email":"wfeick@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-04T11:57:32.573137-08:00", "updatedBy":{"username":"wfeick", "name":"Wayne Feick", "email":"wfeick@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Arthur, you were in the heartbeat code recently for bug 16478. This issue is for intracluster rather than intercluster, but might be related."}, {"time":"2013-02-04T11:57:32.573137-08:00", "updatedBy":{"username":"wfeick", "name":"Wayne Feick", "email":"wfeick@marklogic.com"}, "change":{"assignTo":{"from":{"username":"wfeick", "name":"Wayne Feick", "email":"wfeick@marklogic.com"}, "to":{"username":"atsoi", "name":"Arthur Tsoi", "email":"arthur.tsoi@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-05T11:28:23.720916-08:00", "updatedBy":{"username":"atsoi", "name":"Arthur Tsoi", "email":"arthur.tsoi@marklogic.com"}, "change":{"status":{"from":"", "to":"Closed"}, "assignTo":{"from":{"username":"atsoi", "name":"Arthur Tsoi", "email":"arthur.tsoi@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"There was an extra MarkLogic server running."}], "updatedAt":"2013-02-05T11:28:23.720916-08:00", "closedAt":"2013-02-05T11:28:23.720916-08:00", "closedBy":{"username":"atsoi", "name":"Arthur Tsoi", "email":"arthur.tsoi@marklogic.com"}, "renderDescriptionAs":"normal", "renderSampleQueryAs":"normal"}