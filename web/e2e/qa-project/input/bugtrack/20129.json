{"id":20129, "kind":"Bug", "createdAt":"2012-11-21T05:40:18.057135-08:00", "status":"Closed", "title":"Query Console not working with special (alt) characters on a French keyboard", "category":"Query Console", "severity":"Major", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"ableasdale", "name":"Alex Bleasdale", "email":"alex.bleasdale@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"This issue was brought to our attention by OECD in a recent support case:\r\nhttps://help.marklogic.com/staff/Tickets/Ticket/View/12154\r\n\r\nHere are the steps to reproduce (initially tested with Windows at this stage):\r\n\r\n- Open Control Panel > Region and Language \r\n\r\n- Install the French (France) Keyboard layout\r\n\r\n- Select \"FR\" in the Language bar to ensure you have the mapping selected\r\n\r\n- Open a text editor and use alt + 5 (which will give you '[') - note that for HP standard laptops, you'll need to use the alt key to the right of the space bar as the one on the left does not have the same mapping (on some keyboards this may be called Alt Gr).\r\n\r\n- Open firefox and in the address bar test the combination and confirm they work\r\n\r\n- Go to http://codemirror.net/mode/xquery/index.html and try the same combination and confirm they work (so it's not a codemirror or XQuery highlighting issue with the version currently available for download).\r\n\r\n- Try the same thing in a query buffer in qconsole. No response and no character is written into the buffer.", "samplequery":"", "sampledata":"", "version":"5.0-4", "tofixin":"5.0-6", "fixedin":"5.0-6", "platform":"windows(64-bit)", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"ableasdale", "name":"Alex Bleasdale", "email":"alex.bleasdale@marklogic.com"}, {"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, {"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[20206, 22195], "cloneOf":"", "support":{"headline":"Query Console not working with special (alt) characters on a French keyboard", "supportDescription":"The query buffer (based on codemirror) does not work with any of the keyboard ALT characters on a French (AZERTY) keyboard.  The same mappings appear to work fine with the latest version of codemirror but not within qconsole.", "publishStatus":"Publish", "tickets":[], "customerImpact":{"level":"Medium", "title":"Requires significant or unnatural effort to work around issue or to prevent significant business impact"}, "workaround":"Use an external text editor (such as notepad++) and copy/paste"}, "tags":["Query Console", "ableasdale"], "changeHistory":[{"time":"2012-11-21T14:30:46.987351-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}}}, "files":[], "show":true}, {"time":"2012-11-21T14:30:46.987351-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"tofixin":{"from":"", "to":"5.0-5"}}, "files":[], "show":true}, {"time":"2012-11-21T14:32:16.140909-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"status":{"from":"", "to":"Verify"}, "assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}}}, "files":[], "show":true}, {"time":"2012-12-10T13:37:17.568462-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Scott says this should be fixed in 6.0"}, {"time":"2012-12-10T13:37:17.568462-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"status":{"from":"", "to":"Will not fix"}, "assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}, {"time":"2012-12-10T13:37:17.568462-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"tofixin":{"from":"5.0-5", "to":"N/A"}}, "files":[], "show":true}, {"time":"2013-04-22T10:26:31.867609-07:00", "updatedBy":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"this is not a shortcut issue.  reopening"}, {"time":"2013-04-22T10:26:31.867609-07:00", "updatedBy":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "change":{"status":{"from":"", "to":"Verify"}, "assignTo":{"from":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-04-22T10:26:31.867609-07:00", "updatedBy":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "change":{"tofixin":{"from":"N/A", "to":"5.0-6"}}, "files":[], "show":true}, {"time":"2013-04-26T13:15:43.854602-07:00", "updatedBy":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "change":{"assignTo":{"from":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "to":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-06-24T15:07:39.014991-07:00", "updatedBy":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Adding investigation info to cloned bugs.....\r\n\r\nBelieve it or not, the right ALT key on the FR keyboard triggers two keydown events at once. One that's ALT one that's CTRL. Because of this, our QConsole keybinding triggers for CTRL+ALT+5, which I'm sure you've noticed actually switches to the 5th tab in QConsole. Since we catch this event, it blocks the '[' character from being written in the editor.\r\n \r\nI've isolated the keydown issue in a couple Fiddles, one with jQuery event handling (which we use), one with vanilla JavaScript, just to be sure it wasn't a jQuery bug. Both show the same behavior of the right ALT button triggering TWO keydown events ONLY in when on a French keyboard.\r\nJS: http://jsfiddle.net/cSc7r/14/\r\njQuery: http://jsfiddle.net/cSc7r/15/\r\n \r\nSo this is clearly an external issue, most likely Windows related. \r\n \r\nSince this is such a hot button issue for customers and users internally, my suggestion would be for Mitch and I to do what we've talked about doing for a while and remap the key bindings to settings more intuitive than these ugly 3-4 character long shortcuts. This isn't going to happen for EA3, but can be done for 7.0-1."}, {"time":"2013-07-03T16:27:30.60502-07:00", "updatedBy":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"145752", "paths":["xdmp/branches/b5_0/src/Apps/qconsole/static/js/qconsole-keybindings.js"], "affectedBugs":[]}, "comment":"Bug:20129 - Fixed collision between key bindings and issues with Windows FR keyboard by removing some non-essential keybindings"}, {"time":"2013-07-03T16:28:00.081028-07:00", "updatedBy":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, "to":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}}}, "files":[], "show":true, "comment":"Sending to test."}, {"time":"2013-07-03T16:28:00.081028-07:00", "updatedBy":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, "change":{"assignTo":{"from":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, "to":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}}}, "files":[], "show":true}, {"time":"2014-03-18T11:38:17.270934-07:00", "updatedBy":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"Bug verified"}, {"time":"2014-03-18T11:38:17.270934-07:00", "updatedBy":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "change":{"assignTo":{"from":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}, {"time":"2014-04-09T15:34:57.107172-07:00", "updatedBy":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "change":{"status":{"from":"", "to":"Closed"}, "assignTo":{"from":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"ga"}], "updatedAt":"2014-04-09T15:34:57.107172-07:00", "fixedAt":"2013-07-03T16:28:00.081028-07:00", "fixedBy":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, "shippedAt":"2014-03-18T11:38:17.270934-07:00", "shippedBy":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "closedAt":"2014-04-09T15:34:57.107172-07:00", "closedBy":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "renderDescriptionAs":"normal"}