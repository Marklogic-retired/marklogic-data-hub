{"id":20676, "kind":"Bug", "createdAt":"2013-01-18T14:40:00.600911-08:00", "status":"Will not fix", "title":"xdmp:pretty-print removing declare in 'declare default function namespace'", "category":"xdmp", "severity":"Major", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"This comes from Ryan Dew on the doc comments.  I tried this on 6.0-2.1, although I expect it applies to more branches.\r\n\r\nThe \"declare\" is removed from a declare default function namespace prolog definition when using xdmp:pretty-print.  For example, the following returns invalid xquery (missing the \"default\" psuedo-keyword):\r\n\r\nxdmp:pretty-print('xquery version \"1.0-ml\";\r\n\r\ndeclare default function namespace \"/foo\";\r\n\r\n\"hello\"')\r\n=>\r\nxquery version \"1.0-ml\";\r\ndefault function namespace \"/foo\";\r\n\r\n\"hello\"", "samplequery":"", "sampledata":"", "version":"5.0-1", "tofixin":"5.0-7", "fixedin":"N/A", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, {"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[], "cloneOf":20521, "support":{"headline":"xdmp:pretty-print removing declare in 'declare default function namespace'", "supportDescription":"xdmp:pretty-print of 'declare default function namespace' comes out as just 'default function namespace'.\r\n\r\nFor example:\r\nxdmp:pretty-print('xquery version \"1.0-ml\";  \r\ndeclare default function namespace \"/foo\"; \r\n \"hello\"') \r\n\r\nComes out as:\r\nxquery version \"1.0-ml\"; \r\ndefault function namespace \"/foo\"; \r\n\"hello\"", "publishStatus":"Prepare", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["xdmp", "dsokolsky"], "changeHistory":[{"time":"2013-01-18T14:40:00.600911-08:00", "updatedBy":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, "change":{"assignTo":{"from":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, "to":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}}}, "files":[], "show":true}, {"time":"2013-01-31T15:21:56.665927-08:00", "updatedBy":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"130191", "paths":["xdmp/branches/b6_0/src/XQuery.cpp"], "affectedBugs":[]}, "comment":"Bug:20521 pretty-print"}, {"time":"2013-01-31T15:24:22.298842-08:00", "updatedBy":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "change":{"tofixin":{"from":"", "to":"5.0-6"}}, "files":[], "show":true}, {"time":"2015-03-05T06:04:00.993788-08:00", "updatedBy":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "change":{"status":{"from":"Verify", "to":"Will not fix"}, "assignTo":{"from":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"EOL"}, {"time":"2015-03-05T06:04:00.993788-08:00", "updatedBy":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "change":{"assignTo":{"from":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}], "updatedAt":"2015-03-05T06:04:00.993788-08:00", "renderDescriptionAs":"normal"}