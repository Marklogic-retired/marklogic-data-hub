{"id":20957, "kind":"Bug", "createdAt":"2013-02-27T10:54:06.718746-08:00", "status":"Closed", "title":"QConsole: workspace import xml is not validated", "category":"Query Console", "severity":"Major", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"1.\tGo to Query Console\r\n2.\tClick Workspace arrow\r\n3.\tSelect Import Workspace\r\n4a.  Do not select any file and click Import, \r\n         [Result: Displaying Loading your import workspace even no file has been selected]\r\n\r\n4b.  Select any file of these extensions(jpeg, exe, txt, csv etc) and click Import,  \r\n        [Result: Displaying Loading your import workspace then page gets refreshed and nothing happened.]\r\n", "samplequery":"", "sampledata":"", "version":"7.0-nightly", "tofixin":"7.0-1", "fixedin":"7.0-1", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, {"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[20958, 20959], "cloneOf":"", "support":{"headline":"", "supportDescription":"", "publishStatus":"Never Publish", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["Query Console", "sreddy"], "changeHistory":[{"time":"2013-02-27T10:54:06.718746-08:00", "updatedBy":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "change":{"assignTo":{"from":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "to":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-27T11:14:58.356617-08:00", "updatedBy":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Can fix my adding:\r\n accept=\".xml\"\r\nto the file input, which will ONLY allow you to select a file with extension \".xml\""}, {"time":"2013-07-03T16:07:40.762134-07:00", "updatedBy":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"145749", "paths":["xdmp/trunk/src/Apps/qconsole/static/css/qconsole.css", "xdmp/trunk/src/Apps/qconsole/default.xqy", "xdmp/trunk/src/Apps/qconsole/static/js/qconsole-keybindings.js", "xdmp/trunk/src/Apps/qconsole/static/js/qconsole.js", "xdmp/trunk/src/Apps/qconsole/static/js/init.js", "xdmp/trunk/src/Apps/qconsole/import.xqy"], "affectedBugs":["21252", "21155", "20951"]}, "comment":"Bug:21252 - CTRL+A selection added for new output, Bug:21155 - Double click on split bar now only triggers on click to the right of the tabs, Bug:20951 - fixed profile output UI in IE 10, Bug:20957 - workspace import now requires that the file is XML."}, {"time":"2013-07-03T16:11:36.894867-07:00", "updatedBy":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, "to":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}}}, "files":[], "show":true, "comment":"Fixed.  Now only allows XML files."}, {"time":"2013-07-03T16:11:36.894867-07:00", "updatedBy":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, "change":{"assignTo":{"from":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, "to":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-08-07T17:09:03.503782-07:00", "updatedBy":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"it allows me to upload file with any extension. Please check.\r\nhttp://sreddy:7000/qconsole/"}, {"time":"2013-08-07T17:09:03.503782-07:00", "updatedBy":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "change":{"status":{"from":"", "to":"Fix"}, "assignTo":{"from":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "to":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-08-07T17:09:03.503782-07:00", "updatedBy":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "change":{"assignTo":{"from":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "to":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-08-07T17:20:27.22842-07:00", "updatedBy":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"works only for chrome. Not working for FF & IE9"}, {"time":"2013-08-07T17:45:34.870973-07:00", "updatedBy":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Per the HTML spec\r\nhttp://www.whatwg.org/specs/web-apps/current-work/multipage/states-of-the-type-attribute.html#attr-input-accept\r\nthe implementation is correct.  The problem is that FF and IE don't support the 'accept' attribute.\r\n\r\nSo there really is no way to filter by file type on the form, outside of this attribute.  I'm going to implement an alternative that would validate the file type when the submit button is pressed.  If the file type isn't XML, it won't allow the POST and will show an error message: \"ERROR: Invalid file type.\""}, {"time":"2013-08-07T18:01:13.222881-07:00", "updatedBy":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"148611", "paths":["xdmp/trunk/src/Apps/qconsole/import.xqy", "xdmp/trunk/src/Apps/qconsole/static/js/qconsole.js", "xdmp/trunk/src/Apps/qconsole/static/js/import-validate.js", "xdmp/trunk/src/Apps/qconsole/static/css/qconsole-import.css"], "affectedBugs":[]}, "comment":"Bug:20957 - added client side validation of extension on press of Import"}, {"time":"2013-08-07T18:02:00.488533-07:00", "updatedBy":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, "to":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}}}, "files":[], "show":true, "comment":"Added new client validation."}, {"time":"2013-08-07T18:02:00.488533-07:00", "updatedBy":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, "change":{"assignTo":{"from":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, "to":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-09-11T14:53:06.91254-07:00", "updatedBy":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"bug verified"}, {"time":"2013-09-11T14:53:06.91254-07:00", "updatedBy":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "change":{"assignTo":{"from":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}], "updatedAt":"2013-09-11T14:53:06.91254-07:00", "fixedAt":"2013-08-07T18:02:00.488533-07:00", "fixedBy":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, "shippedAt":"2013-09-11T14:53:06.91254-07:00", "shippedBy":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "renderDescriptionAs":"normal"}