{"id":20824, "kind":"Bug", "createdAt":"2013-02-18T22:54:30.028029-08:00", "status":"Closed", "title":"Constraint names having spaces showing different behavior with different search api functions", "category":"documentation", "severity":"Aesthetic", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"dchander", "name":"Dinesh Chander", "email":"dinesh.chander@globallogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"Reported by user in case #12503. The behavior is same in 5.0 and 6.0.\r\n\r\n1.) search:parse supports quoted constraint names (just like it supports quoted constraint values) if you use double quotes.\r\n2.) search:remove-constraint does support quoted constraint names if you use single quotes.\r\n3.) search:unparse does not support quoted constraint names.\r\n\r\nThis behavior is inconsistent and may lead to confusion. It would be better to document the usage of space in constraint names, if we are not modifying the handling.\r\n\r\nHere's what the user says.\r\n\"Nowhere in the documentation (that I could find) does it indicate that spaces aren't supported. The fact that they *are* supported in search:parse, and the lack of documentation suggesting otherwise, would lead most developers to assume that they are supposed to be.\"", "samplequery":"import module namespace search = \"http://marklogic.com/appservices/search\" at \"/MarkLogic/appservices/search/search.xqy\";\r\nlet $options :=\r\n  <options xmlns=\"http://marklogic.com/appservices/search\">\r\n    <constraint name=\"Practice Area\"> <word><element ns=\"http://test\" name=\"test1\"/></word> </constraint>\r\n    <constraint name=\"Topic\"> <value><element ns=\"http://test\" name=\"test2\"/></value> </constraint>\r\n  </options>\r\n\r\nreturn (: use the return statement from the below 3 points :)\r\n\r\n1.) search:parse supports quoted constraint names (just like it supports quoted constraint values) if you use double quotes.\r\ni.e. search:parse('judge \"Practice Area\":\"Civil Procedure\" Topic:abcd',$options)\r\n=>  ... qtextpre=\"Practice Area:\" ...\r\n\r\n2.) search:remove-constraint does support quoted constraint names if you use single quotes.\r\ni.e. search:remove-constraint(\"judge 'Practice Area':'Civil Procedure' Topic:abcd\", \"Topic:abcd\",$options)\r\n=>  judge 'Practice Area':'Civil Procedure'\r\n\r\n3.) search:unparse does not support quoted constraint names.\r\ni.e. search:unparse(search:parse('judge \"Practice Area\":\"Civil Procedure\" Topic:abcd',$options))\r\n=> judge Practice Area:\"Civil Procedure\" Topic:abcd", "sampledata":"", "version":"5.0-1", "tofixin":"6.0-3", "fixedin":"6.0-3", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"dchander", "name":"Dinesh Chander", "email":"dinesh.chander@globallogic.com"}, {"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, {"username":"kcoleman", "name":"Kim Coleman", "email":"kim.coleman@marklogic.com"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[], "cloneOf":20823, "support":{"headline":"", "supportDescription":"", "publishStatus":"Never Publish", "tickets":[], "customerImpact":{"level":"Low", "title":"Minimal business impact or reasonable workaround is available"}, "workaround":""}, "tags":["documentation", "dchander"], "changeHistory":[{"time":"2013-02-18T22:54:30.028029-08:00", "updatedBy":{"username":"dchander", "name":"Dinesh Chander", "email":"dinesh.chander@globallogic.com"}, "change":{"assignTo":{"from":{"username":"dchander", "name":"Dinesh Chander", "email":"dinesh.chander@globallogic.com"}, "to":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-19T13:27:29.113212-08:00", "updatedBy":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Kim, can you please investigate?"}, {"time":"2013-02-19T13:27:29.113212-08:00", "updatedBy":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, "change":{"assignTo":{"from":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, "to":{"username":"kcoleman", "name":"Kim Coleman", "email":"kim.coleman@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-19T13:27:29.113212-08:00", "updatedBy":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, "change":{"tofixin":{"from":"", "to":"5.0-6"}}, "files":[], "show":true}, {"time":"2013-03-04T14:19:21.42711-08:00", "updatedBy":{"username":"kcoleman", "name":"Kim Coleman", "email":"kim.coleman@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/docsvn", "revision":"6345", "paths":["docs/branches/b5_0/fm/search-dev-guide/search-api.fm"], "affectedBugs":[]}, "comment":"Bug:20824 Call out that constraint names cannot contain whitespace."}, {"time":"2013-03-04T14:21:40.438283-08:00", "updatedBy":{"username":"kcoleman", "name":"Kim Coleman", "email":"kim.coleman@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/docsvn", "revision":"6346", "paths":["docs/branches/b5_0/modules/searchapi.xml"], "affectedBugs":[]}, "comment":"Bug:20824 Call out that constraint names must not contain whitespace."}, {"time":"2013-03-04T14:30:01.49611-08:00", "updatedBy":{"username":"kcoleman", "name":"Kim Coleman", "email":"kim.coleman@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"kcoleman", "name":"Kim Coleman", "email":"kim.coleman@marklogic.com"}, "to":{"username":"kcoleman", "name":"Kim Coleman", "email":"kim.coleman@marklogic.com"}}}, "files":[], "show":true, "comment":"Will verify after next doc build."}, {"time":"2013-03-05T09:14:17.630741-08:00", "updatedBy":{"username":"kcoleman", "name":"Kim Coleman", "email":"kim.coleman@marklogic.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"kcoleman", "name":"Kim Coleman", "email":"kim.coleman@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"Verified in doc build from 20130305."}, {"time":"2013-03-05T09:14:17.630741-08:00", "updatedBy":{"username":"kcoleman", "name":"Kim Coleman", "email":"kim.coleman@marklogic.com"}, "change":{"assignTo":{"from":{"username":"kcoleman", "name":"Kim Coleman", "email":"kim.coleman@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}], "updatedAt":"2013-03-05T09:14:17.630741-08:00", "fixedAt":"2013-03-04T14:30:01.49611-08:00", "fixedBy":{"username":"kcoleman", "name":"Kim Coleman", "email":"kim.coleman@marklogic.com"}, "shippedAt":"2013-03-05T09:14:17.630741-08:00", "shippedBy":{"username":"kcoleman", "name":"Kim Coleman", "email":"kim.coleman@marklogic.com"}, "renderDescriptionAs":"normal", "renderSampleQueryAs":"normal"}