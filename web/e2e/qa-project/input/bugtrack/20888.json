{"id":20888, "kind":"Bug", "createdAt":"2013-02-21T16:20:25.114267-08:00", "status":"Closed", "title":"/etc/sysconfig/MarkLogic script needs to be changed to accomadate CDH4", "category":"xdmp", "severity":"Major", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"jsolis", "name":"Julio Solis", "email":"Julio.Solis@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"/etc/sysconfig/MarkLogic script should be updated so setting point to CDH4 jars and library.\r\n\r\nBelow is the files I have identified on the client side:\r\n\r\ncdh4.1.3/\r\ncdh4.1.3/etc/\r\ncdh4.1.3/etc/hadoop/\r\ncdh4.1.3/etc/hadoop/conf/\r\ncdh4.1.3/etc/hadoop/conf/hadoop-env.sh\r\ncdh4.1.3/etc/hadoop/conf/core-site.xml\r\ncdh4.1.3/etc/hadoop/conf/log4j.properties\r\ncdh4.1.3/etc/hadoop/conf/mapred-site.xml\r\ncdh4.1.3/etc/hadoop/conf/README\r\ncdh4.1.3/etc/hadoop/conf/hdfs-site.xml\r\ncdh4.1.3/etc/hadoop/conf/hadoop-metrics.properties\r\ncdh4.1.3/etc/hadoop/conf/yarn-site.xml\r\ncdh4.1.3/hadoop/\r\ncdh4.1.3/hadoop/bin/\r\ncdh4.1.3/hadoop/bin/hadoop\r\ncdh4.1.3/hadoop/lib/\r\ncdh4.1.3/hadoop/lib/protobuf-java-2.4.0a.jar\r\ncdh4.1.3/hadoop/lib/commons-logging-1.1.1.jar\r\ncdh4.1.3/hadoop/lib/log4j-1.2.17.jar\r\ncdh4.1.3/hadoop/lib/commons-cli-1.2.jar\r\ncdh4.1.3/hadoop/lib/slf4j-api-1.6.1.jar\r\ncdh4.1.3/hadoop/lib/commons-configuration-1.6.jar\r\ncdh4.1.3/hadoop/lib/guava-11.0.2.jar\r\ncdh4.1.3/hadoop/lib/commons-lang-2.5.jar\r\ncdh4.1.3/hadoop/lib/native/\r\ncdh4.1.3/hadoop/lib/native/libhadooputils.a\r\ncdh4.1.3/hadoop/lib/native/libhdfs.a\r\ncdh4.1.3/hadoop/lib/native/libsnappy.so.1\r\ncdh4.1.3/hadoop/lib/native/libhadoop.so.1.0.0\r\ncdh4.1.3/hadoop/lib/native/libhadoop.so\r\ncdh4.1.3/hadoop/lib/native/libsnappy.so.1.1.3\r\ncdh4.1.3/hadoop/lib/native/libhadooppipes.a\r\ncdh4.1.3/hadoop/lib/native/libhadoop.a\r\ncdh4.1.3/hadoop/lib/native/libsnappy.so\r\ncdh4.1.3/hadoop/lib/slf4j-log4j12-1.6.1.jar\r\ncdh4.1.3/hadoop/hadoop-auth.jar\r\ncdh4.1.3/hadoop/hadoop-common.jar\r\ncdh4.1.3/hadoop-hdfs/\r\ncdh4.1.3/hadoop-hdfs/hadoop-hdfs.jar\r\n", "samplequery":"", "sampledata":"", "version":"7.0-nightly", "tofixin":"7.0-ea1", "fixedin":"7.0-ea1", "platform":"linux(64-bit)", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"jsolis", "name":"Julio Solis", "email":"Julio.Solis@marklogic.com"}, {"username":"jchen", "name":"Jane Chen", "email":"jane.chen@marklogic.com"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[], "cloneOf":"", "support":{"headline":"", "supportDescription":"", "publishStatus":"Never Publish", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["xdmp", "jsolis"], "changeHistory":[{"time":"2013-02-21T16:20:25.114267-08:00", "updatedBy":{"username":"jsolis", "name":"Julio Solis", "email":"Julio.Solis@marklogic.com"}, "change":{"assignTo":{"from":{"username":"jsolis", "name":"Julio Solis", "email":"Julio.Solis@marklogic.com"}, "to":{"username":"jchen", "name":"Jane Chen", "email":"jane.chen@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-21T18:01:22.51298-08:00", "updatedBy":{"username":"jchen", "name":"Jane Chen", "email":"jane.chen@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Julio,\r\n\r\nI got one which seems to work for me on rh5-intel64-42-test-1, but I don’t have sudo on that machine to replace your existing one.  Please try it out at /tmp/MarkLogic on that machine.\r\n\r\nAlso please try it on jsolis.  It’s supposed to work there as well.\r\n\r\nAnd then try it on a regression machine where you'll install the client.  I'm looking for hadoop under /usr, /opt, and /space, and a conf under /xxx/hadoop.  Please see if that works for you.\r\n\r\nI'll fix it if you find any issues.  Thanks!"}, {"time":"2013-02-21T18:13:50.737246-08:00", "updatedBy":{"username":"jchen", "name":"Jane Chen", "email":"jane.chen@marklogic.com"}, "change":{"status":{"from":"", "to":"Fix"}, "assignTo":{"from":{"username":"jchen", "name":"Jane Chen", "email":"jane.chen@marklogic.com"}, "to":{"username":"jchen", "name":"Jane Chen", "email":"jane.chen@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-21T18:13:50.737246-08:00", "updatedBy":{"username":"jchen", "name":"Jane Chen", "email":"jane.chen@marklogic.com"}, "change":{"tofixin":{"from":"", "to":"7.0-ea1"}}, "files":[], "show":true}, {"time":"2013-02-22T10:08:35.518103-08:00", "updatedBy":{"username":"jsolis", "name":"Julio Solis", "email":"Julio.Solis@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Thanks. I will give the script a try today. Will keep you posted."}, {"time":"2013-02-25T17:09:57.599956-08:00", "updatedBy":{"username":"jchen", "name":"Jane Chen", "email":"jane.chen@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Julio, please let me know when you have a chance to try it out."}, {"time":"2013-02-25T17:09:57.599956-08:00", "updatedBy":{"username":"jchen", "name":"Jane Chen", "email":"jane.chen@marklogic.com"}, "change":{"assignTo":{"from":{"username":"jchen", "name":"Jane Chen", "email":"jane.chen@marklogic.com"}, "to":{"username":"jsolis", "name":"Julio Solis", "email":"Julio.Solis@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-27T12:30:00.035875-08:00", "updatedBy":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"should this be in test?"}, {"time":"2013-02-27T17:26:27.938707-08:00", "updatedBy":{"username":"jsolis", "name":"Julio Solis", "email":"Julio.Solis@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Hi Jane.\r\n\r\nI've tested successfully with the following configs with test case hdfs-test.xml.\r\n- cloudera single node server with MarkLogic 7.0 local - passes\r\n- cloudera cluster server with MarkLogic 7.0 local - passes\r\n- cloudera cluster with MarkLogic 7.0 on a separate machine with cloudera thin client - passes \r\n\r\nThanks."}, {"time":"2013-02-27T17:26:38.118252-08:00", "updatedBy":{"username":"jsolis", "name":"Julio Solis", "email":"Julio.Solis@marklogic.com"}, "change":{"status":{"from":"", "to":"Verify"}, "assignTo":{"from":{"username":"jsolis", "name":"Julio Solis", "email":"Julio.Solis@marklogic.com"}, "to":{"username":"jsolis", "name":"Julio Solis", "email":"Julio.Solis@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-28T10:23:18.503064-08:00", "updatedBy":{"username":"jchen", "name":"Jane Chen", "email":"jane.chen@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"134140", "paths":["xdmp/trunk/src/linux/etc/sysconfig/MarkLogic", "xdmp/trunk/src/solaris/etc/MarkLogic.conf"], "affectedBugs":[]}, "comment":"Bug:20888\n- Support both CDH4 full installation and client installation\n- Separate out HADOOP_HDFS_HOME identification from CLASSPATH, LD_LIBRARY_PATH definition.\n"}, {"time":"2013-02-28T10:46:06.437014-08:00", "updatedBy":{"username":"jchen", "name":"Jane Chen", "email":"jane.chen@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"134143", "paths":["xdmp/branches/b7_0-ea1/src/linux/etc/sysconfig/MarkLogic", "xdmp/branches/b7_0-ea1/src/solaris/etc/MarkLogic.conf"], "affectedBugs":[]}, "comment":"Bug:20888\n- Support both CDH4 full installation and client installation\n- Separate out HADOOP_HDFS_HOME identification from CLASSPATH, LD_LIBRARY_PATH definition.\n\n"}, {"time":"2013-02-28T10:46:33.195028-08:00", "updatedBy":{"username":"jchen", "name":"Jane Chen", "email":"jane.chen@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"jchen", "name":"Jane Chen", "email":"jane.chen@marklogic.com"}, "to":{"username":"jsolis", "name":"Julio Solis", "email":"Julio.Solis@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-28T10:47:55.973039-08:00", "updatedBy":{"username":"jchen", "name":"Jane Chen", "email":"jane.chen@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"134146", "paths":["xdmp/branches/b6_0/src/solaris/etc/MarkLogic.conf", "xdmp/branches/b6_0/src/linux/etc/sysconfig/MarkLogic"], "affectedBugs":[]}, "comment":"Bug:20888\n- Support both CDH4 full installation and client installation\n- Separate out HADOOP_HDFS_HOME identification from CLASSPATH, LD_LIBRARY_PATH definition.\n\n"}, {"time":"2013-03-06T14:04:25.459993-08:00", "updatedBy":{"username":"jsolis", "name":"Julio Solis", "email":"Julio.Solis@marklogic.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"jsolis", "name":"Julio Solis", "email":"Julio.Solis@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"Verified MarkLogic script on multiple configurations:\r\n\r\n- ML7 with local CDH4 cluster\r\n- ML7 with local single node CDH4\r\n- ML7 client against CDH4 cluster\r\n- ML6 client against CDH4 cluster\r\n"}], "updatedAt":"2013-03-06T14:04:25.459993-08:00", "fixedAt":"2013-02-28T10:46:33.195028-08:00", "fixedBy":{"username":"jchen", "name":"Jane Chen", "email":"jane.chen@marklogic.com"}, "shippedAt":"2013-03-06T14:04:25.459993-08:00", "shippedBy":{"username":"jsolis", "name":"Julio Solis", "email":"Julio.Solis@marklogic.com"}, "renderDescriptionAs":"normal"}