{"id":20055, "kind":"Bug", "createdAt":"2012-11-09T16:03:56.092304-08:00", "status":"Closed", "title":"Maps: Yellow triangle shows after ploygon search when 2 maps are configured with same geo constraint", "category":"VizLogic-Widgets", "severity":"Minor", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"This is a very specific use case\r\n1) Deploy Oscar app configured with 2 maps with same geo constraint\r\n2) In built app, draw a polygon on map 1\r\n3) Map 2 shows the pins resulting from polygon search on map 1\r\n4) But the yellow triangle shows up in map 2 saying \"34 of 148 missing geospatial data\"\r\n\r\nExpected: No yellow triangle should appear after polygon search since all returned document have geo", "samplequery":"", "sampledata":"", "version":"6.0-nightly", "tofixin":"6.0-3", "fixedin":"6.0-3", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, {"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, {"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}], "attachments":[{"name":"2 maps with same geo index.JPG", "uri":"root/support/bugtracking/attachments/20055/2 maps with same geo index.JPG"}], "relationships":[{"type":"", "to":""}], "clones":[], "cloneOf":"", "support":{"headline":"", "supportDescription":"", "publishStatus":"Never Publish", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["VizLogic-Widgets", "sreddy"], "changeHistory":[{"time":"2012-11-09T16:03:56.092304-08:00", "updatedBy":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "change":{"assignTo":{"from":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "to":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}}}, "files":[], "show":true}, {"time":"2012-11-09T17:27:14.667832-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Christophe,\r\n\r\nPlease take a look at this. Given where we are at 6.0-2, I am moving this to 6.0-3. The use case about 2 maps associated with the same constraint would be very rare.\r\n\r\nBut, do please take a look at this. Thanks."}, {"time":"2012-11-09T17:27:14.667832-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}}}, "files":[], "show":true}, {"time":"2012-11-09T17:27:14.667832-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"tofixin":{"from":"6.0-2", "to":"6.0-3"}}, "files":[], "show":true}, {"time":"2013-02-05T11:13:38.329334-08:00", "updatedBy":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"I can verify that it happens, but am still wondering why."}, {"time":"2013-02-05T11:13:38.329334-08:00", "updatedBy":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "change":{"status":{"from":"", "to":"Fix"}, "assignTo":{"from":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "to":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-05T11:22:16.313927-08:00", "updatedBy":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"check, i WAS able to verify, but now I can't. There must be something subtle going on."}, {"time":"2013-02-05T12:58:42.494835-08:00", "updatedBy":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"I think this bug is to do with a race condition vis a vis shadow queries. I have to investigate further to be sure. "}, {"time":"2013-02-05T13:12:52.400733-08:00", "updatedBy":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"So the basic problem is that when you make a selection, the shadow query is also run. The bug is that if the shadow query finishes last, then the warning popup shows up, but if it finishes first, it doesn't. The fix is going to have to be something that keeps the shadow query response from triggering the flag at all."}, {"time":"2013-02-12T11:05:00.006581-08:00", "updatedBy":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"There's an unrelated bug, which is that in firefox, the yellow triangle doesn't consistently show up. It lead me down a rather annoying rathole. I'll open a separate bug for that issue, but I have a fix for this one."}, {"time":"2013-02-12T11:05:47.985653-08:00", "updatedBy":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"131409", "paths":["xdmp/trunk/src/Assets/appbuilder/components/appbuilder-2.0/lib/viz/map/map.js"], "affectedBugs":[]}, "comment":"Bug:20055 - fix for yellow triangle showing up inappropriately"}, {"time":"2013-02-12T11:08:07.075091-08:00", "updatedBy":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"131410", "paths":["xdmp/branches/b6_0/src/Assets/appbuilder/components/appbuilder-2.0/lib/viz/map/map.js"], "affectedBugs":[]}, "comment":"Bug:20055 - fix for yellow triangle showing up inappropriately"}, {"time":"2013-02-12T11:10:07.667161-08:00", "updatedBy":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "to":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}}}, "files":[], "show":true, "comment":"The actual issue ended up being an empty logic branch that was being hit which didn't clear out the old status message. No new status message was being set, but since the old one didn't go away, it looked like there was an incorrect status message being set. I'll file a new bug for the firefox issue of status boxes only appearing sometimes, which is a completely separate issue."}, {"time":"2013-02-12T11:10:07.667161-08:00", "updatedBy":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "change":{"assignTo":{"from":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "to":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-03-26T13:37:01.140705-07:00", "updatedBy":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"Bug  verified"}, {"time":"2013-03-26T13:37:01.140705-07:00", "updatedBy":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "change":{"assignTo":{"from":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}], "updatedAt":"2013-03-26T13:37:01.140705-07:00", "fixedAt":"2013-02-12T11:10:07.667161-08:00", "fixedBy":{"username":"ctaylor", "name":"Christophe Taylor", "email":"christophe.taylor@marklogic.com"}, "shippedAt":"2013-03-26T13:37:01.140705-07:00", "shippedBy":{"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, "renderDescriptionAs":"normal"}