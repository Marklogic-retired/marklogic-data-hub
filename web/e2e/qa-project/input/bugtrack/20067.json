{"id":20067, "kind":"Bug", "createdAt":"2012-11-12T17:11:19.250137-08:00", "status":"Closed", "title":"REGR: UPGRADE: Unable to start loading on existing flow after ML is upgraded from 4.2 or 5.0 to 6.0", "category":"InfoStudio UI", "severity":"Major", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"ayuwono", "name":"Aries Yuwono", "email":"ayuwono@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"Build: 6.0-20121112\r\n\r\nSteps:\r\n=====\r\n1) Install ML version 4.2-9.2 or 5.0-4\r\n2) Create an infostudio user\r\n3) Login to appservices using infostudio user\r\n4) Create a new database \"MyDB\"\r\n5) Create a new flow that's set to database \"MyDB\"\r\n6) Load documents using filesystem directory collector\r\n7) Upgrade to ML version 6.0-2\r\n8) Login to appservices using infostudio user\r\n9) Select the existing flow created on step #5\r\n10) Clear the DB (unload documents from DB)\r\n11) Start loading using the same filesystem directory collector setting that's set on step #6\r\n\r\nActual Result\r\n===========\r\nThere is an error message that's saying: Unable to start collector\r\n\r\nYou also can't stop the flow\r\n\r\nThe page freezes after that\r\n\r\nWhen a new flow is created after the upgrade, it's working fine on loading the documents\r\n\r\nServer log:\r\n\r\n2012-11-12 16:55:44.927 Info: App-Services: <error array=\"true\">Unable to start collector</error>\r\n2012-11-12 16:55:44.927 Info: App-Services: <error:error xsi:schemaLocation=\"http://marklogic.com/xdmp/error error.xsd\" xmlns:error=\"http://marklogic.com/xdmp/error\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\r\n2012-11-12 16:55:44.927 Info: App-Services:   <error:code>PLUGIN-NOTREGISTERED</error:code>\r\n2012-11-12 16:55:44.927 Info: App-Services:   <error:name>err:FOER0000</error:name>\r\n2012-11-12 16:55:44.927 Info: App-Services:   <error:xquery-version>1.0-ml</error:xquery-version>\r\n2012-11-12 16:55:44.927 Info: App-Services:   <error:message>PLUGIN-NOTREGISTERED</error:message>\r\n2012-11-12 16:55:44.927 Info: App-Services:   <error:format-string/>\r\n2012-11-12 16:55:44.927 Info: App-Services:   <error:retryable>false</error:retryable>\r\n2012-11-12 16:55:44.927 Info: App-Services:   <error:expr> </error:expr>\r\n2012-11-12 16:55:44.927 Info: App-Services:   <error:data>\r\n2012-11-12 16:55:44.927 Info: App-Services:     <error:datum>Plugin collector-filescan.xqy is not registered in scope marklogic.appservices</error:datum>\r\n2012-11-12 16:55:44.927 Info: App-Services:   </error:data>\r\n2012-11-12 16:55:44.927 Info: App-Services:   <error:stack>\r\n2012-11-12 16:55:44.927 Info: App-Services:     <error:frame>\r\n2012-11-12 16:55:44.927 Info: App-Services:       <error:uri>/MarkLogic/plugin/plugin-impl.xqy</error:uri>\r\n2012-11-12 16:55:44.927 Info: App-Services:       <error:line>94</error:line>\r\n2012-11-12 16:55:44.927 Info: App-Services:       <error:column>13</error:column>\r\n2012-11-12 16:55:44.927 Info: App-Services:       <error:operation>plug-impl:do-capability(\"http://marklogic.com/appservices/infostudio/collector/cancel\", \"collector-filescan.xqy\", \"marklogic.appservices\")</error:operation>\r\n2012-11-12 16:55:44.927 Info: App-Services:       <error:variables>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t<error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:name xmlns=\"http://marklogic.com/extension/plugin-impl\">capability</error:name>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:value>\"http://marklogic.com/appservices/infostudio/collector/cancel\"</error:value>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t</error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t<error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:name xmlns=\"http://marklogic.com/extension/plugin-impl\">uri</error:name>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:value>\"collector-filescan.xqy\"</error:value>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t</error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t<error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:name xmlns=\"http://marklogic.com/extension/plugin-impl\">scope</error:name>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:value>\"marklogic.appservices\"</error:value>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t</error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t<error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:name xmlns=\"http://marklogic.com/extension/plugin-impl\">map</error:name>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:value>()</error:value>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t</error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services:       </error:variables>\r\n2012-11-12 16:55:44.927 Info: App-Services:       <error:xquery-version>1.0-ml</error:xquery-version>\r\n2012-11-12 16:55:44.927 Info: App-Services:     </error:frame>\r\n2012-11-12 16:55:44.927 Info: App-Services:     <error:frame>\r\n2012-11-12 16:55:44.927 Info: App-Services:       <error:uri>/MarkLogic/plugin/plugin.xqy</error:uri>\r\n2012-11-12 16:55:44.927 Info: App-Services:       <error:line>68</error:line>\r\n2012-11-12 16:55:44.927 Info: App-Services:       <error:column>4</error:column>\r\n2012-11-12 16:55:44.927 Info: App-Services:       <error:operation>plugin:capability(\"http://marklogic.com/appservices/infostudio/collector/cancel\", \"collector-filescan.xqy\", \"marklogic.appservices\")</error:operation>\r\n2012-11-12 16:55:44.927 Info: App-Services:       <error:variables>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t<error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:name xmlns=\"http://marklogic.com/extension/plugin\">capability</error:name>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:value>\"http://marklogic.com/appservices/infostudio/collector/cancel\"</error:value>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t</error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t<error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:name xmlns=\"http://marklogic.com/extension/plugin\">uri</error:name>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:value>\"collector-filescan.xqy\"</error:value>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t</error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t<error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:name xmlns=\"http://marklogic.com/extension/plugin\">scope</error:name>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:value>\"marklogic.appservices\"</error:value>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t</error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services:       </error:variables>\r\n2012-11-12 16:55:44.927 Info: App-Services:       <error:xquery-version>1.0-ml</error:xquery-version>\r\n2012-11-12 16:55:44.927 Info: App-Services:     </error:frame>\r\n2012-11-12 16:55:44.927 Info: App-Services:     <error:frame>\r\n2012-11-12 16:55:44.927 Info: App-Services:       <error:uri>/MarkLogic/appservices/infostudio/info-impl.xqy</error:uri>\r\n2012-11-12 16:55:44.927 Info: App-Services:       <error:line>1382</error:line>\r\n2012-11-12 16:55:44.927 Info: App-Services:       <error:column>21</error:column>\r\n2012-11-12 16:55:44.927 Info: App-Services:       <error:operation>impl:do-flow-cancel(\"11387599054038786116\")</error:operation>\r\n2012-11-12 16:55:44.927 Info: App-Services:       <error:variables>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t<error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:name xmlns=\"http://marklogic.com/appservices/infostudio-impl\">flow-id</error:name>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:value>\"11387599054038786116\"</error:value>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t</error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t<error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:name xmlns=\"http://marklogic.com/appservices/infostudio-impl\">ticket-id</error:name>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:value>\"/tickets/ticket/15965912039650585040\"</error:value>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t</error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t<error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:name xmlns=\"http://marklogic.com/appservices/infostudio-impl\">capability</error:name>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:value>\"http://marklogic.com/appservices/infostudio/collector/cancel\"</error:value>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t</error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t<error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:name xmlns=\"http://marklogic.com/appservices/infostudio-impl\">collector-uri</error:name>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:value>\"collector-filescan.xqy\"</error:value>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t</error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services:       </error:variables>\r\n2012-11-12 16:55:44.927 Info: App-Services:       <error:xquery-version>1.0-ml</error:xquery-version>\r\n2012-11-12 16:55:44.927 Info: App-Services:     </error:frame>\r\n2012-11-12 16:55:44.927 Info: App-Services:     <error:frame>\r\n2012-11-12 16:55:44.927 Info: App-Services:       <error:uri>/MarkLogic/appservices/infostudio/info.xqy</error:uri>\r\n2012-11-12 16:55:44.927 Info: App-Services:       <error:line>149</error:line>\r\n2012-11-12 16:55:44.927 Info: App-Services:       <error:column>4</error:column>\r\n2012-11-12 16:55:44.927 Info: App-Services:       <error:operation>info:flow-cancel(\"11387599054038786116\")</error:operation>\r\n2012-11-12 16:55:44.927 Info: App-Services:       <error:variables>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t<error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:name xmlns=\"http://marklogic.com/appservices/infostudio\">flow-id</error:name>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:value>\"11387599054038786116\"</error:value>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t</error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services:       </error:variables>\r\n2012-11-12 16:55:44.927 Info: App-Services:       <error:xquery-version>1.0-ml</error:xquery-version>\r\n2012-11-12 16:55:44.927 Info: App-Services:     </error:frame>\r\n2012-11-12 16:55:44.927 Info: App-Services:     <error:frame>\r\n2012-11-12 16:55:44.927 Info: App-Services:       <error:uri>/infostudio/endpoints/collector-manager.xqy</error:uri>\r\n2012-11-12 16:55:44.927 Info: App-Services:       <error:line>49</error:line>\r\n2012-11-12 16:55:44.927 Info: App-Services:       <error:column>21</error:column>\r\n2012-11-12 16:55:44.927 Info: App-Services:       <error:variables>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t<error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:name xmlns=\"\">set</error:name>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:value>()</error:value>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t</error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t<error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:name xmlns=\"\">flow-id</error:name>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:value>\"11387599054038786116\"</error:value>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t</error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t<error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:name xmlns=\"\">action</error:name>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:value>\"start\"</error:value>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t</error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t<error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:name xmlns=\"\">tid</error:name>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:value>()</error:value>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t</error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t<error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:name xmlns=\"\">mode</error:name>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:value>\"json\"</error:value>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t</error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t<error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:name xmlns=\"\">flow</error:name>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:value>fn:doc(\"/flows/11387599054038786116.xml\")/info:flow</error:value>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t</error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t<error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:name xmlns=\"\">flow-id</error:name>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:value>\"11387599054038786116\"</error:value>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t</error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t<error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:name xmlns=\"\">collector-id</error:name>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:value>\"9195199097797288678\"</error:value>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t</error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t<error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:name xmlns=\"\">collector</error:name>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:value>fn:doc(\"/flows/11387599054038786116.xml\")/info:flow/info:collectors/info:collector</error:value>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t</error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t<error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:name xmlns=\"\">collector-uri</error:name>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:value>\"collector-filescan.xqy\"</error:value>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t</error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t<error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:name xmlns=\"\">long-running</error:name>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:value>fn:false()</error:value>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t</error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t<error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:name xmlns=\"\">e</error:name>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t  <error:value>&lt;error:error xsi:schemaLocation=\"http://marklogic.com/xdmp/error error.xsd\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:error=\"http://marklogic.com/xdmp/error\"&gt;&lt;error:code&gt;PLUGIN-NOTREGISTERED&lt;/error:code&gt;&lt;error:name&gt;err:FOE...&lt;/error:error&gt;</error:value>\r\n2012-11-12 16:55:44.927 Info: App-Services: \t</error:variable>\r\n2012-11-12 16:55:44.927 Info: App-Services:       </error:variables>\r\n2012-11-12 16:55:44.927 Info: App-Services:       <error:xquery-version>1.0-ml</error:xquery-version>\r\n2012-11-12 16:55:44.927 Info: App-Services:     </error:frame>\r\n2012-11-12 16:55:44.927 Info: App-Services:   </error:stack>\r\n2012-11-12 16:55:44.927 Info: App-Services: </error:error>", "samplequery":"", "sampledata":"", "version":"6.0-nightly", "tofixin":"6.0-2", "fixedin":"6.0-2", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"ayuwono", "name":"Aries Yuwono", "email":"ayuwono@marklogic.com"}, {"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, {"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, {"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, {"username":"knagar", "name":"Kuldeep Nagar", "email":"Kuldeep.Nagar@marklogic.com"}, {"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[20082], "cloneOf":"", "support":{"headline":"InfoStudio flow cannot collect after upgrade", "supportDescription":"After upgrade to MarkLogic 6, an existing InfoStudio flow executed without first editing and saving the flow failed during collection and could not be cancelled.  ", "publishStatus":"Publish", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":"Edit and save the flow after upgrading to MarkLogic 6 before collecting new data."}, "tags":["InfoStudio UI", "ayuwono"], "changeHistory":[{"time":"2012-11-12T17:11:19.250137-08:00", "updatedBy":{"username":"ayuwono", "name":"Aries Yuwono", "email":"ayuwono@marklogic.com"}, "change":{"assignTo":{"from":{"username":"ayuwono", "name":"Aries Yuwono", "email":"ayuwono@marklogic.com"}, "to":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}}}, "files":[], "show":true}, {"time":"2012-11-12T17:26:17.967982-08:00", "updatedBy":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Is this a new test?  Did this work in 6.0-1?"}, {"time":"2012-11-12T17:28:35.91399-08:00", "updatedBy":{"username":"ayuwono", "name":"Aries Yuwono", "email":"ayuwono@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Let me try it to upgrade to 6.0-1 Danny, and let me ask the India team that usually do this scenario"}, {"time":"2012-11-12T17:28:35.91399-08:00", "updatedBy":{"username":"ayuwono", "name":"Aries Yuwono", "email":"ayuwono@marklogic.com"}, "change":{"assignTo":{"from":{"username":"ayuwono", "name":"Aries Yuwono", "email":"ayuwono@marklogic.com"}, "to":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}}}, "files":[], "show":true}, {"time":"2012-11-12T18:55:14.852365-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"With 6.0-1, I do not see any issues. Will try 6.0-2."}, {"time":"2012-11-12T18:56:55.57997-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"What I meant was that when I upgrader from 5.0 to 6.0-1 and try the steps, I cannot reproduce the error. I will try 5.0-4 to 6.0-2 and try"}, {"time":"2012-11-12T20:37:24.849304-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Micah,\r\n\r\nI was able to reproduce this after I upgraded from 5.0-4 to 6.0-2. You do not even have to be infostudio user. I tried as admin and got the same error. Please give this highest priority. We are trying to ship 6.0-2 by Wednesday evening.\r\n\r\nThanks,\r\n\r\nGanesh"}, {"time":"2012-11-12T20:37:45.893818-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}}}, "files":[], "show":true}, {"time":"2012-11-12T21:43:32.17916-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Erik,\r\n\r\nI think this is related to the plugin changes made on 10/26, bug 19923. can you please take a look at this. Please give this highest priority. We are trying to ship 6.0-2 by Wednesday evening.\r\n\r\nThanks,\r\n\r\nGanesh"}, {"time":"2012-11-12T21:43:32.17916-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}}}, "files":[], "show":true}, {"time":"2012-11-13T10:34:03.804631-08:00", "updatedBy":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Seems to be something in the configuration of the flow because the pre-upgrade flow continues to fail\r\neven after creating a new flow that works. \r\n"}, {"time":"2012-11-13T10:37:59.315593-08:00", "updatedBy":{"username":"ayuwono", "name":"Aries Yuwono", "email":"ayuwono@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"This bug is also happening when upgrading to 6.0-1.1 "}, {"time":"2012-11-13T12:07:22.340898-08:00", "updatedBy":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"On line 1381 of src/Modules/MarkLogic/appservices/infostudio/info-impl.xqy, we use the unmodified\r\nplugin:collector-uri from the ticket.\r\n\r\nThe ticket isn't modified by the upgrade-on-demand transform for the flow in upgrade-flow-to-6() within \r\nsrc/Apps/infostudio/models/flow-model.xqy\r\n"}, {"time":"2012-11-13T12:43:50.347823-08:00", "updatedBy":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"That's a brilliant analysis. So, do we need to retroactively rewrite tickets? What else is on the table to address this?"}, {"time":"2012-11-13T13:03:48.437043-08:00", "updatedBy":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Also, on line 1410 of src/Modules/MarkLogic/appservices/infostudio/info-impl.xqy, we use the unmodified flow\r\n(because the info-impl.xqy doesn't go through the model).\r\n\r\nMicah and I discussed the long term and short term fix.  Short term, best to have a small blast radius,\r\nso best to just modify the uris after retrieved.\r\n\r\nLong term, best to move the model code over the the Modules, to have a single access path\r\nto flows and tickets, and to have an Appservices upgrade step that persists the upgrade changes.\r\n"}, {"time":"2012-11-13T13:42:16.1231-08:00", "updatedBy":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "change":{"status":{"from":"", "to":"Fix"}, "assignTo":{"from":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "to":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}}}, "files":[], "show":true, "comment":"patch in review"}, {"time":"2012-11-13T14:05:12.998421-08:00", "updatedBy":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"120398", "paths":["xdmp/branches/b6_0/src/Modules/MarkLogic/appservices/infostudio/info-impl.xqy"], "affectedBugs":[]}, "comment":"Bug:20067 strip extensions from plugin names for collectors "}, {"time":"2012-11-13T14:06:04.071282-08:00", "updatedBy":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "to":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}}}, "files":[], "show":true, "comment":"test by upgrade from 5.0 with collector and transform"}, {"time":"2012-11-13T14:06:04.071282-08:00", "updatedBy":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "change":{"assignTo":{"from":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "to":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}}}, "files":[], "show":true}, {"time":"2012-11-13T14:20:48.727213-08:00", "updatedBy":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Aries,\r\n\r\nAs discussed, let us run following four scenarios on 3:30pm Windows sandbox build. We should run the scenarios in 4.2-9->6.0-2,5.0-4->6.0-2 and 6.0-1->6.0-2 upgrade paths:\r\n\r\n1. Have a flow without transformation before upgrade and use it post upgrade to load documents\r\n2. 1. Have a flow with transformation before upgrade and use it post upgrade to load documents\r\n3. Create a new flow without transformation post upgrade and load documents using this flow\r\n4.  Create a new flow with transformation post upgrade and load documents using this flow\r\n\r\nAfter you are done with it, assign the bug to me and I will check the same on 5pm linux sandbox and if everything goes well I will ship it.\r\n"}, {"time":"2012-11-13T14:20:48.727213-08:00", "updatedBy":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "change":{"assignTo":{"from":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "to":{"username":"ayuwono", "name":"Aries Yuwono", "email":"ayuwono@marklogic.com"}}}, "files":[], "show":true}, {"time":"2012-11-13T17:13:07.049866-08:00", "updatedBy":{"username":"ayuwono", "name":"Aries Yuwono", "email":"ayuwono@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Tested on windows 3:30pm sandbox build\r\n4.2-9->6.0-2,\r\n5.0-4->6.0-2, \r\nand 6.0-1->6.0-2\r\n\r\nAll scenarios are working fine "}, {"time":"2012-11-13T17:13:07.049866-08:00", "updatedBy":{"username":"ayuwono", "name":"Aries Yuwono", "email":"ayuwono@marklogic.com"}, "change":{"assignTo":{"from":{"username":"ayuwono", "name":"Aries Yuwono", "email":"ayuwono@marklogic.com"}, "to":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}}}, "files":[], "show":true}, {"time":"2012-11-14T12:30:07.977968-08:00", "updatedBy":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"We verified this fix on 1113 3pm windows and linux sandbox and the issue is fixed."}, {"time":"2012-11-14T12:30:07.977968-08:00", "updatedBy":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "change":{"assignTo":{"from":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}, {"time":"2012-11-21T15:48:58.928773-08:00", "updatedBy":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "change":{"status":{"from":"", "to":"Closed"}, "assignTo":{"from":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}], "updatedAt":"2012-11-21T15:48:58.928773-08:00", "fixedAt":"2012-11-13T14:06:04.071282-08:00", "fixedBy":{"username":"ehennum", "name":"Erik Hennum", "email":"erik.hennum@marklogic.com"}, "shippedAt":"2012-11-14T12:30:07.977968-08:00", "shippedBy":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "closedAt":"2012-11-21T15:48:58.928773-08:00", "closedBy":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "renderDescriptionAs":"normal"}