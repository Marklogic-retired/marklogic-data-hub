{"id":20665, "kind":"Bug", "createdAt":"2013-01-31T10:24:00.08978-08:00", "status":"Closed", "title":"5.0 search unit-test failure", "category":"xdmp", "severity":"Minor", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"ayuwono", "name":"Aries Yuwono", "email":"ayuwono@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"This test is failing on solaris cluster only\r\n\r\n<h:result-text><results notice=\"empty if all tests ran successfully\"><report group=\"search\"><setup/><tests><FAIL test-id=\"g28\"><result>prop:date: prop:format: prop:persona: prop:summary: prop:intitle: prop:id: prop:line: prop:0 prop:00 prop:009149</result><expected>prop:date: prop:format: prop:persona: prop:summary: prop:intitle: prop:id: prop:line: prop:0 prop:00 prop:01</expected></FAIL><FAIL test-id=\"g29\"><result>line:date: line:format: line:persona: line:summary: line:intitle: line:id: line:line: line:0 line:00 line:009149</result><expected>line:date: line:format: line:persona: line:summary: line:intitle: line:id: line:line: line:0 line:00 line:01</expected></FAIL></tests><teardown/></report></results></h:result-text>", "samplequery":"", "sampledata":"", "version":"5.0-nightly", "tofixin":"5.0-5", "fixedin":"5.0-5", "platform":"solaris(sparc)", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"ayuwono", "name":"Aries Yuwono", "email":"ayuwono@marklogic.com"}, {"username":"cgreer", "name":"Charles Greer", "email":"charles.greer@marklogic.com"}, {"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[], "cloneOf":"", "support":{"headline":"", "supportDescription":"", "publishStatus":"Never Publish", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["xdmp", "ayuwono"], "changeHistory":[{"time":"2013-01-31T10:24:00.08978-08:00", "updatedBy":{"username":"ayuwono", "name":"Aries Yuwono", "email":"ayuwono@marklogic.com"}, "change":{"assignTo":{"from":{"username":"ayuwono", "name":"Aries Yuwono", "email":"ayuwono@marklogic.com"}, "to":{"username":"cgreer", "name":"Charles Greer", "email":"charles.greer@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-31T10:33:37.525591-08:00", "updatedBy":{"username":"cgreer", "name":"Charles Greer", "email":"charles.greer@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Looks like some funky data issue -- expected has '01' where actual has '009149'.  Will you see if this rights itself in a subsequent build?"}, {"time":"2013-01-31T10:40:27.791594-08:00", "updatedBy":{"username":"ayuwono", "name":"Aries Yuwono", "email":"ayuwono@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"It's different from build to build. Like this, it was from the day before:\r\n\r\n<h:result-text><results notice=\"empty if all tests ran successfully\"><report group=\"search\"><setup/><tests><FAIL test-id=\"g28\"><result>prop:date: prop:format: prop:persona: prop:summary: prop:intitle: prop:id: prop:line: prop:0 prop:00 prop:007637</result><expected>prop:date: prop:format: prop:persona: prop:summary: prop:intitle: prop:id: prop:line: prop:0 prop:00 prop:01</expected></FAIL><FAIL test-id=\"g29\"><result>line:date: line:format: line:persona: line:summary: line:intitle: line:id: line:line: line:0 line:00 line:007637</result><expected>line:date: line:format: line:persona: line:summary: line:intitle: line:id: line:line: line:0 line:00 line:01</expected></FAIL></tests><teardown/></report></results></h:result-text>"}, {"time":"2013-02-01T15:11:01.100708-08:00", "updatedBy":{"username":"cgreer", "name":"Charles Greer", "email":"charles.greer@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"I have a hypothesis and workaround for this issue.  Note the difference between expected and actual:\r\n\r\nvaries with build.\r\nonly happens on solaris.\r\n\r\nI believe that the value  line:007637 is based on some system-specific date respresentation.\r\n\r\nIf I up the suggest limit on linux, I begin to get non-deterministic suggestinos after line:01: \r\n\r\nline:01 line:01T12\r\n\r\nThese look like date or time related values.  My suspicion is that, on solaris, there's a system-dependent time string that sorts below \"01\" and hence disrupts the tenth suggest test.\r\n\r\nMy workaround would be to change the suggest limit from 10 to 9 for this test case.  Then it should pass.   I don't think the underlying issue is significant.\r\n"}, {"time":"2013-02-04T10:04:20.143885-08:00", "updatedBy":{"username":"ayuwono", "name":"Aries Yuwono", "email":"ayuwono@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Hi Charles, did you put a fix on this? it seems that it's not happening anymore, can you just put it on test so I can ship it. Thanks"}, {"time":"2013-02-04T10:13:57.132494-08:00", "updatedBy":{"username":"cgreer", "name":"Charles Greer", "email":"charles.greer@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"I did not fix anything for this no."}, {"time":"2013-02-04T10:15:12.098758-08:00", "updatedBy":{"username":"cgreer", "name":"Charles Greer", "email":"charles.greer@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"cgreer", "name":"Charles Greer", "email":"charles.greer@marklogic.com"}, "to":{"username":"ayuwono", "name":"Aries Yuwono", "email":"ayuwono@marklogic.com"}}}, "files":[], "show":true, "comment":"I didn't fix anything but I couldn't reproduce it either -- if solaris is happy now and stays that way I'd recommend shipping."}, {"time":"2013-02-04T10:15:12.098758-08:00", "updatedBy":{"username":"cgreer", "name":"Charles Greer", "email":"charles.greer@marklogic.com"}, "change":{"assignTo":{"from":{"username":"cgreer", "name":"Charles Greer", "email":"charles.greer@marklogic.com"}, "to":{"username":"ayuwono", "name":"Aries Yuwono", "email":"ayuwono@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-04T10:21:05.349303-08:00", "updatedBy":{"username":"ayuwono", "name":"Aries Yuwono", "email":"ayuwono@marklogic.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"ayuwono", "name":"Aries Yuwono", "email":"ayuwono@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"Verified passed on regression"}, {"time":"2013-02-04T10:21:05.349303-08:00", "updatedBy":{"username":"ayuwono", "name":"Aries Yuwono", "email":"ayuwono@marklogic.com"}, "change":{"assignTo":{"from":{"username":"ayuwono", "name":"Aries Yuwono", "email":"ayuwono@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-25T16:57:48.792747-08:00", "updatedBy":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "change":{"status":{"from":"", "to":"Closed"}, "assignTo":{"from":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}], "updatedAt":"2013-02-25T16:57:48.792747-08:00", "fixedAt":"2013-02-04T10:15:12.098758-08:00", "fixedBy":{"username":"cgreer", "name":"Charles Greer", "email":"charles.greer@marklogic.com"}, "shippedAt":"2013-02-04T10:21:05.349303-08:00", "shippedBy":{"username":"ayuwono", "name":"Aries Yuwono", "email":"ayuwono@marklogic.com"}, "closedAt":"2013-02-25T16:57:48.792747-08:00", "closedBy":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "renderDescriptionAs":"normal"}