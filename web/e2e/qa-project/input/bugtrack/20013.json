{"id":20013, "kind":"Bug", "createdAt":"2012-11-07T02:46:30.021686-08:00", "status":"Will not fix", "title":"cant set trace events in diagnostics", "category":"adminGUI", "severity":"Major", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"jfuller", "name":"Jim Fuller", "email":"jim.fuller@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"error when trying to add trace event via diagnostics ui admin.\r\n\r\nthis is due to an 'upstream' change in func signature ( and/or element can now have multiple elements )\r\n\r\nthe fix is straightforward e.g. replace reference to $name2 with a FLOWR structure ... even though we only ever will have 1 result it ensures that we do not get an error due to func signature\r\n\r\nI have attached diff patch for fix for review\r\n\r\n\r\nIndex: Admin/diagnostics-admin-go.xqy\r\n===================================================================\r\n--- Admin/diagnostics-admin-go.xqy\t(revision 119831)\r\n+++ Admin/diagnostics-admin-go.xqy\t(working copy)\r\n@@ -177,7 +177,7 @@\r\n       else\r\n       if ($complex[xs:choice]) then\r\n         let $name2 := data($complex/xs:choice/xs:element/@ref),\r\n-      $lname2 := get-local-name-from-QName($name2)\r\n+      $lname2 :=  for $n in $name2 return get-local-name-from-QName($n)\r\n         for $value2 in $val/*[node-name(.) eq $name2]\r\n         return\r\n           element { $name2 } {", "samplequery":"goto red admin\r\n\r\ngroups>default>diagnostics\r\n\r\ntry to add trace event (ex. Concurrent Facets)\r\n", "sampledata":"", "version":"7.0-nightly", "tofixin":"N/A", "fixedin":"N/A", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"jfuller", "name":"Jim Fuller", "email":"jim.fuller@marklogic.com"}, {"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[], "cloneOf":"", "support":{"headline":"", "supportDescription":"", "publishStatus":"Not Ready", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["adminGUI", "jfuller"], "changeHistory":[{"time":"2012-11-07T02:46:30.021686-08:00", "updatedBy":{"username":"jfuller", "name":"Jim Fuller", "email":"jim.fuller@marklogic.com"}, "change":{"assignTo":{"from":{"username":"jfuller", "name":"Jim Fuller", "email":"jim.fuller@marklogic.com"}, "to":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}}}, "files":[], "show":true}, {"time":"2012-11-07T07:28:45.694541-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"tofixin":{"from":"6.0-2", "to":"6.1-1"}}, "files":[], "show":true}, {"time":"2013-01-28T12:03:20.67661-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Jim,\r\n\r\nI cannot reproduce this in 7.0-1. Can you please confirm if this still exists? Thanks"}, {"time":"2013-01-28T12:47:59.516725-08:00", "updatedBy":{"username":"jfuller", "name":"Jim Fuller", "email":"jim.fuller@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"jfuller", "name":"Jim Fuller", "email":"jim.fuller@marklogic.com"}, "to":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}}}, "files":[], "show":true, "comment":"can confirm that this works now in latest trunk"}, {"time":"2013-01-28T12:58:23.832605-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"status":{"from":"", "to":"Will not fix"}, "assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"not reproducible in 7.0-1"}, {"time":"2013-01-28T12:58:23.832605-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-28T12:58:23.832605-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"tofixin":{"from":"7.0-1", "to":"N/A"}}, "files":[], "show":true}], "updatedAt":"2013-01-28T12:58:23.832605-08:00", "fixedAt":"2013-01-28T12:47:59.516725-08:00", "fixedBy":{"username":"jfuller", "name":"Jim Fuller", "email":"jim.fuller@marklogic.com"}, "renderDescriptionAs":"normal", "renderSampleQueryAs":"normal"}