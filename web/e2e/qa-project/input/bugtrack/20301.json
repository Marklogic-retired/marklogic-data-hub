{"id":20301, "kind":"Bug", "createdAt":"2012-12-17T12:48:01.639232-08:00", "status":"Closed", "title":"sec:role-set-external-name and sec:role-get-external-name no workie", "category":"security", "severity":"Major", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"gfurbush", "name":"Gordon Furbush ", "email":"gfurbush@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"The following function does not add an external name to the admin role:\r\n\r\nsec:role-set-external-name(\"admin\", \"group1\")\r\n\r\nNo change seen in the admin UI and:\r\n\r\nsec:role-get-external-name(\"admin\")\r\n\r\n=>\r\n\r\n[1.0-ml] XDMP-AS: (err:XPTY0004) sec:role-get-external-name(\"admin\") -- Invalid coercion: () as xs:string\r\nStack Trace\r\n\r\nIn /MarkLogic/security.xqy on line 848\r\nIn sec:role-get-external-name(\"admin\")\r\n$role-name := \"admin\"\r\nAt line 6 column 0:\r\n4. at \"/MarkLogic/security.xqy\";\r\n5. \r\n6. sec:role-get-external-name(\"admin\")\r\n", "samplequery":"", "sampledata":"", "version":"7.0-nightly", "tofixin":"7.0-ea1", "fixedin":"7.0-ea1", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"gfurbush", "name":"Gordon Furbush ", "email":"gfurbush@marklogic.com"}, {"username":"atsoi", "name":"Arthur Tsoi", "email":"arthur.tsoi@marklogic.com"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[], "cloneOf":"", "support":{"headline":"", "supportDescription":"", "publishStatus":"Not Ready", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["security", "gfurbush"], "changeHistory":[{"time":"2012-12-17T12:48:01.639232-08:00", "updatedBy":{"username":"gfurbush", "name":"Gordon Furbush ", "email":"gfurbush@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gfurbush", "name":"Gordon Furbush ", "email":"gfurbush@marklogic.com"}, "to":{"username":"atsoi", "name":"Arthur Tsoi", "email":"arthur.tsoi@marklogic.com"}}}, "files":[], "show":true}, {"time":"2012-12-17T16:29:44.854165-08:00", "updatedBy":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, "change":{"tofixin":{"from":"", "to":"7.0-ea1"}}, "files":[], "show":true}, {"time":"2012-12-19T15:02:22.647951-08:00", "updatedBy":{"username":"atsoi", "name":"Arthur Tsoi", "email":"arthur.tsoi@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"124720", "paths":["xdmp/trunk/src/Modules/MarkLogic/security.xqy", "xdmp/trunk/src/Config/security.xml", "xdmp/trunk/src/Admin/role-admin-go.xqy", "xdmp/trunk/src/Admin/user-admin-go.xqy"], "affectedBugs":["20300"]}, "comment":"bug:20300 bug:20301 fix get and set external-names functions"}, {"time":"2012-12-19T15:04:17.183718-08:00", "updatedBy":{"username":"atsoi", "name":"Arthur Tsoi", "email":"arthur.tsoi@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"it should be role-get-external-names and role-set-external-names"}, {"time":"2012-12-19T15:04:34.894184-08:00", "updatedBy":{"username":"atsoi", "name":"Arthur Tsoi", "email":"arthur.tsoi@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"atsoi", "name":"Arthur Tsoi", "email":"arthur.tsoi@marklogic.com"}, "to":{"username":"svempati", "name":"Sundeep Vempati", "email":"sundeep.vempati@marklogic.com"}}}, "files":[], "show":true}, {"time":"2012-12-19T15:04:34.894184-08:00", "updatedBy":{"username":"atsoi", "name":"Arthur Tsoi", "email":"arthur.tsoi@marklogic.com"}, "change":{"assignTo":{"from":{"username":"atsoi", "name":"Arthur Tsoi", "email":"arthur.tsoi@marklogic.com"}, "to":{"username":"svempati", "name":"Sundeep Vempati", "email":"sundeep.vempati@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-06-09T17:08:37.965952-07:00", "updatedBy":{"username":"svempati", "name":"Sundeep Vempati", "email":"sundeep.vempati@marklogic.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"svempati", "name":"Sundeep Vempati", "email":"sundeep.vempati@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"Verified with MarkLogic-7.0-20130609\r\n\r\nTests in regression : extsec-ldap-04.xml, extsec-ldap-05.xml\r\nTestsuite : extsec"}], "updatedAt":"2013-06-09T17:08:37.965952-07:00", "fixedAt":"2012-12-19T15:04:34.894184-08:00", "fixedBy":{"username":"atsoi", "name":"Arthur Tsoi", "email":"arthur.tsoi@marklogic.com"}, "shippedAt":"2013-06-09T17:08:37.965952-07:00", "shippedBy":{"username":"svempati", "name":"Sundeep Vempati", "email":"sundeep.vempati@marklogic.com"}, "renderDescriptionAs":"normal"}