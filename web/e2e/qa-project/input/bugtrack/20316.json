{"id":20316, "kind":"Bug", "createdAt":"2012-12-20T02:44:27.517133-08:00", "status":"Closed", "title":"cts:element-value-match() wildcard query breaks with certain collations", "category":"search", "severity":"Major", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"ableasdale", "name":"Alex Bleasdale", "email":"alex.bleasdale@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"A detailed overview of this issue was provided in the original support case:\r\nhttps://help.marklogic.com/staff/Tickets/Ticket/View/12283\r\n\r\nI've reproduced the issue on rh5-intel64-3 (ML 5.0-4) on one of our lab machines; to examine these:\r\n\r\n1. Look at: http://rh5-intel64-3:8000/qconsole/\r\n(admin/admin)\r\n\r\n2. You should see 4 tabs:\r\n- Execute Query with Root Collation and Query with Codepoint Collation and look at the results for Query 5 (Adams, John*)\r\n- Execute Query With Bug (T00BB) and note that the results for query 5 yield one result rather than two", "samplequery":"", "sampledata":"", "version":"5.0-4", "tofixin":"5.0-5", "fixedin":"5.0-5", "platform":"linux(64-bit)", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"ableasdale", "name":"Alex Bleasdale", "email":"alex.bleasdale@marklogic.com"}, {"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, {"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[20358, 20359], "cloneOf":"", "support":{"headline":"cts:element-value-match() wildcard query breaks with certain collations", "supportDescription":"A wildcarded query yields different results to default or codepoint collation when the collation \"http://marklogic.com/collation/en/S1/AS/T00BB\" is used.", "publishStatus":"Publish", "tickets":[], "customerImpact":{"level":"High", "title":"Significant business impact with no reasonable workaround"}, "workaround":""}, "tags":["search", "ableasdale"], "changeHistory":[{"time":"2012-12-20T02:44:27.517133-08:00", "updatedBy":{"username":"ableasdale", "name":"Alex Bleasdale", "email":"alex.bleasdale@marklogic.com"}, "change":{"assignTo":{"from":{"username":"ableasdale", "name":"Alex Bleasdale", "email":"alex.bleasdale@marklogic.com"}, "to":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}}}, "files":[], "show":true}, {"time":"2012-12-21T18:52:20.748772-08:00", "updatedBy":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "change":{}, "files":[], "show":true, "comment":"Simpler test case:\r\n\r\n\"IGNORABLES\",\r\ncts:matches(\"Adams, John*\", \"Adams, John Quincy\", true(), true(), \"http://marklogic.com/collation/en/S1/AS/T00BB\"),\r\ncts:matches(\"Adams, John*\", \"Adams, John\", true(), true(), \"http://marklogic.com/collation/en/S1/AS/T00BB\"),\r\n\"DEFAULT\",\r\ncts:matches(\"Adams, John*\", \"Adams, John Quincy\", true(), true(), \"http://marklogic.com/collation/\"),\r\ncts:matches(\"Adams, John*\", \"Adams, John\", true(), true(), \"http://marklogic.com/collation/\")\r\n\r\nReturns true, false, true, true (should all be true)"}, {"time":"2013-01-02T10:13:58.346162-08:00", "updatedBy":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"126265", "paths":["xdmp/branches/b5_0/src/RuleBasedCollation.cpp"], "affectedBugs":[]}, "comment":"Bug:20316 fix special case handling of '*' for collations with ignorables"}, {"time":"2013-01-02T10:14:35.095225-08:00", "updatedBy":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "to":{"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}}}, "files":[], "show":true, "comment":"Fixed 5.0-20130103"}, {"time":"2013-01-02T10:14:35.095225-08:00", "updatedBy":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "change":{"assignTo":{"from":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "to":{"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-08T11:38:46.58649-08:00", "updatedBy":{"username":"jsolis", "name":"Julio Solis", "email":"Julio.Solis@marklogic.com"}, "change":{"assignTo":{"from":{"username":"jsolis", "name":"Julio Solis", "email":"Julio.Solis@marklogic.com"}, "to":{"username":"jsolis", "name":"Julio Solis", "email":"Julio.Solis@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-15T16:19:11.006536-08:00", "updatedBy":{"username":"jsolis", "name":"Julio Solis", "email":"Julio.Solis@marklogic.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"jsolis", "name":"Julio Solis", "email":"Julio.Solis@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"Verified on MarkLogic-5.0-20130115.x86_64. New test case bug20316 added to bugs50.txt test suite."}, {"time":"2013-02-25T17:13:04.753336-08:00", "updatedBy":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "change":{"status":{"from":"", "to":"Closed"}, "assignTo":{"from":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}], "updatedAt":"2013-02-25T17:13:04.753336-08:00", "fixedAt":"2013-01-02T10:14:35.095225-08:00", "fixedBy":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "shippedAt":"2013-01-15T16:19:11.006536-08:00", "shippedBy":{"username":"jsolis", "name":"Julio Solis", "email":"Julio.Solis@marklogic.com"}, "closedAt":"2013-02-25T17:13:04.753336-08:00", "closedBy":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "renderDescriptionAs":"normal"}