{"id":20785, "kind":"Bug", "createdAt":"2013-02-13T16:19:02.956611-08:00", "status":"Fix", "title":"mint doesn't support the æ character in the licensee field.", "category":"Mint", "severity":"Major", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"ebloch", "name":"Eric Bloch", "email":"eric.bloch@marklogic.com"}, "assignTo":{"username":"jespinoza", "name":"Jose Espinoza", "email":"jespinoza@marklogic.com"}, "description":"Our license and signup forms allow this character as it is a common character in some European names.\r\n\r\nEmail from José below\r\n----\r\n\r\nHello Hans-Henrik,\r\n\r\nCan you please try the following license key?\r\n\r\nLicensee: \"Hans Henrik Staerfeldt - Academic\"\r\nKey: \"B48D-AF0E-7DEB-6FF2-2112-E06E-7BE3-6F5B-F4F7-BF71-00B7-F5CF-0E72-F3BF-DDF2-F78F-BAF9-FF6E-74FB-FFF0-5124-1000\"\r\n\r\nIt appears that the server does not work with the 'æ' character in the licensee field.\r\n\r\nLet us know if there are any more questions.\r\nBest,\r\nJosé", "samplequery":"", "sampledata":"", "version":"Mint-1.0", "tofixin":"Mint-2.0", "fixedin":"", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"ebloch", "name":"Eric Bloch", "email":"eric.bloch@marklogic.com"}, {"username":"jespinoza", "name":"Jose Espinoza", "email":"jespinoza@marklogic.com"}, {"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, {"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[], "cloneOf":"", "support":{"headline":"", "supportDescription":"", "publishStatus":"Not Ready", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["Mint", "ebloch"], "changeHistory":[{"time":"2013-02-14T15:11:04.284626-08:00", "updatedBy":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, "change":{"status":{"from":"", "to":"Verify"}, "assignTo":{"from":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, "to":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}}}, "files":[], "show":true, "comment":"I am assuming this does not mean \"mint doesn't support\" but means \"marklogic does not support...\".   Reading Jose's account, it sounds like a server problem, not a mint problem.  Eric, is that your understanding?"}, {"time":"2013-02-14T15:11:04.284626-08:00", "updatedBy":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, "change":{"assignTo":{"from":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, "to":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}}}, "files":[], "show":true}, {"time":"2013-02-14T15:11:04.284626-08:00", "updatedBy":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, "change":{"tofixin":{"from":"", "to":"6.0-3"}}, "files":[], "show":true}, {"time":"2013-02-14T15:14:17.60272-08:00", "updatedBy":{"username":"ebloch", "name":"Eric Bloch", "email":"eric.bloch@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Sorry, Danny, I'm not sure.  José will know.\r\n\r\nEric\r\n"}, {"time":"2013-02-14T16:13:20.5112-08:00", "updatedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "change":{}, "files":[], "show":true, "comment":"It is not a server problem.\r\nMarkLogic Server has no problem with correctly constructed license keys that have æ in the licensee.\r\nFor example:\r\nlicensee: dæmon\r\nlicense key: DDC2-6C1B-D816-C16B-CC26-61F2-13A0\r\n\r\nI have no access to developer.marklogic.com or to the mint, \r\nso I don't know what is going on there\r\n"}, {"time":"2013-02-14T16:19:37.960132-08:00", "updatedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "change":{"assignTo":{"from":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "to":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-15T15:06:50.227529-08:00", "updatedBy":{"username":"jespinoza", "name":"Jose Espinoza", "email":"jespinoza@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"The mint code has occasional problems accepting keys that contain punctuation and other non-alphanumeric characters in the licensee string. I spoke to Ganesh about this and we agreed to the licensee string should be limited to alphanumeric characters. This is simple to enforce and does not require a change to the mint."}, {"time":"2013-02-28T15:30:35.018166-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"tofixin":{"from":"6.0-3", "to":"6.0-4"}}, "files":[], "show":true}, {"time":"2013-06-01T22:20:42.550584-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"jespinoza", "name":"Jose Espinoza", "email":"jespinoza@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-06-01T22:20:42.550584-07:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"tofixin":{"from":"6.0-4", "to":"Mint-2.0"}}, "files":[], "show":true}, {"time":"2013-08-26T15:22:32.57268-07:00", "updatedBy":{"username":"jespinoza", "name":"Jose Espinoza", "email":"jespinoza@marklogic.com"}, "change":{"status":{"from":"", "to":"Fix"}, "assignTo":{"from":{"username":"jespinoza", "name":"Jose Espinoza", "email":"jespinoza@marklogic.com"}, "to":{"username":"jespinoza", "name":"Jose Espinoza", "email":"jespinoza@marklogic.com"}}}, "files":[], "show":true, "comment":"Detect the presence of æ and change it to 'ae' on the fly."}, {"time":"2013-08-26T15:24:58.055976-07:00", "updatedBy":{"username":"ebloch", "name":"Eric Bloch", "email":"eric.bloch@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Are there other non-ascii chars that will need to be changed as well?"}, {"time":"2013-08-26T15:34:40.955828-07:00", "updatedBy":{"username":"jespinoza", "name":"Jose Espinoza", "email":"jespinoza@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Not sure, I'll check if  there are others."}, {"time":"2013-08-26T16:12:08.806689-07:00", "updatedBy":{"username":"jespinoza", "name":"Jose Espinoza", "email":"jespinoza@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Chris - do you think this code will have problems with all \"Latin-1 Supplement\" Chars? Should I run some experiments?\r\n"}, {"time":"2013-08-26T16:12:08.806689-07:00", "updatedBy":{"username":"jespinoza", "name":"Jose Espinoza", "email":"jespinoza@marklogic.com"}, "change":{"assignTo":{"from":{"username":"jespinoza", "name":"Jose Espinoza", "email":"jespinoza@marklogic.com"}, "to":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}}}, "files":[], "show":true}, {"time":"2013-08-26T18:50:18.755551-07:00", "updatedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "change":{}, "files":[], "show":true, "comment":"Since the server has no problem with correctly constructed license keys that have æ in the licensee, the mint should be able to make them too.\r\nI think the damage happens in the form submission from the browser.\r\n"}, {"time":"2013-08-26T19:40:35.892399-07:00", "updatedBy":{"username":"ebloch", "name":"Eric Bloch", "email":"eric.bloch@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"This problem is not in the DMC forms.  I can sign up with a user with æ in their name just fine.  If I then try to request a license, an URL is sent to mint with that char in the query string (encoded via xdmp:url-encode()).  Mint then fails to generate a license and the user is left stuck.\r\nI just tried it now with a production user (because I can't get to stage-mint over the vpn for some reason).  The user is 'Eric Bloch æ' with email eric.bloch+888@gmail.com.  That user is stored just fine in the DMC audit trail.  Perhaps the mint code is not properly decoding the query string.  I don't know.  But the symptom is that mint doesn't return a return a key.  The value from the form is stored just fine inside DMC itself.  Since DMC and server appear to handle æ fine, it would make sense to debug the code in the mint.  \r\n\r\n"}, {"time":"2013-08-27T09:24:02.18361-07:00", "updatedBy":{"username":"jespinoza", "name":"Jose Espinoza", "email":"jespinoza@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"I will debug the mint to make sure everything is working as expected for these characters."}, {"time":"2013-08-27T09:24:02.18361-07:00", "updatedBy":{"username":"jespinoza", "name":"Jose Espinoza", "email":"jespinoza@marklogic.com"}, "change":{"assignTo":{"from":{"username":"jespinoza", "name":"Jose Espinoza", "email":"jespinoza@marklogic.com"}, "to":{"username":"jespinoza", "name":"Jose Espinoza", "email":"jespinoza@marklogic.com"}}}, "files":[], "show":true}], "updatedAt":"2013-08-27T09:24:02.18361-07:00", "renderDescriptionAs":"normal"}