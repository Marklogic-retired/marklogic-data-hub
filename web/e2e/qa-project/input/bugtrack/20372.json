{"id":20372, "kind":"Bug", "createdAt":"2013-01-03T13:07:21.697305-08:00", "status":"Closed", "title":"Word query with 2 words and min-occurs > 1 may lead to false negatives in index resolution", "category":"search", "severity":"Major", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"This comes from bug:20230\r\n\r\nTest case: should return true, 1\r\n\r\nxdmp:document-insert(\"dogs.xml\",<x>dog and cat and dog and dog</x>)\r\n;\r\ncts:contains(doc(\"dogs.xml\"), cts:word-query((\"dog\",\"cat\"),\"min-occurs=4\"))\r\n,\r\nxdmp:estimate(cts:search(doc(\"dogs.xml\"), cts:word-query((\"dog\",\"cat\"),\"min-occurs=4\")))\r\n", "samplequery":"", "sampledata":"", "version":"5.0-4", "tofixin":"5.0-5", "fixedin":"5.0-5", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, {"username":"msrinivasan", "name":"Mahalakshmi Srinivasan", "email":"mahalakshmi.srinivasan@marklogic.com"}, {"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[20373, 20374], "cloneOf":"", "support":{"headline":"A word query with 2 words and min-occurs > 1 may lead to false negatives in index resolution", "supportDescription":"For example, the following query should return 1, but it returns 0.\r\nxdmp:document-insert(\"dogs.xml\",<x>dog and cat and dog and dog</x>) \r\n; \r\nxdmp:estimate(cts:search(doc(\"dogs.xml\"), cts:word-query((\"dog\",\"cat\"),\"min-occurs=4\")))", "publishStatus":"Publish", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":"Add a third word you know will never match to the word query:\r\nxdmp:estimate(cts:search(doc(\"dogs.xml\"), cts:word-query((\"dog\",\"cat\",\"nosuchwordever\"), \"min-occurs=4\")))"}, "tags":["search", "mary"], "changeHistory":[{"time":"2013-01-03T13:07:21.697305-08:00", "updatedBy":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "change":{"assignTo":{"from":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "to":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}}}, "files":[], "show":true}, {"time":"2013-01-03T13:57:08.018241-08:00", "updatedBy":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"126394", "paths":["xdmp/branches/b5_0/src/SearchBuiltins.cpp", "xdmp/branches/b5_0/src/Query.cpp"], "affectedBugs":[]}, "comment":"Bug:20372 false negatives for queries with 2 branches and min-occurs>1"}, {"time":"2013-01-03T14:02:53.590433-08:00", "updatedBy":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "to":{"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}}}, "files":[], "show":true, "comment":"Fixed 5.0-20130104"}, {"time":"2013-01-03T14:02:53.590433-08:00", "updatedBy":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "change":{"assignTo":{"from":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "to":{"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-11T11:57:34.532459-08:00", "updatedBy":{"username":"msrinivasan", "name":"Mahalakshmi Srinivasan", "email":"mahalakshmi.srinivasan@marklogic.com"}, "change":{"assignTo":{"from":{"username":"msrinivasan", "name":"Mahalakshmi Srinivasan", "email":"mahalakshmi.srinivasan@marklogic.com"}, "to":{"username":"msrinivasan", "name":"Mahalakshmi Srinivasan", "email":"mahalakshmi.srinivasan@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-11T16:24:17.742123-08:00", "updatedBy":{"username":"msrinivasan", "name":"Mahalakshmi Srinivasan", "email":"mahalakshmi.srinivasan@marklogic.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"msrinivasan", "name":"Mahalakshmi Srinivasan", "email":"mahalakshmi.srinivasan@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"Verified on build 5.0-20130110"}, {"time":"2013-02-25T17:13:14.30808-08:00", "updatedBy":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "change":{"status":{"from":"", "to":"Closed"}, "assignTo":{"from":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}], "updatedAt":"2013-02-25T17:13:14.30808-08:00", "fixedAt":"2013-01-03T14:02:53.590433-08:00", "fixedBy":{"username":"mary", "name":"Mary Holstege", "email":"mary@cerisent.com"}, "shippedAt":"2013-01-11T16:24:17.742123-08:00", "shippedBy":{"username":"msrinivasan", "name":"Mahalakshmi Srinivasan", "email":"mahalakshmi.srinivasan@marklogic.com"}, "closedAt":"2013-02-25T17:13:14.30808-08:00", "closedBy":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "renderDescriptionAs":"normal"}