{"id":20919, "kind":"Task", "createdAt":"2013-02-25T11:02:07.681773-08:00", "status":"Closed", "title":"Unable to create MAC build on b7_0 mac build machine", "category":"xdmp", "severity":"Critical", "priority":{"level":"5", "title":""}, "days":null, "period":{"startDate":null, "endDate":null}, "submittedBy":{"username":"sverma", "name":"Shiva Verma", "email":"shiva.verma@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"Creating a tak so that we can track the MAC build failure, we are facing on the b7_0 mac build machine\r\n\r\nMachine: osx-intel64-70-build\r\n\r\nThough we are able to build successfully on b6_0 osx build machine (osx-intel64-51-build), but not on our new b7_0 osx build machine.\r\n\r\nNow we are able to make/compile the build, its only failing on 'make package':\r\n\r\n----------------------------------------------------------------------------------------------------\r\nrm -f -r MarkLogic.prefPane\r\n( cd macosx/PreferencePanel ; xcodebuild -project MarkLogicPrefs.xcodeproj -alltargets build )\r\n=== BUILD NATIVE TARGET Mark Logic Preferences OF PROJECT MarkLogicPrefs WITH THE DEFAULT CONFIGURATION (Default) ===\r\nCheck dependencies\r\nerror: There is no SDK with the name or path '/space/builder/builds/macosx-64/HEAD/xdmp/src/macosx/PreferencePanel/macosx10.6'\r\n\r\n\r\n** BUILD FAILED **\r\n\r\n\r\nThe following build commands failed:\r\n        Check dependencies\r\n(1 failure)\r\nmake: *** [PrefPane] Error 65\r\n\r\n----------------------------------------------------------------------------------------------------\r\n\r\nLast update from David Lee:\r\nThe issue is now with the package creation which uses some magic pixie dust I dont understand.  The build portion works\r\nfine but the installer packaging fails do  to what seems hard coded OS version metadata somewhere.\r\nDo we know who wrote the Mac installer ?\r\nI could research it but it will take time.  It might be more prudent to find someone who knows how the mac installer\r\nwas built to look into this\r\n", "samplequery":"", "sampledata":"", "version":"7.0-nightly", "tofixin":"7.0-ea1", "fixedin":"7.0-ea1", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"sverma", "name":"Shiva Verma", "email":"shiva.verma@marklogic.com"}, {"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}, {"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}, {"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}], "attachments":[], "includeInTaskList":false, "proceduralTasks":{"Requirements Task":[], "Functional Specification Task":[], "Test Specification Task":[], "Test Automation Task":[], "Documentation Task":[]}, "subTasks":[], "tags":["xdmp", "sverma"], "changeHistory":[{"time":"2013-02-25T11:02:07.681773-08:00", "updatedBy":{"username":"sverma", "name":"Shiva Verma", "email":"shiva.verma@marklogic.com"}, "change":{"assignTo":{"from":{"username":"sverma", "name":"Shiva Verma", "email":"shiva.verma@marklogic.com"}, "to":{"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-25T11:49:03.10355-08:00", "updatedBy":{"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}, "change":{"assignTo":{"from":{"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}, "to":{"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-25T17:06:07.820974-08:00", "updatedBy":{"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"I know very little about how the mac installer works (or any kind of installer, for that matter), and the guy who wrote it has left the company. Maybe David Lee would be better off investigating this?\r\n\r\nCan we build a 7.0-ea1 package on the 6.0 build machine for now, and put this off until 7.0-ea2?"}, {"time":"2013-02-28T08:33:16.747668-08:00", "updatedBy":{"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"134124", "paths":["xdmp/trunk/src/macosx/PreferencePanel/MarkLogicPrefs.xcodeproj/project.pbxproj"], "affectedBugs":[]}, "comment":"bug:20919 Fix Mac OS X MarkLogic preference pane build"}, {"time":"2013-03-01T02:09:47.634935-08:00", "updatedBy":{"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"134297", "paths":["xdmp/branches/b7_0-ea1/src/macosx/PreferencePanel/MarkLogicPrefs.xcodeproj/project.pbxproj"], "affectedBugs":[]}, "comment":"bug:20919 Fix Mac OS X MarkLogic preference pane build"}, {"time":"2013-03-01T02:13:41.429873-08:00", "updatedBy":{"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}, "to":{"username":"sverma", "name":"Shiva Verma", "email":"shiva.verma@marklogic.com"}}}, "files":[], "show":true, "comment":"Fixed."}, {"time":"2013-03-01T02:13:41.429873-08:00", "updatedBy":{"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}, "change":{"assignTo":{"from":{"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}, "to":{"username":"sverma", "name":"Shiva Verma", "email":"shiva.verma@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-03-04T10:36:35.960519-08:00", "updatedBy":{"username":"sverma", "name":"Shiva Verma", "email":"shiva.verma@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"make package\r\n\r\n.........\r\n.........\r\n/Developer/Applications/Utilities/PackageMaker.app/Contents/MacOS/PackageMaker -build -p /space/builder/builds/macosx-64/b7_0-ea1/xdmp/src/macosx/package/MacInstallTemp/DiskImage/MarkLogic-7.0-ea1_20130304-x86_64.pkg -f /space/builder/builds/macosx-64/b7_0-ea1/xdmp/src/macosx/package/MacInstallTemp/PackageRoot \\\r\n                -r /space/builder/builds/macosx-64/b7_0-ea1/xdmp/src/macosx/package/MacInstallTemp/Resources -i /space/builder/builds/macosx-64/b7_0-ea1/xdmp/src/macosx/package/MacInstallTemp/Config/Info.plist \\\r\n                -d /space/builder/builds/macosx-64/b7_0-ea1/xdmp/src/macosx/package/MacInstallTemp/Config/Description.plist\r\nmake[1]: /Developer/Applications/Utilities/PackageMaker.app/Contents/MacOS/PackageMaker: No such file or directory\r\nmake[1]: [MarkLogic] Error 1 (ignored)\r\ncp -fp /space/builder/builds/macosx-64/b7_0-ea1/xdmp/src/macosx/package/MacInstallTemp/Resources/MarkLogicIcon.icns /space/builder/builds/macosx-64/b7_0-ea1/xdmp/src/macosx/package/MacInstallTemp/DiskImage/.VolumeIcon.icns\r\ncp -fp ../InstallerRes/InstallationCheck /space/builder/builds/macosx-64/b7_0-ea1/xdmp/src/macosx/package/MacInstallTemp/DiskImage/MarkLogic-7.0-ea1_20130304-x86_64.pkg/Contents/Resources/InstallationCheck\r\ncp: /space/builder/builds/macosx-64/b7_0-ea1/xdmp/src/macosx/package/MacInstallTemp/DiskImage/MarkLogic-7.0-ea1_20130304-x86_64.pkg/Contents/Resources/InstallationCheck: No such file or directory\r\nmake[1]: *** [MarkLogic] Error 1\r\nmake: *** [package] Error 2\r\n"}, {"time":"2013-03-04T10:36:35.960519-08:00", "updatedBy":{"username":"sverma", "name":"Shiva Verma", "email":"shiva.verma@marklogic.com"}, "change":{"assignTo":{"from":{"username":"sverma", "name":"Shiva Verma", "email":"shiva.verma@marklogic.com"}, "to":{"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-03-04T23:35:26.087467-08:00", "updatedBy":{"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}, "change":{"status":{"from":"", "to":"Fix"}, "assignTo":{"from":{"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}, "to":{"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-03-07T16:32:45.253112-08:00", "updatedBy":{"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"John, \r\nNeed your help on this.  Please give it a priority as we need to ship 7.0-ea1 soon."}, {"time":"2013-03-08T04:17:19.077982-08:00", "updatedBy":{"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"135657", "paths":["xdmp/branches/b7_0-ea1/src/macosx/package/Makefile"], "affectedBugs":[]}, "comment":"bug:20919 Search for PackageMaker.app in different install locations"}, {"time":"2013-03-08T04:18:40.263142-08:00", "updatedBy":{"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"135658", "paths":["xdmp/trunk/src/macosx/package/Makefile"], "affectedBugs":[]}, "comment":"bug:20919 Search for PackageMaker.app in different install locations"}, {"time":"2013-03-08T04:19:49.361732-08:00", "updatedBy":{"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}, "to":{"username":"sverma", "name":"Shiva Verma", "email":"shiva.verma@marklogic.com"}}}, "files":[], "show":true, "comment":"This should be fixed now - I successfully built a package with the \"builder\" user."}, {"time":"2013-03-08T04:19:49.361732-08:00", "updatedBy":{"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}, "change":{"assignTo":{"from":{"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}, "to":{"username":"sverma", "name":"Shiva Verma", "email":"shiva.verma@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-03-08T09:23:39.573952-08:00", "updatedBy":{"username":"sverma", "name":"Shiva Verma", "email":"shiva.verma@marklogic.com"}, "change":{"status":{"from":null, "to":"Ship"}, "assignTo":{"from":{"username":"sverma", "name":"Shiva Verma", "email":"shiva.verma@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"Was able to create the MAC build successfully on 0308"}, {"time":"2013-03-08T09:23:39.573952-08:00", "updatedBy":{"username":"sverma", "name":"Shiva Verma", "email":"shiva.verma@marklogic.com"}, "change":{"assignTo":{"from":{"username":"sverma", "name":"Shiva Verma", "email":"shiva.verma@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}], "updatedAt":"2013-03-08T09:23:39.573952-08:00", "fixedAt":"2013-03-08T04:19:49.361732-08:00", "fixedBy":{"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}, "shippedAt":"2013-03-08T09:23:39.573952-08:00", "shippedBy":{"username":"sverma", "name":"Shiva Verma", "email":"shiva.verma@marklogic.com"}}