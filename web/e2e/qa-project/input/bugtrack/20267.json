{"id":20267, "kind":"Bug", "createdAt":"2012-12-12T12:06:29.637591-08:00", "status":"Closed", "title":"Query Console reporting incorrect \"Content Source\"", "category":"Query Console", "severity":"Major", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"Query Console contains a UI element labeled \"Content Source\" where the user picks a context database.\r\n\r\nA typical entry in the list looks like this:\r\nsome-database (file:Apps)\r\n\r\nThe 'file:' designator appears when the given database has the filesystem set as the modules location. But \"Apps\" (presumably the root) is plainly incorrect. This information is leakage from the App-Services appserver on which QC runs, and is NOT related in any way to the content source in question.\r\n\r\nAs a demonstration, this simple query lets you determine the filesystem root:\r\nxdmp:filesystem-directory(\".\")\r\n=>\r\n...\r\n  <dir:entry>\r\n    <dir:filename>Apps</dir:filename>\r\n    <dir:pathname>./Apps</dir:pathname>\r\n    <dir:type>directory</dir:type>\r\n    <dir:content-length>4096</dir:content-length>\r\n    <dir:last-modified>2012-11-13T15:04:34-08:00</dir:last-modified>\r\n  </dir:entry>\r\n...\r\n\r\nSince it returns Apps as a child directory, Apps itself cannot be the root. It's giving the wrong answer.\r\n\r\n(Aside: there is fairly widespread confusion on what all the pieces of each entry in this list mean. When we change this, it's worth looking at simple adjustments to increase clarity.)", "samplequery":"", "sampledata":"", "version":"7.0-nightly", "tofixin":"7.0-ea1", "fixedin":"7.0-ea1", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, {"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}, {"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[], "cloneOf":"", "support":{"headline":"", "supportDescription":"", "publishStatus":"Not Ready", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["Query Console", "mdubinko"], "changeHistory":[{"time":"2012-12-12T12:06:29.637591-08:00", "updatedBy":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "change":{"assignTo":{"from":{"username":"mdubinko", "name":"Micah  Dubinko", "email":"mdubinko@marklogic.com"}, "to":{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}}}, "files":[], "show":true}, {"time":"2012-12-17T14:57:42.51519-08:00", "updatedBy":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"This is really only talking about the databases for which there is no app server.  For those, they run in the context of the App Services app server, it the UI reports its root.  I agree this is a little strange, but it is sort of consistent.  I would recommend one of 2 things.\r\n\r\neither:\r\n1) leave as is, it is not that big a deal\r\nor\r\n2) remove the stuff in parenthesis for databases that have no app server"}, {"time":"2012-12-17T17:36:57.916614-08:00", "updatedBy":{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"A quick meeting with Mitch, Micah and Sudhakar, we are thinking to do the following:\r\n\r\n(1) A database associated with an app server that has a module database specified -- display the database name, the module database name and the root info:   database (modulesdb:root)\r\n      For example:    OscarDB (OscarApp-Modules:/)\r\n\r\n(2) A database associated with an app server with a file system as module specified -- display the database name and the root info only:   database (file:root)\r\n      For example, App-Services (file: Apps/)\r\n\r\n(3) A standalone database -- just display the database name.\r\n      For example, Schemas\r\n\r\n\r\n"}, {"time":"2012-12-18T15:03:31.094596-08:00", "updatedBy":{"username":"cwhitney", "name":"Colleen  Whitney", "email":"colleen.whitney@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"I think Danny's second suggestion makes the most sense."}, {"time":"2012-12-19T13:01:36.528958-08:00", "updatedBy":{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"124694", "paths":["xdmp/trunk/src/Apps/qconsole/default.xqy"], "affectedBugs":[]}, "comment":"Bug:20267 - clean up content source dropdown list"}, {"time":"2012-12-19T13:04:37.983642-08:00", "updatedBy":{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}, "to":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}}}, "files":[], "show":true, "comment":"new changes showing these formats:\r\n* contentdb (modulesdb: root)\r\n* contentdb (file:root)\r\n* contentdb\r\n\r\nAlso, tooltips are added to help the user.\r\n"}, {"time":"2012-12-19T13:04:37.983642-08:00", "updatedBy":{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}, "change":{"assignTo":{"from":{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}, "to":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-19T21:40:22.426502-08:00", "updatedBy":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "change":{"assignTo":{"from":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "to":{"username":"aabbas", "name":"Adeel Abbas", "email":"Adeel.Abbas@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-20T23:09:08.53034-08:00", "updatedBy":{"username":"aabbas", "name":"Adeel Abbas", "email":"Adeel.Abbas@marklogic.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"aabbas", "name":"Adeel Abbas", "email":"Adeel.Abbas@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"working fine, hence shipped"}, {"time":"2013-02-27T18:09:31.776401-08:00", "updatedBy":{"username":"fxue", "name":"Fei Xue", "email":"Fei.Xue@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"134009", "paths":["xdmp/trunk/src/Collation.cpp", "xdmp/trunk/src/OnDiskRangeIndexes.cpp", "xdmp/trunk/src/XQuery.cpp", "xdmp/trunk/src/Collation.h"], "affectedBugs":[]}, "comment":"Bug:20267 1)breaking down first variant 2)cost-based optimization stand level.Did some testing on 1) but need bigger dataset to test 2) watching regression tmr"}], "updatedAt":"2013-02-27T18:09:31.776401-08:00", "fixedAt":"2012-12-19T13:04:37.983642-08:00", "fixedBy":{"username":"bmo", "name":"Brian Mo", "email":"brian.mo@marklogic.com"}, "shippedAt":"2013-02-20T23:09:08.53034-08:00", "shippedBy":{"username":"aabbas", "name":"Adeel Abbas", "email":"Adeel.Abbas@marklogic.com"}, "renderDescriptionAs":"normal"}