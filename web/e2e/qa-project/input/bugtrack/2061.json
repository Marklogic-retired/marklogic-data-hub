{"id":2061, "kind":"Bug", "createdAt":"2005-08-04T17:52:16.347139-07:00", "status":"Closed", "title":"corrupt stand causes server to crash repeatedly", "category":"xdmp", "severity":"Catastrophic", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"denise", "name":"Denise Miura", "email":"denise.skarupski@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"a problem with the disk at Nerac caused a merge to generate a corrupt stand. after the merge completed, the server repeatedly crashed, complaining about the corrupt stand. the original email report is below. the corrupt stand and log files can be found on root at /space/home/anonftp/incoming/nerac/badstand.\n\nThe cluster was inserting documents through an XDBC server on ml001 and at around 07:36, the ml003 merged \n\n2005-08-04 07:30:45.070 Info: Merging /mldata01/forest-data/Forests/PATENT-C-1/00000fb9, \n/mldata01/forest-data/Forests/PATENT-C-1/00000fc2, \n/mldata01/forest-data/Forests/PATENT-C-1/00000fc1, and \n/mldata01/forest-data/Forests/PATENT-C-1/00000fc3 to produce \n/mldata01/forest-data/Forests/PATENT-C-1/00000fc5\n\n2005-08-04 07:34:33.230 Info: Merged 1190 MB in 228 s at 5 MB/s to produce /mldata01/forest-data/Forests/PATENT-C-1/00000fc5\n\nSoon after that it crashed and repeatedly kept crashing complaining that the stand was corrupt\n\n2005-08-04 07:36:29.101 Notice: Starting MarkLogic Server 3.0-2 x86_64 in /opt/MarkLogic with data in /var/opt/MarkLogic 2005-08-04 07:36:29.128 Info: Copyright 2002-2005 Mark Logic Corporation. All Rights Reserved.\n\n2005-08-04 07:40:05.047 Error: CacheListPostingIterator::_finish: XDMP-CORRUPT: read /mldata01/forest-data/Forests/PATENT-C-1/00000fc5/ListData: File corrupt, searchKey=0xd200151a80c76a53, hdrKey=0x4ac485b200000001, hdrWords=3, datWords=7, checksum=3399001616, computed=1480433472\n\n\nI had to stop the cluster and manually remove that stand to recover \n\n\nAlso there where other Error messages that the server seemed to have recovered from eg. \n2005-08-04 13:41:05.070 Error: Indexed64FileSequentialReader::read: XDMP-READ:\n /mldata01/forest-data/Forests/PATENT-C-2/00000fbe/ListData: Invalid read, lastKey>=key, position=1410235928, lastKey=0xdfec9360e7b2b54c, key=0x713964d2127e66f8, hdrWords=2, datWords=2, checksum=0x6e174fc0\n\n\n", "samplequery":"", "sampledata":"", "version":"3.0-2", "tofixin":"3.0-4", "fixedin":"N/A", "platform":"linux", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"denise", "name":"Denise Miura", "email":"denise.skarupski@marklogic.com"}], "attachments":[], "clones":[], "cloneOf":"", "support":{"headline":"", "supportDescription":"", "publishStatus":"Never Publish", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["xdmp", "denise"], "changeHistory":[{"time":"2005-08-10T15:32:50.739221-07:00", "updatedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "change":{"status":{"from":"", "to":"Fix"}, "assignTo":{"from":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "to":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}}}, "files":[], "show":true, "comment":"fix"}, {"time":"2005-08-12T13:48:19.458319-07:00", "updatedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "change":{"status":{"from":"", "to":"Verify"}, "assignTo":{"from":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "to":{"username":"denise", "name":"Denise Miura", "email":"denise.skarupski@marklogic.com"}}}, "files":[], "show":true, "comment":"I am not able to unzip the 00000fc5.zip file.\nIt appears to be corrupt.\n"}, {"time":"2005-09-02T15:40:03.243421-07:00", "updatedBy":{"username":"denise", "name":"Denise Miura", "email":"denise.skarupski@marklogic.com"}, "change":{"status":{"from":"", "to":"Closed"}, "assignTo":{"from":{"username":"denise", "name":"Denise Miura", "email":"denise.skarupski@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"uchenna attempted to upload the file again, but it's gone. will have to close for now. "}], "updatedAt":"2005-09-02T15:40:03.243421-07:00", "closedAt":"2005-09-02T15:40:03.243421-07:00", "closedBy":{"username":"denise", "name":"Denise Miura", "email":"denise.skarupski@marklogic.com"}, "renderDescriptionAs":"normal"}