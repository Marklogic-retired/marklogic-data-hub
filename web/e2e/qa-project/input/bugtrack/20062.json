{"id":20062, "kind":"Bug", "createdAt":"2012-11-12T13:22:38.481473-08:00", "status":"Closed", "title":"database restore returns XDMP-BADRESTORETOTIME on windows", "category":"xdmp", "severity":"Major", "priority":{"level":"2", "title":"Not required for product release"}, "submittedBy":{"username":"atsoi", "name":"Arthur Tsoi", "email":"arthur.tsoi@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"Step 1: set merge timestamp of document database\r\nStep 2: backup document with journal archive\r\nStep 3 : insert 2000 doc into docment \r\nStep 4: xdmp:request-timestamp()\r\nStep 5: clear database\r\nStep 6: do a restore with api:\r\nxdmp:database-restore(xdmp:database-forests(xdmp:database(\"Document\")),\r\n\"c:/backup\",xdmp:timestamp-to-wallclock(<timestamp from step 4>), fn:true())\r\n\r\nNote: make sure the backup directory does not have other backups.", "samplequery":"", "sampledata":"", "version":"6.0-nightly", "tofixin":"7.0-2", "fixedin":"7.0-2", "platform":"windows(64-bit)", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"atsoi", "name":"Arthur Tsoi", "email":"arthur.tsoi@marklogic.com"}, {"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[25016], "cloneOf":"", "support":{"headline":"", "supportDescription":"", "publishStatus":"Never Publish", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["xdmp", "atsoi"], "changeHistory":[{"time":"2012-11-12T13:22:38.481473-08:00", "updatedBy":{"username":"atsoi", "name":"Arthur Tsoi", "email":"arthur.tsoi@marklogic.com"}, "change":{"assignTo":{"from":{"username":"atsoi", "name":"Arthur Tsoi", "email":"arthur.tsoi@marklogic.com"}, "to":{"username":"atsoi", "name":"Arthur Tsoi", "email":"arthur.tsoi@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-27T13:06:42.084856-08:00", "updatedBy":{"username":"rhu", "name":"Ron Hu", "email":"ron.hu@marklogic.com"}, "change":{"tofixin":{"from":"6.0-3", "to":"6.0-4"}}, "files":[], "show":true}, {"time":"2013-06-24T13:28:22.776337-07:00", "updatedBy":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, "change":{"tofixin":{"from":"6.0-4", "to":"7.0-1"}}, "files":[], "show":true}, {"time":"2013-12-17T18:47:45.734636-08:00", "updatedBy":{"username":"atsoi", "name":"Arthur Tsoi", "email":"arthur.tsoi@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"157499", "paths":["xdmp/branches/b7_0/src/makefiles/manage/schema-util-template.xqy", "xdmp/branches/b7_0/src/AdminBuiltins.cpp"], "affectedBugs":[]}, "comment":"bug:20062 fix restore timestamp on windows"}, {"time":"2013-12-17T18:49:33.293609-08:00", "updatedBy":{"username":"atsoi", "name":"Arthur Tsoi", "email":"arthur.tsoi@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"atsoi", "name":"Arthur Tsoi", "email":"arthur.tsoi@marklogic.com"}, "to":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}}}, "files":[], "show":true, "comment":"Note: I can only reproduce this when I start MarkLogic in the cygwin command line. If I install MarkLogic on windows, I cannot reproduce it."}, {"time":"2013-12-17T18:49:33.293609-08:00", "updatedBy":{"username":"atsoi", "name":"Arthur Tsoi", "email":"arthur.tsoi@marklogic.com"}, "change":{"assignTo":{"from":{"username":"atsoi", "name":"Arthur Tsoi", "email":"arthur.tsoi@marklogic.com"}, "to":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-12-18T09:45:28.262235-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Larry, Assigning to you for disposition. I am not sure what we can/should automate here. This was opened by Arthur and fixed by him and perhaps not an issue with the way we support MarkLogic. Maybe, we simply mark this as closed?"}, {"time":"2013-12-18T09:45:28.262235-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"lratcliff", "name":"Larry Ratcliff", "email":"lratcliff@marklogic.com"}}}, "files":[], "show":true}, {"time":"2014-01-15T15:11:16.170931-08:00", "updatedBy":{"username":"lratcliff", "name":"Larry Ratcliff", "email":"lratcliff@marklogic.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"lratcliff", "name":"Larry Ratcliff", "email":"lratcliff@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"Verified on build from Jan. 14, 2014"}], "updatedAt":"2014-01-15T15:11:16.170931-08:00", "fixedAt":"2013-12-17T18:49:33.293609-08:00", "fixedBy":{"username":"atsoi", "name":"Arthur Tsoi", "email":"arthur.tsoi@marklogic.com"}, "shippedAt":"2014-01-15T15:11:16.170931-08:00", "shippedBy":{"username":"lratcliff", "name":"Larry Ratcliff", "email":"lratcliff@marklogic.com"}, "renderDescriptionAs":"normal"}