{"id":20953, "kind":"Bug", "createdAt":"2013-02-27T00:38:11.237246-08:00", "status":"Closed", "title":"Performance issues on sol11 build/regression machine", "category":"xdmp", "severity":"Catastrophic", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"For last few days we are having problems running regression on Solaris11 test machine(sol11-intel64-70-build). Machine got really slow and became impossible to do anything on that machine and we opened a IT ticket and Jeff thinks it is MarkLogic Server issue. This is the email i got from him regarding this issue:\r\n\r\n********************\r\nRaghu,\r\n \r\nThere’s a ticket for performance problems on sol11, after some investigation it’s clear that the ML server is doing something which is causing sol11 to lock up. It can be seen by something as simple as ‘ls -l /proc’. It’s easily reproducible, very soon after the ML server starts the kernel /proc locks up for that process. I think we’re going to have to get someone to get ML in a debugger and watch it to see what happens when the machine locks up /proc.\r\n \r\nCan you open a bug?\r\n \r\nI’m going to disable the ML server startup script and reboot the machine so someone can go in and start it by hand to debug it, but once it locks the only way out is for me to power-cycle it so whoever picks it up is going to have to work with me on it most likely.\r\n \r\nI disabled your builder cron jobs for now so they don’t lock the machine up in the meantime.\r\n \r\nThanks\r\n \r\n-Jeff\r\n\r\n********************\r\n\r\n\r\n", "samplequery":"", "sampledata":"", "version":"7.0-nightly", "tofixin":"7.0-ea2", "fixedin":"N/A", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}, {"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, {"username":"sverma", "name":"Shiva Verma", "email":"shiva.verma@marklogic.com"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[], "cloneOf":"", "support":{"headline":"", "supportDescription":"", "publishStatus":"Not Ready", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["xdmp", "rpolasani"], "changeHistory":[{"time":"2013-02-27T00:38:11.237246-08:00", "updatedBy":{"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}, "change":{"assignTo":{"from":{"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}, "to":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}}}, "files":[], "show":true}, {"time":"2013-02-27T07:01:02.520944-08:00", "updatedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "change":{}, "files":[], "show":true, "comment":"Does the same thing happen on solaris 10?\r\n"}, {"time":"2013-02-27T07:46:18.676584-08:00", "updatedBy":{"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"No, not seeing this issue on sol10. "}, {"time":"2013-02-27T07:55:59.036514-08:00", "updatedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "change":{}, "files":[], "show":true, "comment":"So the build made on sol11 running on sol11 has this problem.\r\nWhat does it mean that we are not seeing this issue on sol10?\r\nDoes it mean we do not see this issue if we take the same sol11 build and run it on sol10?\r\nOr does it mean a build made on sol10 running on sol10?\r\nSo we see this problem when take a build made on sol10 and run it on sol11?\r\n"}, {"time":"2013-02-28T10:53:35.326273-08:00", "updatedBy":{"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"We are not seeing this issue on sol10 cluster whether we use build from sol10 or sol11. We have certainly seen this issue when build made on sol11 running on sol11. But we have tried a simple smoke test on sol11 machine last night against builds made on sol10 and sol11 and they passed.\r\n\r\nI'll try to run more tests and if i can reproduce the problem, will give the bug back to you with details.\r\n"}, {"time":"2013-02-28T10:53:35.326273-08:00", "updatedBy":{"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}, "change":{"assignTo":{"from":{"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}, "to":{"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-03-07T12:11:51.911524-08:00", "updatedBy":{"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"We will investigate this after EA1 and for EA1 we will focus on solaris10 regression."}, {"time":"2013-03-08T13:57:38.431829-08:00", "updatedBy":{"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"moving this to EA2"}, {"time":"2013-03-08T13:57:38.431829-08:00", "updatedBy":{"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}, "change":{"tofixin":{"from":"7.0-ea1", "to":"7.0-ea2"}}, "files":[], "show":true}, {"time":"2013-05-03T14:37:09.020303-07:00", "updatedBy":{"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}, "change":{"status":{"from":"", "to":"Closed"}, "assignTo":{"from":{"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"we have decided not to support solaris11 for MarkLogic 7 release."}], "updatedAt":"2013-05-03T14:37:09.020303-07:00", "closedAt":"2013-05-03T14:37:09.020303-07:00", "closedBy":{"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}, "renderDescriptionAs":"normal"}