{"id":20734, "kind":"Bug", "createdAt":"2013-02-07T10:46:53.081277-08:00", "status":"Closed", "title":"mlcp export given . or any existing directory aborts", "category":"mlcp", "severity":"Minor", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"dlee", "name":"David  Lee", "email":"David.Lee@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"This command fails:\r\n\r\nmlcp.sh export -host localhost -port 8904 -username admin -password admin -mode local -output_file_path . -output_type document\r\n\r\nwith error:\r\n\r\n13/02/07 13:19:15 INFO jvm.JvmMetrics: Initializing JVM Metrics with processName=JobTracker, sessionId=\r\n13/02/07 13:19:16 INFO mapreduce.MarkLogicInputFormat: Fetched 1 forest splits.\r\n13/02/07 13:19:16 INFO mapreduce.MarkLogicInputFormat: Made 178 splits.\r\n13/02/07 13:19:16 ERROR contentpump.LocalJobRunner: Error checking output specification:\r\n13/02/07 13:19:16 ERROR contentpump.LocalJobRunner: Can not create a Path from an empty string\r\n\r\n\r\n\r\nThis command fails by giving the full path to the output (existing directory)\r\n mlcp.sh export -host localhost -port 8904 -username admin -password admin -mode local -output_file_path $PWD -output_type document\r\n\r\n\r\nFails with:\r\n\r\n13/02/07 13:38:41 INFO jvm.JvmMetrics: Initializing JVM Metrics with processName=JobTracker, sessionId=\r\n13/02/07 13:38:41 INFO mapreduce.MarkLogicInputFormat: Fetched 1 forest splits.\r\n13/02/07 13:38:41 INFO mapreduce.MarkLogicInputFormat: Made 178 splits.\r\n13/02/07 13:38:41 ERROR contentpump.LocalJobRunner: Error checking output specification:\r\n13/02/07 13:38:41 ERROR contentpump.LocalJobRunner: Output directory /home/dlee/xxx already exists\r\n\r\n\r\n\r\nmlcp should succeed if the output directory is relative (.) or if it exists already ($PWD)\r\n\r\n", "samplequery":"", "sampledata":"", "version":"7.0-nightly", "tofixin":"7.0-1", "fixedin":"7.0-1", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"dlee", "name":"David  Lee", "email":"David.Lee@marklogic.com"}, {"username":"jchen", "name":"Jane Chen", "email":"jane.chen@marklogic.com"}, {"username":"lratcliff", "name":"Larry Ratcliff", "email":"lratcliff@marklogic.com"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[], "cloneOf":"", "support":{"headline":"", "supportDescription":"", "publishStatus":"Never Publish", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["mlcp", "dlee"], "changeHistory":[{"time":"2013-02-07T10:46:53.081277-08:00", "updatedBy":{"username":"dlee", "name":"David  Lee", "email":"David.Lee@marklogic.com"}, "change":{"assignTo":{"from":{"username":"dlee", "name":"David  Lee", "email":"David.Lee@marklogic.com"}, "to":{"username":"jchen", "name":"Jane Chen", "email":"jane.chen@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-02-07T11:01:18.145555-08:00", "updatedBy":{"username":"jchen", "name":"Jane Chen", "email":"jane.chen@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"\"Output directory /home/dlee/xxx already exists\" is expected behavior.  Complaining . being empty is confusing.  So I'll take a look."}, {"time":"2013-02-13T09:36:42.705476-08:00", "updatedBy":{"username":"jchen", "name":"Jane Chen", "email":"jane.chen@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Not a regression.  Downgrading and pushing to 7.0."}, {"time":"2013-02-13T09:36:42.705476-08:00", "updatedBy":{"username":"jchen", "name":"Jane Chen", "email":"jane.chen@marklogic.com"}, "change":{"tofixin":{"from":"7.0-ea1", "to":"7.0-1"}}, "files":[], "show":true}, {"time":"2013-08-15T18:22:57.491439-07:00", "updatedBy":{"username":"jchen", "name":"Jane Chen", "email":"jane.chen@marklogic.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"149326", "paths":["xcc/trunk/mlcp/src/main/java/com/marklogic/contentpump/ConfigConstants.java", "xcc/trunk/mlcp/src/main/java/com/marklogic/contentpump/Command.java", "xcc/trunk/mlcp/src/main/java/com/marklogic/contentpump/ContentPump.java"], "affectedBugs":[]}, "comment":"Bug:20734 - Set working directory for output file path.\n"}, {"time":"2013-08-15T18:25:17.19725-07:00", "updatedBy":{"username":"jchen", "name":"Jane Chen", "email":"jane.chen@marklogic.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"jchen", "name":"Jane Chen", "email":"jane.chen@marklogic.com"}, "to":{"username":"lratcliff", "name":"Larry Ratcliff", "email":"lratcliff@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-08-15T18:25:17.19725-07:00", "updatedBy":{"username":"jchen", "name":"Jane Chen", "email":"jane.chen@marklogic.com"}, "change":{"assignTo":{"from":{"username":"jchen", "name":"Jane Chen", "email":"jane.chen@marklogic.com"}, "to":{"username":"lratcliff", "name":"Larry Ratcliff", "email":"lratcliff@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-08-26T16:33:00.184369-07:00", "updatedBy":{"username":"lratcliff", "name":"Larry Ratcliff", "email":"lratcliff@marklogic.com"}, "change":{"assignTo":{"from":{"username":"lratcliff", "name":"Larry Ratcliff", "email":"lratcliff@marklogic.com"}, "to":{"username":"jsolis", "name":"Julio Solis", "email":"Julio.Solis@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-09-27T16:47:51.3282-07:00", "updatedBy":{"username":"jsolis", "name":"Julio Solis", "email":"Julio.Solis@marklogic.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"jsolis", "name":"Julio Solis", "email":"Julio.Solis@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"Verified on MarkLogic-7.0-20130927.x86_64. New test bug20734.xml added to test suite 00mlcp.txt."}], "updatedAt":"2013-09-27T16:47:51.3282-07:00", "fixedAt":"2013-08-15T18:25:17.19725-07:00", "fixedBy":{"username":"jchen", "name":"Jane Chen", "email":"jane.chen@marklogic.com"}, "shippedAt":"2013-09-27T16:47:51.3282-07:00", "shippedBy":{"username":"jsolis", "name":"Julio Solis", "email":"Julio.Solis@marklogic.com"}, "renderDescriptionAs":"normal"}