{"id":20423, "kind":"Bug", "createdAt":"2013-01-10T08:40:12.940954-08:00", "status":"Closed", "title":"qconsole runs or displays previous query", "category":"Query Console", "severity":"Major", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"derickson", "name":"David Erickson", "email":"David.Erickson@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"In a customer development environment running ML 6.0-2.1  with a user accessing qconsole with Firefox and their own user account (wich has admin)\r\n\r\nUser ran a query\r\n>> fn:doc(\"/1.xml\")\r\nexpecting a single document to return, but all documents returned as if fn:doc() had been run\r\n\r\nWe switch to another qconsole tab, then return to the original one and the query behaves correctly.\r\nOn the guess that the qconsole was running a query he had typed in earlier (maybe a cached version or maybe just displaying an old result) we edited the script to read\r\n>> fn:doc(\"/2.xml\")\r\n\r\nThe first document still displays\r\nWe swtich qconsole tabs, and switch back\r\nNow the second document displays\r\n\r\nWe can repeat this process forever.  User was not able to close his browser to see if it made the problem go away because of the other important tabs that were open.\r\n\r\nNot sure if this similar to bug http://bugtrack.marklogic.com/20351", "samplequery":"", "sampledata":"", "version":"6.0-2.1", "tofixin":"6.0-4", "fixedin":"N/A", "platform":"windows(64-bit)", "memory":"", "processors":"", "note":"Using firefox on qconsole", "subscribers":[{"username":"derickson", "name":"David Erickson", "email":"David.Erickson@marklogic.com"}, {"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, {"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, {"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, {"username":"sreddy", "name":"Sudhakar Reddy", "email":"sreddy@marklogic.com"}, {"username":"aabbas", "name":"Adeel Abbas", "email":"Adeel.Abbas@marklogic.com"}], "attachments":[{"name":"Mohammad.xml", "uri":"root/support/bugtracking/attachments/20423/Mohammad.xml"}], "relationships":[{"type":"", "to":""}], "clones":[], "cloneOf":"", "support":{"headline":"", "supportDescription":"", "publishStatus":"Not Ready", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["Query Console", "derickson"], "changeHistory":[{"time":"2013-01-11T06:16:13.293318-08:00", "updatedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "change":{"status":{"from":"", "to":"Verify"}, "assignTo":{"from":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "to":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-11T06:16:13.293318-08:00", "updatedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "change":{"assignTo":{"from":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "to":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-11T06:16:13.293318-08:00", "updatedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "change":{"tofixin":{"from":"", "to":"6.0-3"}}, "files":[], "show":true}, {"time":"2013-01-11T06:32:31.111299-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Scott, can you verify the defect and reproduce the issue. Of not, you may want to get with David to see how to repro it. Thanks."}, {"time":"2013-01-11T06:32:31.111299-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{"assignTo":{"from":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "to":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-11T10:53:12.422262-08:00", "updatedBy":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"It appears that the VPN is down at the moment, but I will check as soon as it's back up.  \r\n\r\nThe issue logged with http://bugtrack.marklogic.com/20351 is a 7.0 bug that appeared after our latest addition of new RFEs addtions, so I don't think it's related.\r\n\r\nOf note, if you're worried about losing queries, perform a workspace export via the drop-down that triggers when you click the arrow next to the workspace name.  You'll see Export Workspace.\r\n\r\nRun that, double check that the XML matches the queries you're worried about.  If not, you can manually edit them to match.  \r\n\r\nThen refresh your browser and see if the issue persists.\r\n\r\nHopefully that gives you at least a work-around.  If anything goes wrong with your queries, you can always import that workspace back in."}, {"time":"2013-01-11T11:51:15.788712-08:00", "updatedBy":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"I'm unable to replicate the issue with the latest 6.0-3 (I don't have access to 6.0-2.1) & Firefox 18.0.  \r\n\r\nOur QA test regularly test modifying queries, executing & checking results, so this issue definitely would have come up in automated testing.\r\n\r\nMy recommendation is to follow the steps in my previous comment to ensure your workspace is saved.  Then restart the browser, in case Firefox is having issues, and see if it's still occurring.\r\n\r\nThanks."}, {"time":"2013-01-11T11:51:15.788712-08:00", "updatedBy":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, "change":{"assignTo":{"from":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, "to":{"username":"derickson", "name":"David Erickson", "email":"David.Erickson@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-31T10:21:46.449329-08:00", "updatedBy":{"username":"derickson", "name":"David Erickson", "email":"David.Erickson@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Sorry, I'm not really able to take actions against bugs assigned to me.  I've encountered this bug on multiple version of ML as recently as last week with 6.0-1 where 75% of a training class I ran hit the problem.\r\n\r\nOften the problem occurs in situations where developers are copy and pasting code from pdf's and Microsoft Office, but I've seen it from notepad  as well.\r\n\r\nAssigning back to you.  Sorry to be a punk."}, {"time":"2013-01-31T10:21:46.449329-08:00", "updatedBy":{"username":"derickson", "name":"David Erickson", "email":"David.Erickson@marklogic.com"}, "change":{"assignTo":{"from":{"username":"derickson", "name":"David Erickson", "email":"David.Erickson@marklogic.com"}, "to":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-31T11:13:23.674911-08:00", "updatedBy":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Hey David,\r\n\r\nYou're not being a punk at all.  :)  I'm just trying to determine if this issue is a factor of the UI getting in a bad state (which is harder to reproduce) or if there's a replicate-able pattern that I can follow to see the issue occur.\r\n\r\nOne question, with your students.  Are they all logging into the same instance of QConsole (meaning one instance of MarkLogic) or are they using their own local installations?\r\n\r\nThanks.  Just hoping to get to the bottom of this...\r\n"}, {"time":"2013-03-01T13:33:43.611557-08:00", "updatedBy":{"username":"gvaidees", "name":"Ganesh Vaideeswaran", "email":"Ganesh.Vaideeswaran@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Scott,\r\n\r\nCan you look at this for 6.0-3 (code freeze 03/15)"}, {"time":"2013-03-01T13:45:32.658395-08:00", "updatedBy":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"I'm unable to reproduce, so without further information, I have no way forward.  I can send to QA to validate that it is indeed functioning as expected."}, {"time":"2013-03-04T12:10:47.080059-08:00", "updatedBy":{"username":"derickson", "name":"David Erickson", "email":"David.Erickson@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Scott,\r\n\r\nre: https://bugtrack.marklogic.com/20423\t\t\t\t\r\n\r\nLooks like this one wasn't easy to reproduce.  I've seen shops run into it as quickly as 3 hours into a ML training class.\r\nThe following link (which I'll also add to the bug in bugtrack) is a youtube video (not listed) of the bug occurring for a developer at CMS\r\n\r\nhttp://www.youtube.com/watch?v=FIAZ4lUmvEM\r\n\r\nI'll get a copy of his workspace extract and add it to the ticket.  This is a Windows 6-0.2-2 windows x64 install being accessed with Windows 7 Chrome.  The MarkLogic server in question has 179 databases.  He has about 30 qconsole tabs open at a time. (adding attachment for the workspace)\r\n\r\nThank you and please let me know if there is anything I can do to help you reproduce this one,"}, {"time":"2013-03-04T14:13:18.760921-08:00", "updatedBy":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Thanks for the video & workspace David.  Next change I get I'll see if I can repro it.  This should make it much easier!"}, {"time":"2013-03-15T13:21:38.921359-07:00", "updatedBy":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "change":{"tofixin":{"from":"6.0-3", "to":"6.0-4"}}, "files":[], "show":true}, {"time":"2013-03-15T13:25:00.162577-07:00", "updatedBy":{"username":"dsokolsky", "name":"Danny Sokolsky", "email":"dsokolsky@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Triaged this out to 6.0-4.  If you think it really needs to go in 6.0-3, find a fix and then argue for it."}, {"time":"2013-06-24T16:13:05.38926-07:00", "updatedBy":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Unfortunately, I am still unable to reproduce this.  I'm going to send this over to our crack QA team to hammer away at QConsole to see if we can't find a simplified scenario where this behavior occurs.   Thanks guys."}, {"time":"2013-06-24T16:13:05.38926-07:00", "updatedBy":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, "change":{"assignTo":{"from":{"username":"sbrooks", "name":"Scott Brooks", "email":"Scott.Brooks@marklogic.com"}, "to":{"username":"aabbas", "name":"Adeel Abbas", "email":"Adeel.Abbas@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-07-12T11:15:50.585227-07:00", "updatedBy":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "change":{"status":{"from":"", "to":"Closed"}, "assignTo":{"from":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"We have not been able to reproduce this at all. Based on decision from triage meeting, closing this. Feel free to re-open if you still see this issue"}, {"time":"2013-07-12T11:15:50.585227-07:00", "updatedBy":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "change":{"assignTo":{"from":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}], "updatedAt":"2013-07-12T11:15:50.585227-07:00", "closedAt":"2013-07-12T11:15:50.585227-07:00", "closedBy":{"username":"msarma", "name":"Meghalim Sarma", "email":"msarma@marklogic.com"}, "renderDescriptionAs":"normal"}