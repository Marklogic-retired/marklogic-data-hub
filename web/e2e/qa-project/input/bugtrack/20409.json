{"id":20409, "kind":"RFE", "createdAt":"2013-01-09T08:38:14.3496-08:00", "status":"Will not fix", "title":"xdmp:function-module should return the module path when calling xdmp:functions() for imported modules", "category":"xdmp", "severity":"Major", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"gvidal", "name":"Gary Vidal", "email":"gary.vidal@marklogic.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"When calling xdmp:functions with an import declaration you should be able to get the function module.  Running test shows the function-module is empty,  ", "samplequery":"xquery version \"1.0-ml\";\r\nimport module namespace domain = \"http://www.xquerrail-framework.com/request\" at \"/_framework/request.xqy\";\r\nfor $function in xdmp:functions()[fn:namespace-uri-from-QName(xdmp:function-name(.)) = \"http://www.xquerrail-framework.com/request\"]\r\norder by fn:string(fn:function-name($function))\r\nreturn  \r\ntry {\r\n <function>\r\n  <name>{xdmp:function-name($function)}</name>\r\n  <module>{xdmp:function-module($function)}</module>\r\n  <arity>{fn:function-arity($function)}</arity> \r\n  <returnType>{xdmp:function-return-type($function)}</returnType>\r\n  <parameters>{\r\n    for $p in (1 to fn:function-arity($function))\r\n    return \r\n      <parameter name=\"{xdmp:function-parameter-name($function,$p)}\" type=\"{xdmp:function-parameter-type($function,$p)}\"/>\r\n  }</parameters>\r\n</function>\r\n} catch($ex) {\r\n   if($ex/error:code = \"XDMP-UNDFUN\")\r\n   then ()\r\n   else $ex\r\n}", "sampledata":"", "version":"6.0-2", "tofixin":"8.0-1", "fixedin":"N/A", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"gvidal", "name":"Gary Vidal", "email":"gary.vidal@marklogic.com"}, {"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}], "attachments":[], "includeInTaskList":false, "proceduralTasks":{"Requirements Task":[], "Functional Specification Task":[], "Test Specification Task":[], "Test Automation Task":[], "Documentation Task":[]}, "subTasks":[], "tags":["xdmp", "gvidal"], "changeHistory":[{"time":"2013-01-10T13:41:55.80824-08:00", "updatedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "change":{"status":{"from":"", "to":"Verify"}, "assignTo":{"from":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "to":{"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-10T13:41:55.80824-08:00", "updatedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "change":{"assignTo":{"from":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "to":{"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-01-10T13:41:55.80824-08:00", "updatedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "change":{"tofixin":{"from":"", "to":"6.0-3"}}, "files":[], "show":true}, {"time":"2013-01-25T04:58:16.70982-08:00", "updatedBy":{"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"This is a feature request, as xdmp:function-module() isn't currently supposed to work that way. As a work around, the namespace of the function should show which module the function comes from."}, {"time":"2013-01-25T04:58:16.70982-08:00", "updatedBy":{"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}, "change":{"tofixin":{"from":"6.0-3", "to":"7.0-ea1"}}, "files":[], "show":true}, {"time":"2013-02-15T02:50:21.402953-08:00", "updatedBy":{"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}, "change":{"tofixin":{"from":"7.0-ea1", "to":"7.0-ea2"}}, "files":[], "show":true}, {"time":"2013-04-19T04:45:49.827014-07:00", "updatedBy":{"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}, "change":{"tofixin":{"from":"7.0-ea2", "to":"7.0-ea3"}}, "files":[], "show":true}, {"time":"2013-05-15T09:27:16.175626-07:00", "updatedBy":{"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}, "change":{"tofixin":{"from":"7.0-ea3", "to":"8.0-1"}}, "files":[], "show":true}, {"time":"2013-05-17T05:30:53.547766-07:00", "updatedBy":{"username":"gvidal", "name":"Gary Vidal", "email":"gary.vidal@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"In comment to this.  Knowing the namespace of the calling module would be fine if you could resolve the namespace to the location through some built-in function.  Do we have a function that resolve a namespace to a module location? "}, {"time":"2013-05-17T06:28:43.404801-07:00", "updatedBy":{"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}, "change":{}, "files":[], "show":true, "comment":"Can you detail your use case for this functionality, so that we have more information on why you might want it?"}, {"time":"2014-09-29T04:28:24.576023-07:00", "updatedBy":{"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}, "change":{"status":{"from":"Verify", "to":"Will not fix"}, "assignTo":{"from":{"username":"jsnelson", "name":"John Snelson", "email":"jsnelson@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"Requested behaviour is not as designed, this should be an RFE."}], "updatedAt":"2014-09-29T04:28:24.576023-07:00"}