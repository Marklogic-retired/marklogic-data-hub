{"id":20738, "kind":"Bug", "createdAt":"2013-02-07T16:39:14.829379-08:00", "status":"Closed", "title":"atom bounds checks", "category":"xdmp", "severity":"Major", "priority":{"level":"5", "title":""}, "submittedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "assignTo":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}, "description":"Add more text atom bounds checks to avoid segfaults on bad data.", "samplequery":"", "sampledata":"", "version":"6.0-1", "tofixin":"6.0-3", "fixedin":"6.0-3", "platform":"all", "memory":"", "processors":"", "note":"", "subscribers":[{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}], "attachments":[], "relationships":[{"type":"", "to":""}], "clones":[], "cloneOf":20737, "support":{"headline":"Corruption of string range index files causes segfaults", "supportDescription":"File system corruption of AdtomIndex, AtomData, StringIndex., or StringData files can cause segfaults.\r\nThe server should detect this corruption and signal an XDMP-BAD excepion instead.", "publishStatus":"Publish", "tickets":[], "customerImpact":{"level":"N/A", "title":""}, "workaround":""}, "tags":["xdmp", "cjl"], "changeHistory":[{"time":"2013-02-07T16:39:14.829379-08:00", "updatedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "change":{"assignTo":{"from":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "to":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}}}, "files":[], "show":true}, {"time":"2013-02-07T16:40:25.704116-08:00", "updatedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "change":{"tofixin":{"from":"", "to":"6.0-3"}}, "files":[], "show":true}, {"time":"2013-02-07T16:41:13.044812-08:00", "updatedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"130937", "paths":["xdmp/branches/b6_0/src/Tree.cpp", "xdmp/branches/b6_0/src/Tree.h", "xdmp/branches/b6_0/src/Schema.h", "xdmp/branches/b6_0/src/RangeIndexes.cpp", "xdmp/branches/b6_0/src/Schema.cpp"], "affectedBugs":[]}, "comment":"bug:20738"}, {"time":"2013-02-08T02:39:16.838872-08:00", "updatedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"131003", "paths":["xdmp/branches/b6_0/src/Server.cpp"], "affectedBugs":[]}, "comment":"bug:20738 addional signal handling: ignore SIGHUP, pstack SIGQUIT,SIGILL,SIGSYS,SIGTRAP"}, {"time":"2013-02-08T04:39:23.915748-08:00", "updatedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"131012", "paths":["xdmp/branches/b6_0/src/Tree.cpp", "xdmp/branches/b6_0/src/Tree.h"], "affectedBugs":[]}, "comment":"bug:20738"}, {"time":"2013-02-08T06:34:45.40481-08:00", "updatedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "change":{}, "files":[], "show":true, "svn":{"repository":"/project/engsvn", "revision":"131019", "paths":["xdmp/branches/b6_0/src/Tree.cpp"], "affectedBugs":[]}, "comment":"bug:20738"}, {"time":"2013-02-13T13:50:44.181127-08:00", "updatedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "change":{"status":{"from":"", "to":"Test"}, "assignTo":{"from":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "to":{"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}}}, "files":[], "show":true, "comment":"fixed in 6.0-20130213\r\nThis was to address the segfaults that JPMC was seeing that produced pstacks.\r\nI added more array bounds checks in the functions that were segfaulting.\r\nSo instead they should produce and XDMP-BAD exception instead of segfaulting.\r\nI have not been able to replicate the segfaults so this is a speculative fix.\r\n"}, {"time":"2013-02-13T13:50:44.181127-08:00", "updatedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "change":{"assignTo":{"from":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "to":{"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}}}, "files":[], "show":true}, {"time":"2013-04-11T23:08:00.442206-07:00", "updatedBy":{"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}, "change":{"status":{"from":"", "to":"Ship"}, "assignTo":{"from":{"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true, "comment":"No specific test case to verify. Moving to ship as our functional, stress and performance test results are looking good.\r\n"}, {"time":"2013-04-22T16:21:15.273322-07:00", "updatedBy":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "change":{"status":{"from":"", "to":"Closed"}, "assignTo":{"from":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "to":{"username":"nobody", "name":"nobody nobody", "email":"nobody@marklogic.com"}}}, "files":[], "show":true}], "updatedAt":"2013-04-22T16:21:15.273322-07:00", "fixedAt":"2013-02-13T13:50:44.181127-08:00", "fixedBy":{"username":"cjl", "name":"Christopher Lindblad", "email":"cjl@cerisent.com"}, "shippedAt":"2013-04-11T23:08:00.442206-07:00", "shippedBy":{"username":"rpolasani", "name":"Raghu Polasani", "email":"raghu.polasani@marklogic.com"}, "closedAt":"2013-04-22T16:21:15.273322-07:00", "closedBy":{"username":"rpelton", "name":"Rick Pelton", "email":"rick.pelton@marklogic.com"}, "renderDescriptionAs":"normal"}