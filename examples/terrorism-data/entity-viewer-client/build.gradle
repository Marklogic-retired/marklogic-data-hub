plugins {
  id "com.marklogic.ml-gradle" version "4.3.2"
}

repositories {
	mavenCentral()
	maven { url "https://developer.marklogic.com/maven2/" }
    maven { url "https://nexus.marklogic.com/repository/maven-snapshots"}
}


configurations {
	mlcp
}

dependencies {
    mlcp "com.marklogic:mlcp:10.0.6.2"
    mlcp files("lib")
    mlBundle "com.marklogic:entity-viewer-modules:1.0-SNAPSHOT"
}

/**
 * Example of using MlcpTask to import data with mlcp.
 */

task importEventsViaMlcp(type: com.marklogic.gradle.task.MlcpTask) {
    description = "Load event docs"
    classpath = configurations.mlcp
    command = "IMPORT"
    port = 8099
    host = "localhost"
    username = "admin"
    password = "admin"
    output_collections = "event"
    input_file_path = "input"
    input_file_type = "documents"
    output_collections = "event"
    output_permissions = "rest-reader,read,rest-reader,update"
    mode = "local"
}

mlDeploy.finalizedBy importEventsViaMlcp


