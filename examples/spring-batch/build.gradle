plugins {
    id 'java'
    id 'application'
    id 'net.saliman.properties' version '1.4.6'
    id 'com.marklogic.ml-data-hub' version '1.1.5'
}

repositories {
    mavenLocal()
    jcenter()
    maven {url 'http://developer.marklogic.com/maven2/'}
}

dependencies {
    compile 'com.marklogic:marklogic-data-hub:1.1.5'
    compile "com.marklogic:marklogic-spring-batch-core:0.7.4"
    compile 'com.marklogic:ml-javaclient-util:4.0.alpha4'

    testCompile "com.marklogic:marklogic-spring-batch-test:0.7.4"
    runtime "com.marklogic:marklogic-spring-batch-core:0.7.2"
}

mainClassName = "com.marklogic.spring.batch.Main"

task importMonsters(type: JavaExec) {
    classpath = sourceSets.main.runtimeClasspath
    main = "com.marklogic.spring.batch.Main"
    args = [
            "--config", "example.LoadAndRunFlow",
            "--project_dir", ".",
            "--env", "local",
            "--input_file_path", "./input",
            "--input_file_pattern", ".*\\.xml",
            "--entity_name", "Monster",
            "--flow_name", "ingest-monster",
            "--chunk", "100"
    ]
}
