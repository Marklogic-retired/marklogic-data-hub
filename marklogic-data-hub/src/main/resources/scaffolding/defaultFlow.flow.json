{
  "name": "%%mlFlowName%%",
  "description": "This is the default flow containing all of the default steps",
  "batchSize": 100,
  "threadCount": 4,
  "options": {
    "sourceQuery": null
  },
  "steps": {
    "1": {
      "name": "default-ingestion-step",
      "description": "This is the default ingestion step",
      "stepDefinitionName": "default-ingestion",
      "stepDefinitionType": "INGESTION",
      "customHook": {},
      "fileLocations": {
        "inputFilePath": "path/to/folder",
        "outputURIReplacement": "output/URI,'substitute/URI'",
        "inputFileType": "json"
      },
      "options": {
        "targetDatabase": "%%mlStagingDbName%%",
        "sourceQuery": null,
        "outputFormat": "json",
        "collections": [
          "default-ingestion"
        ]
      }
    },
    "2": {
      "name": "default-mapping-step",
      "description": "This is the default mapping step",
      "stepDefinitionName": "default-mapping",
      "stepDefinitionType": "MAPPING",
      "options": {
        "sourceDatabase": "%%mlStagingDbName%%",
        "targetDatabase": "%%mlFinalDbName%%",
        "sourceQuery": "cts.collectionQuery('default-ingestion')",
        "collections": [
          "default-mapping",
          "mdm-content"
        ],
        "mapping": {
          "name": "mapping-name",
          "version": 1
        }
      }
    },
    "3": {
      "name": "default-mastering-step",
      "description": "This is the default mastering step",
      "stepDefinitionName": "default-mastering",
      "stepDefinitionType": "MASTERING",
      "options": {
        "sourceDatabase": "%%mlFinalDbName%%",
        "targetDatabase": "%%mlFinalDbName%%",
        "targetEntity": "entity-name",
        "sourceQuery": "cts.andQuery([cts.collectionQuery('default-mapping'),cts.collectionQuery('mdm-content')])",
        "collections": [
          "default-mastering, mastered"
        ]
      }
    }
  }
}
