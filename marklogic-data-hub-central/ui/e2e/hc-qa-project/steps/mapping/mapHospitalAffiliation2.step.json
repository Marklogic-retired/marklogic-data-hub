{
  "collections": [
    "mapHospitalAffiliation2",
    "HospitalAffiliation"
  ],
  "additionalCollections": [ ],
  "permissions": "data-hub-common,read,data-hub-common,update",
  "batchSize": 100,
  "validateEntity": "doNotValidate",
  "targetFormat": "JSON",
  "attachSourceDocument": false,
  "name": "mapHospitalAffiliation2",
  "targetEntityType": "http://marklogic.com/HospitalAffiliation-0.0.1/HospitalAffiliation",
  "description": "Map Hospital-2 Affiliation",
  "selectedSource": "query",
  "sourceQuery": "cts.andNotQuery(cts.andQuery([cts.collectionQuery('CMS-Provider.csv'), cts.jsonPropertyValueQuery('st', ['MD','VA','DC'])]),cts.jsonPropertyValueQuery('hosp_afl_2', ''))",
  "targetDatabase": "data-hub-FINAL",
  "headers": { },
  "interceptors": [ ],
  "provenanceGranularityLevel": "off",
  "customHook": { },
  "sourceDatabase": "data-hub-STAGING",
  "stepDefinitionName": "entity-services-mapping",
  "stepDefinitionType": "mapping",
  "stepId": "mapHospitalAffiliation2-mapping",
  "acceptsBatch": true,
  "lastUpdated": "2023-03-20T23:38:31.938135Z",
  "properties": {
    "HospitalAffiliationCCN": {
      "sourcedFrom": "hosp_afl_2"
    },
    "HospitalAffiliationName": {
      "sourcedFrom": "getStringNormalized(hosp_afl_lbn_2)"
    },
    "ProviderNPI": {
      "sourcedFrom": "NPI"
    },
    "HospitalCCNAndProviderNPI": {
      "sourcedFrom": "concat(hosp_afl_2,'-',NPI)"
    },
    "ProviderNPIAndAddrId": {
      "sourcedFrom": "concat(NPI,'-',adrs_id)"
    },
    "PrimarySpeciality": {
      "sourcedFrom": "getStringNormalized(pri_spec)"
    }
  },
  "uriExpression": "concat('/HospitalCCN/',hosp_afl_2,'/NPI/',NPI)"
}